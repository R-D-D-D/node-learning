{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/HelloWorld.vue?e5f1","webpack:///./src/App.vue?a807","webpack:///./src/plugins/vex.js","webpack:///./src/App.vue?35a6","webpack:///./src/components/HelloWorld.vue?2b38","webpack:///src/components/HelloWorld.vue","webpack:///./src/components/HelloWorld.vue?cede","webpack:///./src/components/HelloWorld.vue?2e9a","webpack:///./src/components/Header.vue?6685","webpack:///src/components/Header.vue","webpack:///./src/components/Header.vue?f596","webpack:///./src/components/Header.vue","webpack:///src/App.vue","webpack:///./src/App.vue?fa61","webpack:///./src/App.vue?312b","webpack:///./src/components/Register.vue?4a27","webpack:///./src/services/Api.js","webpack:///./src/services/AuthenticationService.js","webpack:///./src/components/Panel.vue?6ccb","webpack:///src/components/Panel.vue","webpack:///./src/components/Panel.vue?a047","webpack:///./src/components/Panel.vue","webpack:///src/components/Register.vue","webpack:///./src/components/Register.vue?0c6d","webpack:///./src/components/Register.vue","webpack:///./src/components/StudentView/Student.vue?0e38","webpack:///src/components/StudentView/Student.vue","webpack:///./src/components/StudentView/Student.vue?b898","webpack:///./src/components/StudentView/Student.vue","webpack:///./src/components/LogIn.vue?3711","webpack:///src/components/LogIn.vue","webpack:///./src/components/LogIn.vue?b5a1","webpack:///./src/components/LogIn.vue","webpack:///./src/components/Lesson/ShowLesson.vue?3ccc","webpack:///./src/plugins/tone.js","webpack:///./src/utils.js","webpack:///src/components/Lesson/ShowLesson.vue","webpack:///./src/components/Lesson/ShowLesson.vue?0fd8","webpack:///./src/components/Lesson/ShowLesson.vue?8f66","webpack:///./src/components/Lesson/LessonIndex.vue?867f","webpack:///./src/services/LessonService.js","webpack:///src/components/Lesson/LessonIndex.vue","webpack:///./src/components/Lesson/LessonIndex.vue?30f0","webpack:///./src/components/Lesson/LessonIndex.vue","webpack:///./src/components/TutorIndex.vue?61c7","webpack:///src/components/TutorIndex.vue","webpack:///./src/components/TutorIndex.vue?a0bc","webpack:///./src/components/TutorIndex.vue","webpack:///./src/router/index.js","webpack:///./src/services/SubscriptionService.js","webpack:///./src/store/index.js","webpack:///./src/plugins/vuetify.js","webpack:///./src/main.js","webpack:///./src/components/Lesson/ShowLesson.vue?a2d7"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","Vex","UI","VF","Flow","getRandomInt","max","Math","floor","random","getStyle","el","styleProp","y","x","document","getElementById","currentStyle","getComputedStyle","defaultView","getPropertyValue","getMousePositionInCanvas","canvas","evt","border","id","borderValue","substring","indexOf","match","padding","paddingValue","rect","getBoundingClientRect","clientX","left","scale","clientY","top","getAbsoluteMousePositionInCanvas","isCursorWithinRectangle","width","height","mouseX","mouseY","getFirstTickableAfterXPosition","stave","note","getTickables","getAbsoluteX","getLastTickableBeforeXPosition","mergeProperties","obj1","obj2","obj3","attrname","getStemDirection","reference","getYForLine","StaveNote","STEM_DOWN","STEM_UP","provisoryTickableStyle","shadowBlur","shadowColor","fillStyle","strokeStyle","highlightNoteStyle","defaultNoteStyle","Handler","containerId","options","this","container","defaultOptions","canEdit","canPlay","canAddStaves","canChangeNoteValue","showToolbar","numberOfStaves","canvasProperties","tabindex","createCanvas","renderer","Renderer","Backends","CANVAS","ctx","getContext","staveList","createStaves","currentNote","currentStave","provisoryTickable","mouseListener","MouseListener","noteMenu","NoteMenu","init","tipRenderer","TipRenderer","createElement","props","keys","appendChild","yPosition","Stave","addClef","addTimeSignature","font","family","size","weight","setContext","setTickables","redraw","startListening","notesInserted","clear","drawStaves","drawNotes","undefined","redrawStave","box","getBoundingBox","idx","clearRect","getX","getY","getW","getH","draw","voice","Voice","TIME4_4","setMode","Mode","SOFT","setStrict","addTickables","formatter","Formatter","joinVoices","formatToStave","drawBeams","beams","Beam","generateBeams","updateProvisoryKey","mousePos","duration","noteType","noteName","NoteMap","getNoteName","clone","setStyle","setStemDirection","setStave","setTickContext","TickContext","drawProvisoryTickable","updateProvisoryDuration","newDur","x_shift","updateProvisoryType","newType","TickableType","NOTE","REST","BAR","BarNote","CLEF","ClefNote","clefKey","barline","Barline","setX","getTickContext","getNoteStartX","render_options","stave_padding","tempFillStyle","tempStrokeStyle","openMenuForKey","keyName","stopListening","setNote","setKeyIndex","indexOfKey","open","noteMenuClosed","addAccidentalToNote","index","accidental","Accidental","addAccidental","addDotToNote","dots","addDotToAll","beamWithNextNote","nextNote","getNextNote","notes","beam","pushBeam","deleteNote","getNotes","referenceIndex","removeTickable","exportNotes","dur","dot","temp","importNotes","timeSignature","tickables","barNum","barDuration","eval","accumDuration","noteArr","split","isDot","includes","replace","staveNote","clef","parseInt","numBars","changeBars","newNumBars","usable","durationOfRest","setTimeSignature","highlightNote","console","log","setHighlight","currStave","currNumNotes","handler","keyIndex","panelProps","buttons","accidentals","canRender","currentButton","buttonRenderer","NoteMenuButtonRenderer","setTipArea","leftPadding","rightPadding","bottomPadding","fontSize","_x","_y","bottomY","_width","_height","boundingBox","backgroundColor","drawMenuPanel","panel","context","ready","drawButtons","addEventListener","close","removeEventListener","handleEvent","preventDefault","type","handleMouseClick","handleMouseMove","panelWidth","panelHeight","panelX","panelY","panelPosition","beginPath","fill","lineWidth","stroke","moveTo","lineTo","rightX","position","closeButton","accidentalButton","dotButton","beamButton","deleteButton","button","callAction","highlight","showTip","tip","addDoubleFlat","addFlat","addNatural","addSharp","addDoubleSharp","addDot","addBeam","handleMouseOver","handleMouseWheel","handleRightMouseClick","handleMouseLeave","findWhichStaveMouseOver","findWhichNoteMouseOver","noteList","noteBox","staveBox","handleLeftMouseClick","handleMiddleMouseClick","alert","delta","min","wheelDelta","deltaY","isAlias","durationAliases","newNote","replaceTickable","setType","setClef","previousNote","insertTickableBetween","clickedKeyName","newKeys","oldNote","tickable","newTickable","previousTickable","nextTickable","getClefModifierIndex","replaceClef","setEndBarType","pushTickable","modifiers","modifier","Clef","start_X","start_x","glyphs","getPreviousTickable","referenceTickable","getNextTickable","referenceNote","oldTickable","setBeams","beamList","getBeams","newBeam","letter","getPlayEvents","playInfo","MIDI","keyToNote","ClefOffsets","keyPressTime","defaultTime","modValue","Dot","events","channel","subtype","noteNumber","velocity","queuedTime","delay","newProps","currentProps","stem_direction","mergedProps","note_heads","style","modifierContext","getDots","change","action","Array","k","splitted","toUpperCase","octave","noteMap","parseNoteDurationString","drawFlag","RERR","glyph","getGlyph","render_flag","bounds","getNoteHeadBounds","x_begin","getNoteHeadBeginX","x_end","getNoteHeadEndX","flag","flag_x","flag_y","note_stem_height","stem","getHeight","Stem","DOWN","y_top","code_flag_downstem","y_bottom","code_flag_upstem","ctxFillStyle","openGroup","pointerBBox","applyStyle","getFlagStyle","render","restoreStyle","closeGroup","spacing_between_lines_px","start","getModifierStartXY","getCategory","getStemExtents","baseY","dot_x","radius","dot_y","y_shift","arc","PI","newBarNote","getType","getStave","currentEvents","newEvents","markBeginRepeatIndex","beginRepeatIndex","addRepeatEvents","REPEAT_BEGIN","REPEAT_END","REPEAT_BOTH","newClef","relativeMouseY","noteArea","round","toNoteName","baseNote","getBaseNote","baseNoteValue","desiredNoteValue","desiredNoteOctave","color","fontName","textAlign","textBaseline","showingTip","hideTip","fillText","menuButtonsImg","Image","src","onload","offset","drawingOffset","buttonWidth","buttonX","buttonY","Button","imageObj","positions","actions","tips","initialOffsetX","offSetX","offSetY","sourceX","sourceY","sourceWidth","sourceHeight","destWidth","destHeight","destX","destY","drawImage","tieButton","_vm","_h","$createElement","_c","_self","attrs","staticClass","staticRenderFns","_v","_s","msg","component","on","$event","drawer","$store","state","isUserLoggedIn","_e","user","browseAllTutors","logout","model","callback","$$v","expression","go_to_lessons","methods","dispatch","$router","VAppBar","VAppBarNavIcon","VBtn","VIcon","VList","VListItem","VListItemGroup","VListItemIcon","VListItemTitle","VNavigationDrawer","VSpacer","VToolbarItems","VToolbar","VToolbarTitle","components","HelloWorld","VApp","VContainer","VMain","ref","nameRules","username","emailRules","email","passwordRules","password","role","loading","register","domProps","error","axios","baseURL","credentials","Api","post","login","title","_t","VCard","VCol","VRow","Panel","VCardText","VForm","VRadio","VRadioGroup","VTextField","_l","tutor","avatar","computed","VImg","VListItemAvatar","VListItemContent","disable_title_edit","enable_save_btn","is_student","save_btn_loading","$emit","disable","update_rhythms","lesson","class","rhythm","display_rhythm","edit_rhythm_title","active_rhythm","title_editable","active_rhythm_title","open_dialogue","time_signatures","time_signature","bars_label","no_bars","bpm_label","bpm","scopedSlots","_u","fn","dialog","add_btn_loading","add_rhythm","lowPass","Tone","Filter","frequency","noise","NoiseSynth","volume","playbackRate","envelope","attack","decay","sustain","release","poly","PolySynth","Synth","oscillator","partials","freqEnv","started","player","time","forEach","element","isRest","Time","initiated","voices","v","env","FrequencyEnvelope","baseFrequency","Frequency","octaves","log2","releaseCurve","exponent","connect","toMaster","Player","load","createAndRecordSequence","audio","noRecord","Transport","notesToEvents","timeSigArr","Context","latencyHint","part","Part","triggerAttackRelease","loop","totalNumBars","scheduleRepeat","restart","schedule","stop","cancel","actx","dest","createMediaStreamDestination","recorder","MediaRecorder","stream","chunks","ondataavailable","onstop","blob","Blob","URL","createObjectURL","generateRhythmString","toString","noOfBars","join","generateRhythmsString","rhythms","parseRhythmString","str","strArr","obj","parseRhythmsString","map","cloneRhythms","newRhythm","cloneLesson","TutorId","date","recording","isStudent","watch","val","event","target","record","disabled","navigator","mediaDevices","getUserMedia","onclick","mediaRecorder","background","clipContainer","classList","add","clipLabel","setAttribute","textContent","comparison","clipName","soundClips","controls","audioURL","evtTgt","parentNode","removeChild","childNodes","existingName","newClipName","e","err","constraints","then","onSuccess","onError","mounted","vex","$on","tone","playSequence","VCardActions","VCardTitle","VDialog","VSelect","VSheet","VSlider","showlesson","_g","_b","pickerRules","picker","submit","lessonInfo","list","userId","edit","put","Date","toISOString","substr","validation","namePassed","getters","tutorFromSubscribedTutors","$route","params","tutor_id","VDatePicker","subscribedTutorsId","subscribe","subscribedTutors","Vue","use","VueRouter","routes","path","Register","LogIn","Student","ShowLesson","LessonIndex","TutorIndex","router","subscriptionInfo","getSubscriptionInfoOfStudent","getSubscriptionInfoOfTutor","getAllTutors","Vuex","Store","strict","token","subscribedStudents","allTutors","lessons","filter","lessonFromSubscribedTutors","lesson_id","mutations","setToken","setUser","logIn","logOut","addLesson","utils","setLessons","setAllTutors","tutors","setTutors","setLessonsForTutor","payload","tutorIdx","Error","commit","getLessons","LessonService","response","editRhythm","store","lessonObj","newLesson","SubscriptionService","studentId","getTutorsOfStudent","getStudentsOfTutor","students","getLessonsForStudent","Vuetify","config","productionTip","vuetify","h","App","$mount"],"mappings":"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","file":"js/app.3ba61871.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HelloWorld.vue?vue&type=style&index=0&id=0f42bf65&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HelloWorld.vue?vue&type=style&index=0&id=0f42bf65&scoped=true&lang=css&\"","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\""," /* eslint-disable */ \n\n// Handler until line 483 =================================================================================================================\n\nVex.UI = {};\n\nconst VF = Vex.Flow;\n\n//Vex UI -> User Interface for VexFlow\n/*\n * Vex.UI.Handler: this class is responsible for starting all the events needed for the VexFlow User Interface to work.\n */\nVex.UI.provisoryTickableStyle = {shadowBlur:0, shadowColor:'gray', fillStyle:'gray', strokeStyle:'gray'}; \nVex.UI.highlightNoteStyle = {shadowBlur:15, shadowColor:'red', fillStyle:'black', strokeStyle:'black'};\nVex.UI.defaultNoteStyle = {shadowBlur:0, shadowColor:'black', fillStyle:'black', strokeStyle:'black'};\nVex.UI.scale = 1.5;\n\nVex.UI.Handler = function (containerId, options){\n\tthis.container = document.getElementById(containerId);\n\n\t//Merge options with default options\n\tvar defaultOptions = {\n\t\tcanEdit: true,\n\t\tcanPlay: true,\n\t\tcanAddStaves: true,\n\t\tcanChangeNoteValue: true,\n\t\tshowToolbar: true,\n\t\tnumberOfStaves: 4,\n\t\tcanvasProperties: {\n\t\t\tid: containerId + \"-canvas\",\n\t\t\twidth: 1225,\n\t\t\theight: 320,\n\t\t\ttabindex: 1\n\t\t}\n\t};\n\n\tthis.options = mergeProperties(defaultOptions, options || {});\n\tthis.canvas = this.createCanvas();\n\tthis.renderer = new Vex.Flow.Renderer(this.canvas, Vex.Flow.Renderer.Backends.CANVAS);\n\tthis.ctx = this.renderer.getContext();\n\tthis.staveList = this.createStaves();\n\tthis.ctx.scale(1.5, 1.5);\n\n\t// if(this.options.showToolbar)\n\t// \tthis.toolbar = new Vex.UI.Toolbar(this);\n\n\tthis.currentNote = null;\n\tthis.currentStave = null;\n\t//Tickable that will follow the mouse position\n\tthis.provisoryTickable = null;\n\t\n\tthis.mouseListener = new Vex.UI.MouseListener(this, this.canvas, this.staveList);\n\t\n\t// this.keyboardListener = new Vex.UI.KeyboardListener(this, this.canvas, this.staveList);\n\t\n\tthis.noteMenu = new Vex.UI.NoteMenu(this, this.canvas, this.ctx);\n\tthis.noteMenu.init();\n\t\n\tthis.tipRenderer = new Vex.UI.TipRenderer(this.canvas);\n\tthis.tipRenderer.init();\n\t\n\t// this.player = new Vex.UI.Player(this, this.staveList);\n};\n\nVex.UI.Handler.prototype.createCanvas = function() {\n\tvar canvas = document.createElement('canvas');\n\t//Attach all properties to element\n\tvar props = Object.keys(this.options.canvasProperties);\n\tfor(var i = 0; i<props.length; i++){\n\t\tcanvas[props[i]] = this.options.canvasProperties[props[i]];\n\t}\n\tthis.container.appendChild(canvas);\n\n\treturn canvas;\n};\n\nVex.UI.Handler.prototype.createStaves = function() {\n\tvar staveList = [];\n\tvar yPosition = 0;\n\tfor(var i = 0; i < this.options.numberOfStaves; i++){\n\t\t//TODO make stave position more dinamic\n\t\tvar stave = {};\n\t\tif ((i + 1) % 2 == 0) {\n\t\t\tstave = new Vex.Flow.Stave(410, yPosition, 400);\n\t\t\tyPosition += (stave.height * 1.2);\n\t\t} else {\n\t\t\tstave = new Vex.Flow.Stave(10, yPosition, 400);\n\t\t\tstave.addClef(\"treble\").addTimeSignature('4/4');\n\t\t}\n\t\tstave.font = {\n      family: 'sans-serif',\n      size: 12,\n      weight: '',\n\t\t};\n\t\tstaveList.push(stave);\n\t\tstave.setContext(this.ctx);\n\t\t//Initially empty -> No Notes\n\t\t//TODO make it able to load notes\n\t\tstave.setTickables([]);\n\t}\n\n\treturn staveList;\n};\n\n\nVex.UI.Handler.prototype.init = function() {\n\t//Draw everything\n\tthis.redraw();\n\n\tif(this.options.canEdit){\n\t\t//Start the Listeners\n\t\tthis.mouseListener.startListening();\n\t\t// this.keyboardListener.startListening();\n\t}\n\n\treturn this;\n};\n\nVex.UI.Handler.prototype.redraw = function(notesInserted){\n\tthis.ctx.clear();\n\tthis.drawStaves();\n\tif (notesInserted) {\n\t\tthis.drawNotes(undefined, true);\n\t} else {\n\t\tthis.drawNotes();\n\t}\n};\n\nVex.UI.Handler.prototype.redrawStave = function(stave){\n\t//get stave bounding box\n\tvar box = stave.getBoundingBox();\n\t//TODO The +12 and +5 values are to erase part of a note that could be out of the bounding box. This values shouldn't be absolut. FIX!\t\n\t// this.ctx.clear();\n\t// this.drawStaves();\n\t// for(var i = 0; i < this.staveList.length; i++){\n\t// \tthis.drawNotes(this.staveList[i]);\n\t// }\n\tvar idx = this.staveList.indexOf(stave);\n\tif ((idx + 1) % 2 == 0) {\n\t\tthis.ctx.clearRect(box.getX(), box.getY(), box.getW() + 15, box.getH() + 5);\n\t} else {\n\t\tthis.ctx.clearRect(box.getX() - 15, box.getY(), box.getW() + 16, box.getH());\n\t}\n\tthis.drawStaves(stave, true);\n\tthis.drawNotes(stave);\n};\n\nVex.UI.Handler.prototype.drawStaves = function(stave){\n\tif (stave) {\n\t\tstave.draw();\n\t} else {\n\t\tfor(var i = 0; i < this.staveList.length; i++){\n\t\t\tthis.staveList[i].draw();\n\t\t}\n\t}\n};\n\nVex.UI.Handler.prototype.drawNotes = function(stave, notesInserted){\n\tif(stave === undefined){\n\t\t//Draw Notes on all staves\n\t\tfor(var i = 0; i < this.staveList.length; i++){\n\t\t\tthis.drawNotes(this.staveList[i], notesInserted);\n\t\t}\n\t} else {\n\t\t//Draw notes on Stave passed as Arg\n\t\tvar voice = new Vex.Flow.Voice(Vex.Flow.TIME4_4).setMode(Vex.Flow.Voice.Mode.SOFT);\n\t\t// disable strict timing, or else we won't be able to render BarNotes\n\t\tvoice.setStrict(false);\n\t\tvoice.addTickables(stave.getTickables());\n\t\t\n    var formatter = new Vex.Flow.Formatter();\n    if (stave.getTickables().length != 0) {\n\t\t\tformatter.joinVoices([voice]);\n\t\t\tformatter.formatToStave([voice], stave);\n\t\t\tvoice.draw(this.ctx, stave);\n\t\t\tif (notesInserted) {\n\t\t\t\tthis.drawBeams(stave, true);\n\t\t\t} else {\n\t\t\t\tthis.drawBeams(stave);\n\t\t\t}\n\t\t}\n\t}\n};\n\nVex.UI.Handler.prototype.drawBeams = function(stave, notesInserted){\n\t// for(var i = 0; i < stave.getBeams().length; i++){\n\t// \tstave.getBeams()[i].setContext(this.ctx).draw();\n\t// }\n\t\n\tif (notesInserted || stave.beams == null) {\n\t\tstave.beams = Vex.Flow.Beam.generateBeams(stave.getTickables());\n\t}\n\n\tfor (var i = 0; i < stave.beams.length; i ++) {\n\t\tstave.beams[i].setContext(this.ctx).draw();\n\t}\n};\n\n\nVex.UI.Handler.prototype.updateProvisoryKey = function(mousePos){\n\t\n\tif(this.provisoryTickable==null){\n\t\tthis.provisoryTickable = new Vex.Flow.StaveNote({keys: [\"d/4\"], duration: \"4\"});\t\t\n\t}\n\n\t\n\t\n\tif(this.currentStave!=null){\n\t\tif(!(this.provisoryTickable instanceof Vex.Flow.StaveNote) || this.provisoryTickable.noteType == \"r\"){\n\t\t\t//No need to update key if its not a note or if its a rest, just draw the tickable in the new mouse position\n\t\t}\n\t\telse{\n\t\t\tvar noteName = NoteMap.getNoteName(this.currentStave, mousePos);\n\t\t\tif(noteName != this.provisoryTickable.keys[0]){\n\t\t\t\t\n\t\t\t\tthis.provisoryTickable = this.provisoryTickable.clone({keys: [noteName]});\n\t\t\t\tif(this.provisoryTickable !== undefined){\n\t\t\t\t\tthis.provisoryTickable.setStyle(Vex.UI.provisoryTickableStyle);\n\t\t\t\t}\n\t\t\t\t//Since we have a new note key, update the stem direction\n\t\t\t\tthis.provisoryTickable.setStemDirection(getStemDirection(this.currentStave, mousePos.y));\n\t\t\t\tthis.provisoryTickable.setStave(this.currentStave);\n\t\t\t\tthis.provisoryTickable.setTickContext(new Vex.Flow.TickContext());\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t\tthis.drawProvisoryTickable(mousePos);\n\t\t\n\t}\n\t\n};\n\nVex.UI.Handler.prototype.updateProvisoryDuration = function(newDur){\n\tvar x_shift = null;\n\tif(this.provisoryTickable)\n\t\tx_shift = this.provisoryTickable.x_shift;\n\tthis.provisoryTickable = this.provisoryTickable.clone({duration: newDur});\n\tif(x_shift)\n\t\tthis.provisoryTickable.x_shift = x_shift;\n\tthis.provisoryTickable.setStave(this.currentStave || this.staveList[0]);\n\tthis.provisoryTickable.setTickContext(new Vex.Flow.TickContext());\n\tthis.drawProvisoryTickable();\n\t\n};\n\nVex.UI.Handler.prototype.updateProvisoryType = function(newType){\n\tvar x_shift = null;\n\tif(this.provisoryTickable)\n\t\tx_shift = this.provisoryTickable.x_shift;\n\t\n\tswitch(newType){\n\tcase Vex.UI.TickableType.NOTE:\n\t\tthis.provisoryTickable = new Vex.Flow.StaveNote({keys: [\"d/4\"], duration: \"4\" });\n\t\tbreak;\n\tcase Vex.UI.TickableType.REST:\n\t\tvar duration = \"4\";//TODO make it more configurable, or at least dinamic\n\t\tif(this.provisoryTickable)\n\t\t\tduration = this.provisoryTickable.duration;\n\t\tthis.provisoryTickable = new Vex.Flow.StaveNote({ keys: [\"b/4\"], duration: duration + \"r\" });\n\t\tbreak;\n\tcase Vex.UI.TickableType.BAR:\n\t\tthis.provisoryTickable = new Vex.Flow.BarNote();\n\t\tbreak;\n\tcase Vex.UI.TickableType.CLEF:\n\t\tthis.provisoryTickable = new Vex.Flow.ClefNote(\"treble\");\n\t\tthis.provisoryTickable.clefKey = \"treble\";\n\t\tbreak;\n\t}\n\t\n\t//TODO Maybe this code below shouldn't be here... should we really draw in this method?\n\tthis.provisoryTickable.setStave(this.currentStave || this.staveList[0]);\n\tthis.provisoryTickable.setTickContext(new Vex.Flow.TickContext());\n\tif(this.provisoryTickable.setStyle !== undefined)\n\t\tthis.provisoryTickable.setStyle(Vex.UI.provisoryTickableStyle);\n\tif(x_shift)\n\t\tthis.provisoryTickable.x_shift = x_shift;\n\t\n\tthis.drawProvisoryTickable();\n};\n\nVex.UI.Handler.prototype.drawProvisoryTickable = function(mousePos){\n\t\n\tif(this.provisoryTickable && this.currentStave!=null){\n\t\t//console.log('hey----------', this.provisoryTickable)\n\t\tthis.redrawStave(this.currentStave);\n\t\tif(mousePos!==undefined){\n\t\t\tif(this.provisoryTickable instanceof Vex.Flow.StaveNote){\n\t\t\t\t//Fix X position to set exactly where the mouse is\n\t\t\t\t//TODO the -5 value shouldnt be absolute! it should reflect half the note's Width\n\t\t\t\tthis.provisoryTickable.x_shift= mousePos.x - this.provisoryTickable.getAbsoluteX() - 5;\n\n\t\t\t}else if (this.provisoryTickable instanceof Vex.Flow.BarNote){// if(this.provisoryTickable instanceof Vex.Flow.BarNote){\n\t\t\t\tconst barline = new Vex.Flow.Barline(1);\n\t\t\t\t// barline.setX(mousePos.x \n\t\t\t\t// \t- this.currentStave.getNoteStartX() \n\t\t\t\t// \t- this.provisoryTickable.render_options.stave_padding);\n\t\t\t\tbarline.setX(mousePos.x);\n\t\t\t\tbarline.draw(this.currentStave);\n\t\t\t} else {\n\t\t\t\tthis.provisoryTickable.getTickContext().setX(\n\t\t\t\t\tmousePos.x \n\t\t\t\t\t- this.currentStave.getNoteStartX()\n\t\t\t\t\t- this.provisoryTickable.render_options.stave_padding\n\t\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\t//Only draw Provisory note if not on a definitive note\n\t\tif(this.currentNote==null){\n\t\t\tvar tempFillStyle = this.ctx.fillStyle;\n\t\t\tvar tempStrokeStyle = this.ctx.strokeStyle;\n\t\t\tthis.ctx.fillStyle = 'gray';\n\t\t\tthis.ctx.strokeStyle = 'gray';\n\n\t\t\tif (this.provisoryTickable instanceof Vex.Flow.BarNote) {\n\t\t\t\t//this.provisoryTickable.draw();\n\t\t\t} else {\n\t\t\t\tthis.provisoryTickable.draw();\n\t\t\t}\n\n\t\t\tthis.ctx.fillStyle = tempFillStyle;\n\t\t\tthis.ctx.strokeStyle = tempStrokeStyle;\n\n\t\t}\t\n\t}\n\t\n};\n\n// Menu management\nVex.UI.Handler.prototype.openMenuForKey = function(keyName, mousePos){\n\t//We will open a new Menu: stop listening to the StaveMouseListener\n\tthis.mouseListener.stopListening();\n\tthis.noteMenu.setNote(this.currentNote);\n\tthis.noteMenu.setKeyIndex(this.currentNote.indexOfKey(keyName));\n\tthis.noteMenu.open(mousePos);\n};\n\n/**\n * This method is called by NoteMenu on close()\n */\nVex.UI.Handler.prototype.noteMenuClosed = function(){\n\t//Redraw the whole canvas\n\tthis.redraw();\n\t//Resume listening the the mouse\n\tthis.mouseListener.startListening();\n};\n\nVex.UI.Handler.prototype.addAccidentalToNote = function(name, note, index){\n\tif(index === undefined || index == -1)\n\t\tindex = 0;\n\t\n\tvar accidental = new Vex.Flow.Accidental(name);\n\tnote.addAccidental(index, accidental);\n};\n\n//Dots were moving up when the key is over a line. between lines works fine.\n//Error provoked by modifiercontext.js on line 356 (or vexflow-min.js line 4007)\n//Changed the line on min.js to stop shifting the dot when over a line to avoid the problem.\nVex.UI.Handler.prototype.addDotToNote = function(note){\n\tif (note.dots == 0) \n\t\tnote.addDotToAll();\n};\n\n//TODO Only create a new beam with next note if there isnt a beam already. Otherwise, merge beam or add note to beam.\nVex.UI.Handler.prototype.beamWithNextNote = function(note){\n\tvar nextNote = this.currentStave.getNextNote(note);\n\t\n\tif(nextNote != null) {\n\t\t//Set the note array\n\t\t\n\t\tnotes = [note, nextNote];\n\t\t\n\t\tnextNote.setStemDirection(note.getStemDirection());\n\t\t//Create beam\n\t\tvar beam = new Vex.Flow.Beam(notes);\n\t\t\n\t\tthis.currentStave.pushBeam(beam);\n\t}\n};\n\nVex.UI.Handler.prototype.deleteNote = function(note){\n\tfor(var i = 0; i < this.staveList.length; i++){\n\t\tvar notes = this.staveList[i].getNotes();\n\t\tvar referenceIndex = notes.indexOf(note);\n\n\t\tif(referenceIndex > -1){\n\t\t\tthis.staveList[i].removeTickable(note);\n\t\t}\n\t}\n};\n\nVex.UI.Handler.prototype.exportNotes = function() {\n\tvar result = [];\n\tfor(var i = 0; i < this.staveList.length; i++){\n\t\tfor(var j = 0; j < this.staveList[i].getTickables().length; j++){\n\t\t\tvar note = this.staveList[i].getTickables()[j];\n\t\t\tif (note instanceof Vex.Flow.StaveNote) {\n\t\t\t\tvar dur = note.duration;\n\t\t\t\tvar key = note.keys[0];\n\t\t\t\tvar dot = note.dots;\n\t\t\t\tvar noteType = note.noteType;\n\t\t\t\tvar temp = key + \"/\" + dur;\n\t\t\t\tif (noteType == \"r\") {\n\t\t\t\t\ttemp += \"r\";\n\t\t\t\t}\n\t\t\t\tif (dot == 1) {\n\t\t\t\t\ttemp += \"d\";\n\t\t\t\t}\n\t\t\t\tresult.push(temp);\n\t\t\t}\n\t\t}\n\t}\n\treturn result;\n};\n\nVex.UI.Handler.prototype.importNotes = function(notes, timeSignature) {\n\tif (notes && timeSignature) {\n\t\tvar tickables = []\n\t\tvar barNum = 0\n\t\tvar barDuration = eval(timeSignature)\n\t\tvar accumDuration = 0\n\t\n\t\tfor (var j = 0; j < this.staveList.length; j++) {\n\t\t\tthis.staveList[j].setTickables([])\n\t\t}\n\t\n\t\tfor (var i = 0; i < notes.length; i++) {\n\t\t\tvar noteArr = notes[i].split('/')\n\t\t\tvar dur = noteArr[2]\n\t\t\tvar isDot = false\n\t\t\tif (dur.includes(\"r\")) {\n\t\t\t\tdur = dur.replace(\"r\", \"\");\n\t\t\t}\n\t\t\tif (dur.includes(\"d\")) {\n\t\t\t\tdur = dur.replace(\"d\", \"\");\n\t\t\t\tisDot = true;\n\t\t\t}\n\t\t\tvar staveNote = new Vex.Flow.StaveNote({clef: \"treble\", keys: [noteArr[0] + '/' + noteArr[1]], duration: dur })\n\t\t\tstaveNote.setStyle(Vex.UI.defaultNoteStyle);\n\t\t\tstaveNote.setTickContext(new Vex.Flow.TickContext());\n\t\t\tdur = 1 / parseInt(dur)\n\t\t\tif (isDot) {\n\t\t\t\tdur = dur * 1.5\n\t\t\t\tstaveNote.addDotToAll()\n\t\t\t}\n\t\n\t\t\tif (accumDuration + dur > barDuration) {\n\t\t\t\tthis.staveList[barNum].setTickables(tickables)\n\t\t\t\ttickables = []\n\t\t\t\tbarNum++;\n\t\t\t\taccumDuration = dur\n\t\t\t} else {\n\t\t\t\taccumDuration += dur\n\t\t\t}\n\t\t\tstaveNote.setStave(this.staveList[barNum])\n\t\n\t\t\ttickables.push(staveNote);\n\t\t}\n\t\t\n\t\tif (tickables.length > 0 && barNum + 1 <= this.options.numberOfStaves) {\n\t\t\tthis.staveList[barNum].setTickables(tickables)\n\t\t}\n\n\t\tfor (var j = 0; j < this.staveList.length; j++) {\n\t\t\tthis.drawBeams(this.staveList[j], true);\n\t\t}\n\t\tthis.redraw()\n\t}\n};\n\nVex.UI.Handler.prototype.numBars = 4;\nVex.UI.Handler.prototype.timeSignature = '4/4';\n\nVex.UI.Handler.prototype.changeBars = function(newNumBars) {\n\t//console.log(\"newBar\", newNumBars);\n\tif (newNumBars > this.numBars) {\n\t\tfor (var j = this.numBars; j < newNumBars; j ++) {\n\t\t\tthis.staveList[j].setTickables([]);\n\t\t\tthis.staveList[j].usable = true;\n\t\t}\n\t\tthis.redraw();\n\t} else if (newNumBars < this.numBars) {\n\t\tvar tickables = [];\n\t\tvar durationOfRest = this.timeSignature.split('/')[1] + 'r';\n\t\tfor (var i = 0; i < parseInt(this.timeSignature.split('/')[0]); i++) {\n\t\t\ttickables.push(new Vex.Flow.StaveNote({clef: \"treble\", keys: [\"b/4\"], duration: durationOfRest }));\n\t\t}\n\t\t// loop through to fill up the empty bars with rest\n\t\tfor (var j = newNumBars; j < this.staveList.length; j ++) {\n\t\t\tthis.staveList[j].setTickables(tickables);\n\t\t\tthis.staveList[j].usable = false;\n\t\t}\n\t\tthis.redraw();\n\t} else {\n\t\t// do nothing cuz no change\n\t}\n\n\tthis.numBars = newNumBars;\n};\n\nVex.UI.Handler.prototype.setTimeSignature = function(timeSignature) {\n\tfor(var i = 0; i < this.staveList.length; i++){\n\t\tif ((i + 1) % 2 == 1) \n\t\t\tthis.staveList[i].setTimeSignature(timeSignature);\n\t}\n\tthis.timeSignature = timeSignature;\n\tthis.redraw();\n};\n\nVex.UI.Handler.prototype.highlightNote = function(idx) {\n\tconsole.log(\"called with\", idx)\n\tif (idx == 0) {\n\t\tthis.staveList[0].getTickables()[0].setHighlight(true);\n\t\tthis.redraw();\n\t} else {\n\t\tvar currStave = 0;\n\t\tvar currNumNotes = this.staveList[currStave].getTickables().length;\n\t\twhile (idx > currNumNotes) {\n\t\t\tidx -= currNumNotes;\n\t\t\tcurrStave ++;\n\t\t\tcurrNumNotes = this.staveList[currStave].getTickables().length;\n\t\t}\n\t\tif (currNumNotes > idx)\n\t\t\tthis.staveList[currStave].getTickables()[idx].setHighlight(true);\n\t\t\tthis.redraw();\n\t}\n};\n\n// Vex.UI.Handler.prototype.disableEdit = function() {\n// \tfor (var i = 0; i < this.staveList.length; i++) {\n// \t\tthis.staveList[i].usable = false;\n// \t}\n// };\n\n// Vex.UI.Handler.prototype.enableEdit = function() {\n// \tfor (var i = 0; i < this.staveList.length; i++) {\n// \t\tthis.staveList[i].usable = true;\n// \t}\n// };\n\n\n// NoteMenu until line 755 ===============================================================================================================\n\nVex.UI.NoteMenu = function (handler, canvas, ctx) {\n\tthis.handler = handler;\n\tthis.canvas = canvas;\n\tthis.ctx = ctx;\n\tthis.note=null;\n\tthis.keyIndex = null;\n\tthis.panelProps = null;\n\tthis.buttons = [];\n\tthis.accidentals = ['doubleFlat', 'flat', 'natural', 'sharp', 'doubleSharp'];\n\tthis.canRender = false;\n\tthis.currentButton = null;\n\tthis.buttonRenderer = new Vex.UI.NoteMenuButtonRenderer();\n};\n\nVex.UI.NoteMenu.prototype.init = function() {\n  // nothing to do atm\n}\n\nVex.UI.NoteMenu.prototype.setTipArea = function() {\n\tvar leftPadding = 5;\n\tvar rightPadding = 5;\n\tvar bottomPadding = 5;\n\tvar fontSize = 10;//in pixels\n\t\n\t\n\t//Getting the dimensions of the bounding box\n\tvar _x = this.panelProps.x + leftPadding; //5 pixels right of the beginning of the panel\n\tvar _y = this.panelProps.bottomY - bottomPadding - fontSize; //15 pixels before the end of the panel (vertically)\n\tvar _width = this.panelProps.width - leftPadding - rightPadding;\n\tvar _height = fontSize - bottomPadding;\n\t\n\tthis.handler.tipRenderer.boundingBox = {x: _x, y: _y, width: _width, height: _height};\n\tthis.handler.tipRenderer.backgroundColor = this.panelProps.backgroundColor;\n};\n\nVex.UI.NoteMenu.prototype.open = function(mousePos){\n\t\n\tthis.panelProps = this.drawMenuPanel(mousePos);\n\tthis.buttonRenderer.panel = this.panelProps;\n\tthis.buttonRenderer.context = this.ctx;\n\n\tif(this.buttonRenderer.ready){\n\t\tthis.drawButtons();\n\t\tthis.canvas.addEventListener('mouseup', this, false);\n\t\tthis.canvas.addEventListener('mousemove', this, false);\n\t\tthis.canvas.addEventListener('contextmenu', this, false);\n\t\tthis.setTipArea();\t\n\t}\n\n};\n\nVex.UI.NoteMenu.prototype.close = function(){\n\tthis.buttons = [];\n\tthis.currentButton = null;\n\tthis.canvas.removeEventListener('mouseup', this, false);\n\tthis.canvas.removeEventListener('mousemove', this, false);\n\tthis.canvas.removeEventListener('contextmenu', this, false);\n\t//Notify the handler that the panel was closed, so that the usual behavior can resume\n\tthis.handler.noteMenuClosed();\n};\n\nVex.UI.NoteMenu.prototype.handleEvent = function(evt){\n\tevt.preventDefault();\n\tswitch(evt.type) {\n\t\tcase \"mouseup\":\n\t\t\tthis.handleMouseClick(evt);\n\t\t\tbreak;\n\t\tcase \"mousemove\":\n\t\t\tthis.handleMouseMove(evt);\n\t\t\tbreak;\n\t}\n};\n\nVex.UI.NoteMenu.prototype.setNote = function(note){\n\tthis.note=note;\n};\n\nVex.UI.NoteMenu.prototype.setKeyIndex = function(index){\n\tthis.keyIndex=index;\n};\n\n\n/**\n * Draws the panel that will hold the buttons for modifying the note key.\n * @param mousePos\n * @returns a properties object of the panel.\n */\nVex.UI.NoteMenu.prototype.drawMenuPanel = function(mousePos) {\n\tvar canvas = this.canvas;\n\tvar panelWidth = 200;\n\tvar panelHeight = 100;\n\tvar panelX = mousePos.x + 30; // 30 - chosen offset\n\tvar panelY = mousePos.y;\n\tvar panelPosition = 'right'; //relative to the key\n\t\n\t//Check if the panel fits in X Axis\n\tif((panelX + panelWidth) * Vex.UI.scale > canvas.width){\n\t\t//Reposition panel X to fit canvas - repositioning it to be 30 pixels left from key\n\t\tpanelX = mousePos.x - panelWidth - 30; //30 - chosen offset\n\t\t\n\t\tpanelPosition = 'left';\n\t}\n\t\n\t// console.log(\"pannelY\", panelY);\n\t// console.log(\"canvas height\", canvas.height);\n\t//Check if the panel fits in Y Axis\n\tif((panelY + panelHeight) * Vex.UI.scale > canvas.height){\n\t\t//Reposition panel Y to fit canvas\n\t\tpanelY = (canvas.height / Vex.UI.scale) - panelHeight - 10; //10 - chosen offset\n\t}\n\t\n\t//Draw the Panel.\n\tvar context = this.ctx;\n\n    context.beginPath();\n    context.rect(panelX, panelY, panelWidth, panelHeight);\n    context.fillStyle = '#ddc';\n    context.fill();\n    context.lineWidth = 3;\n    context.strokeStyle = 'black';\n    context.stroke();\n    \n    \n    //Draw a line to link the panel to the key\n    context.beginPath();\n    context.moveTo(mousePos.x, mousePos.y);\n    if(panelPosition == 'right')\n    \tcontext.lineTo(panelX, panelY);\n    else\n    \tcontext.lineTo(panelX + panelWidth, panelY);\n    context.stroke();\n    \n    return {\n    \twidth: panelWidth,\n    \theight: panelHeight,\n    \tx: panelX,\n    \ty: panelY,\n    \trightX: panelX + panelWidth,\n    \tbottomY: panelY + panelHeight,\n    \tbackgroundColor: '#ddc',\n    \tposition: panelPosition\n    };\n};\n\n\nVex.UI.NoteMenu.prototype.drawButtons = function(){\n\t\n\t//Close button\n\tthis.buttons.push(this.buttonRenderer.closeButton());\n\t\n\t//Accidentals buttons\n\tfor(var i = 0; i < this.accidentals.length; i++){\n\t\tthis.buttons.push(this.buttonRenderer.accidentalButton(i));\n\t}\n\t\n\t//Dot button\n\tthis.buttons.push(this.buttonRenderer.dotButton());\n\t\n\t//Beam button\n\tthis.buttons.push(this.buttonRenderer.beamButton());\n\n\t//Tie button\n\t//this.buttons.push(this.buttonRenderer.tieButton());\n\t\n\t//Delete button\n\tthis.buttons.push(this.buttonRenderer.deleteButton());\n};\n\nVex.UI.NoteMenu.prototype.handleMouseClick = function(evt){\n\tif(evt.button == 0){//Left Button\n\t\t//get mouse position\n\t\tvar mousePos = getMousePositionInCanvas(this.canvas, evt);\n\t\t\n\t\t//if clicked in one of the buttons, then call the action for that button\n\t\tfor(var i = 0; i<this.buttons.length; i++){\n\t\t\tvar button = this.buttons[i];\n\t\t\tif(isCursorWithinRectangle(button.props.x, button.props.y, button.props.width, button.props.height, mousePos.x, mousePos.y)){\n\t\t\t\t//call button action.\n\n\t\t\t\tbutton.callAction(this);\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\t\t\n\t}\n};\n\nVex.UI.NoteMenu.prototype.handleMouseMove = function(evt){\n\t//get mouse position\n\tvar mousePos = getMousePositionInCanvas(this.canvas, evt);\n\t\n\tfor(var i = 0; i<this.buttons.length; i++){\n\t\tvar button =  this.buttons[i];\n\t\t\n\t\tif(isCursorWithinRectangle(button.props.x, button.props.y, button.props.width, button.props.height, mousePos.x, mousePos.y)){\n\t\t\t//cursor is in this button\n\t\t\t//check if already current button\n\t\t\tif(this.currentButton == null || this.currentButton != button){\n\t\t\t\t\n\t\t\t\t//It isnt! change the current button to normal, and highlight the new button\n\t\t\t\t\n\t\t\t\tif(this.currentButton !=null)\n\t\t\t\t\tthis.currentButton.highlight(this.canvas, null, this.currentButton);\n\t\t\t\t\n\t\t\t\t//Highlight new button\n\t\t\t\t\n\t\t\t\tthis.currentButton = button;\n\t\t\t\t//highlight the button\n\t\t\t\tthis.currentButton.highlight(this.canvas, 'yellow', this.currentButton);\n\t\t\t\tthis.handler.tipRenderer.showTip(this.currentButton.props.tip);\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\tbreak;\n\t\t\t\t\n\t\t} else {\n\t\t\t//it isnt in this button, make sure it isnt highlighted\n\t\t\tbutton.highlight(this.canvas, null, button);\n\t\t}\n\t\t\n\t}\n\n};\n\nVex.UI.NoteMenu.prototype.addDoubleFlat = function(){\n\tthis.handler.addAccidentalToNote(\"bb\", this.note, this.keyIndex);\n\tthis.close();\n};\n\nVex.UI.NoteMenu.prototype.addFlat = function(){\n\tthis.handler.addAccidentalToNote(\"b\", this.note, this.keyIndex);\n\tthis.close();\n};\n\nVex.UI.NoteMenu.prototype.addNatural = function(){\n\tthis.handler.addAccidentalToNote(\"n\", this.note, this.keyIndex);\n\tthis.close();\n};\n\nVex.UI.NoteMenu.prototype.addSharp = function(){\n\tthis.handler.addAccidentalToNote(\"#\", this.note, this.keyIndex);\n\tthis.close();\n};\n\nVex.UI.NoteMenu.prototype.addDoubleSharp = function(){\n\tthis.handler.addAccidentalToNote(\"##\", this.note, this.keyIndex);\n\tthis.close();\n};\n\nVex.UI.NoteMenu.prototype.addDot = function(){\n\tconsole.log('got here')\n\tthis.handler.addDotToNote(this.note);\n\tthis.close();\n};\n\n\nVex.UI.NoteMenu.prototype.addBeam = function(){\n\tthis.handler.beamWithNextNote(this.note);\n\tthis.close();\n};\n\n\nVex.UI.NoteMenu.prototype.deleteNote = function(){\n\tthis.handler.deleteNote(this.note);\n\tthis.close();\n}\n\n// MouseListener until line 1027 ==========================================================================================================\n\n/*\n * Vex.UI.MouseListener: this class is responsible for handling all mouse events performed by the user within the canvas\n */\n\nVex.UI.MouseListener = function(handler, canvas, staveList) {\n\tthis.handler = handler;\n\tthis.canvas = canvas;\n\tthis.staveList = staveList;\n};\n\n\nVex.UI.MouseListener.prototype.handleEvent = function(evt){\n\tevt.preventDefault();\n\tswitch(evt.type) {\n\t\tcase \"mouseup\":\n\t\t\tthis.handleMouseClick(evt);\n\t\t\tbreak;\n\t\tcase \"mousemove\":\n\t\t\tthis.handleMouseOver(evt);\n\t\t\tbreak;\n\t\tcase \"wheel\":\n\t\t\tthis.handleMouseWheel(evt);\n\t\t\tbreak;\n\t\tcase \"contextmenu\":\n\t\t\tthis.handleRightMouseClick(evt);\n\t\t\tbreak;\n\t\tcase \"mouseleave\":\n\t\t\tthis.handleMouseLeave(evt);\n\t\t\tbreak;\n\t}\n};\n\nVex.UI.MouseListener.prototype.startListening = function(){\n\tthis.canvas.addEventListener('mouseup', this, false);\n\tthis.canvas.addEventListener('mousemove', this, false);\n\tthis.canvas.addEventListener('wheel', this, false);\n\tthis.canvas.addEventListener('contextmenu', this, false);\n\tthis.canvas.addEventListener(\"mouseleave\", this, false);\n};\n\nVex.UI.MouseListener.prototype.stopListening = function(){\n\tthis.canvas.removeEventListener('mouseup', this, false);\n\tthis.canvas.removeEventListener('mousemove', this, false);\n\tthis.canvas.removeEventListener('wheel', this, false);\n\tthis.canvas.removeEventListener('contextmenu', this, false);\n\tthis.canvas.removeEventListener(\"mouseleave\", this, false);\n};\n\nVex.UI.MouseListener.prototype.handleMouseLeave = function(evt){\n\t// console.log(\"in mouseleave\")\n\t// if(this.handler.currentNote != null){\n\t// \tconsole.log(this.handler.currentNote);\n\t// \tvar idx = this.currentStave.getTickables().indexOf(this.handler.currentNote);\n\t// \tthis.handler.currentStave.getTickables()[idx].setHighlight(false);\n\t// }\n\tthis.handler.redraw();\n}\n\nVex.UI.MouseListener.prototype.handleMouseOver = function(evt){\n\tvar mousePos = getMousePositionInCanvas(this.canvas, evt);\n\tvar temp = findWhichStaveMouseOver(this.staveList, mousePos);\n\t// if (this.handler.currentStave)\n\t// \tconsole.log(\"current stave idx\", this.staveList.indexOf(this.handler.currentStave));\n\t// if (temp)\n\t// \tconsole.log(\"next stave idx\", this.staveList.indexOf(temp));\n\tif (temp && this.handler.currentStave && temp != this.handler.currentStave) {\n\t\tthis.handler.redraw();\n\t}\n\tthis.handler.currentStave = temp;\n\tthis.handler.currentNote = findWhichNoteMouseOver(this.handler.currentStave, mousePos);\n\tthis.handler.updateProvisoryKey(mousePos);\n\t//change color of currentNote\n\tif(this.handler.currentNote != null){\n\t\tthis.handler.currentNote.setHighlight(true);\n\t\tthis.handler.redraw();\n\t}\n    \n\t//Private function\n\tfunction findWhichStaveMouseOver(staveList, mousePos){\n\t\tfor(var i = 0; i < staveList.length; i++){\n\t\t\tvar box = staveList[i].getBoundingBox();\n\t\t\tif(isCursorWithinRectangle(box.getX(), box.getY(), box.getW(), box.getH(), mousePos.x, mousePos.y) && staveList[i].usable)\n\t\t\t\treturn staveList[i];\n\t\t}\n\t\treturn null;\n\t}\n\t\n\t//Private function\n\tfunction findWhichNoteMouseOver(currentStave, mousePos){\n\t\tvar noteList = [];\n\t\tif(currentStave != null)\n\t\t\tnoteList = currentStave.getTickables();\n\t\t\n\t\tfor(var i = 0; i < noteList.length; i++){\n\t\t\tif (noteList[i] instanceof Vex.Flow.StaveNote) {\n\t\t\t\t//return to default color. Unnecessary if currentNote does not change color\n\t\t\t\tif(noteList[i].setHighlight !== undefined)\n\t\t\t\t\tnoteList[i].setHighlight(false);\n\t\t\t\tvar noteBox = noteList[i].getBoundingBox();\n\t\t\t\tvar staveBox = currentStave.getBoundingBox();\n\t\t\t\t//Use the Notes X and the Stave's Y for the bounding box \n\t\t\t\tif(isCursorWithinRectangle(noteBox.getX(), staveBox.getY(), noteBox.getW(), staveBox.getH(), mousePos.x, mousePos.y))\n\t\t\t\t\treturn noteList[i];\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n};\n\n\nVex.UI.MouseListener.prototype.handleMouseClick = function(evt){\n\tswitch (evt.button) {\n    case 0:\n        this.handleLeftMouseClick(evt);\n        break;\n    case 1:\n    \tthis.handleMiddleMouseClick(evt);\n        break;\n    case 2:\n    \t  //this.handleRightMouseClick(evt);\n        break;\n    default:\n        alert('You have a strange Mouse!');\n\t}\n\t\n\t\n};\n\nVex.UI.MouseListener.prototype.handleMouseWheel = function(evt){\n\tvar delta = Math.max(-1, Math.min(1, (evt.wheelDelta || evt.deltaY)));\n\tif(this.handler.currentNote!=null){\n\t\tvar dur = this.handler.currentNote.duration;\n\t\tvar isAlias = Vex.Flow.durationAliases[dur] !== undefined;\n\t\tif (isAlias){\n\t\t\tdur = Vex.Flow.durationAliases[dur];\n\t\t}\n\t\tif (delta>0)dur*=2;\n\t\telse dur/=2;\n\t\t\n\t\tif (dur<1) dur = 1;\n\t\tdur = \"\" + dur; //to string\n\t\tvar newNote = this.handler.currentNote.clone({duration: dur});\n\t\t\n\t\tthis.handler.currentStave.replaceTickable(this.handler.currentNote,newNote);\n\t\tthis.handler.currentNote = newNote;\n\t\tthis.handler.currentNote.setHighlight(true);\n\t\tthis.handler.redraw();\n\t} else if(this.handler.provisoryTickable!=null){\n\t\tif(this.handler.provisoryTickable instanceof Vex.Flow.StaveNote){\n\t\t\tvar dur = this.handler.provisoryTickable.duration;\n\t\t\tvar isAlias = Vex.Flow.durationAliases[dur] !== undefined;\n\t\t\tif (isAlias){\n\t\t\t\tdur = Vex.Flow.durationAliases[dur];\n\t\t\t}\n\t\t\tif (delta>0)dur*=2;\n\t\t\telse dur/=2;\n\t\t\t\n\t\t\tif (dur<1) dur = 1;\n\t\t\tdur = \"\" + dur; //to string\n\t\t\t\n\t\t\tthis.handler.updateProvisoryDuration(dur);\n\t\t}else if(this.handler.provisoryTickable instanceof Vex.Flow.BarNote){\n\t\t\t//See Vex.Flow.Barline.type. Types go from 1 to 6 (7 is Barline.type.NONE).\n\t\t\tvar newType = ((this.handler.provisoryTickable.type + 5 + delta) % 6) + 1;\n\t\t\tthis.handler.provisoryTickable.setType(newType);\n\t\t\t\n\t\t\tthis.handler.drawProvisoryTickable();\n\t\t}else if(this.handler.provisoryTickable instanceof Vex.Flow.ClefNote){\n\t\t\tswitch(this.handler.provisoryTickable.clefKey){\n\t\t\t\tcase \"treble\":\n\t\t\t\t\t//Switch to bass\n\t\t\t\t\tthis.handler.provisoryTickable.clefKey = \"bass\";\n\t\t\t\t\tthis.handler.provisoryTickable.setClef(\"bass\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"bass\":\n\t\t\t\t\t//For now, switch back to treble. later, we will use other types of clefs\n\t\t\t\t\tthis.handler.provisoryTickable.clefKey = \"treble\";\n\t\t\t\t\tthis.handler.provisoryTickable.setClef(\"treble\");\n\t\t\t}\n\n\n\t\t\tthis.handler.drawProvisoryTickable();\n\t\t\t\n\t\t}\n\t}\n\t\t\n};\n\nVex.UI.MouseListener.prototype.handleLeftMouseClick = function(evt){\n\tif(this.handler.currentStave!=null && this.handler.currentStave.usable){\n\t\t//Find out the note representing the place clicked by the user\n\t\tvar mousePos = getMousePositionInCanvas(this.canvas, evt);\n\t\t\n\t\t//Clicking cases:\n\t\t//Case 1: clicked a stave, but not into a note bounding box\n\t\tif(this.handler.currentNote==null){\n\t\t\t//This case inserts a note into the current stave, based on which position the user clicked\n\t\t\t\n\t\t\tvar previousNote = getLastTickableBeforeXPosition(this.handler.currentStave, mousePos.x);\n\t\t\t//Find out the note immediately after the mouse X position\n\t\t\tvar nextNote = getFirstTickableAfterXPosition(this.handler.currentStave, mousePos.x);\n\t\t\t\n\t\t\t//The provisory Note is now added in the stave list\n\t\t\tvar newNote = this.handler.provisoryTickable.clone();\n\t\t\t//Add the note into the stave\n\t\t\tthis.handler.currentStave.insertTickableBetween(newNote, previousNote, nextNote);\n\t\t\t\n\t\t\t//Redraw the stave\n\t\t\tthis.handler.redraw(true);\n\t\t\t\n\t\t} else{\n\t\t\t//Case 2: clicked direclty into a note\n\t\t\tvar clickedKeyName = NoteMap.getNoteName(this.handler.currentStave, mousePos);\n\t\t\t\n\t\t\tvar keyIndex = this.handler.currentNote.indexOfKey(clickedKeyName);\n\t\t\t\n\t\t\tif(keyIndex == -1){\n\t\t\t\t//Case 2.1: Clicked a Key the Current note doesn't have\n\t\t\t\t\n\t\t\t\t//We should modify the current note to add new Key\n\t\t\t\tvar newKeys = this.handler.currentNote.keys;\n\t\t\t\tnewKeys.push(clickedKeyName);\n\t\t\t\tvar oldNote = this.handler.currentNote;\n\t\t\t\tvar newNote = oldNote.clone({ keys: newKeys});\n\t\t\t\tthis.handler.currentStave.replaceTickable(oldNote, newNote);\n\t\t\t\tthis.handler.currentNote = newNote;\n\t\t\t\t//Redraw the stave\n\t\t\t\tthis.handler.redraw();\n\n\t\t\t}/*else{\n\t\t\t\t//no actions to be done here, since we passed the menu to the right click \n\t\t\t\t//Case 2.2: Clicked a Key the current note already has\n\n\t\t\t}*/\n\t\t}\n\t\t\n\t\t\n\t}\n};\n\nVex.UI.MouseListener.prototype.handleMiddleMouseClick = function(evt){\n\t//Middle mouse button is responsible for changing the provisory Tickable type\n\tvar tickable = this.handler.provisoryTickable;\n\tvar newType = null;\n\t\n\tif(tickable instanceof Vex.Flow.StaveNote){\n\t\tif(tickable.noteType == \"n\")\n\t\t\tnewType = Vex.UI.TickableType.REST;\n\t\telse\n\t\t\tnewType = Vex.UI.TickableType.BAR;\n\t} else if (tickable instanceof Vex.Flow.BarNote)\n\t\tnewType = Vex.UI.TickableType.NOTE;\n\t\n\tthis.handler.updateProvisoryType(newType);\n};\n\n\nVex.UI.MouseListener.prototype.handleRightMouseClick = function(evt){\n\tif(this.handler.currentStave!=null){\n\t\t//Find out the note representing the place clicked by the user\n\t\tif(this.handler.currentNote!=null){\n\t\t\tvar mousePos = getMousePositionInCanvas(this.canvas, evt);\n\t\t\tvar clickedKeyName = NoteMap.getNoteName(this.handler.currentStave, mousePos);\n\t\t\t\t\n\t\t\t//We should render a toolbox for modifying current key.\n\t\t\tthis.handler.openMenuForKey(clickedKeyName, mousePos);\n\t\t}\n\t}\n};\n\n// VexflowExtension until line 1551 =============================================================================================================\n/*\n * New attibutes and methods to be used by the UI classes.\n */\n\n/*\n * Vex.Flow.Stave extensions \n */\n\nVex.Flow.Stave.prototype.tickables = [];\n\nVex.Flow.Stave.prototype.beams = [];\n\nVex.Flow.Stave.prototype.usable = true;\n\nVex.Flow.Stave.prototype.setTickables = function(tickables) {\n\tthis.tickables = tickables;\n};\n\nVex.Flow.Stave.prototype.getTickables = function() {\n\treturn this.tickables;\n};\n\nVex.Flow.Stave.prototype.getNotes = function() {\n\tvar notes = [];\n\t\n\tfor ( var i = 0; i < this.tickables.length; i++) {\n\t\tvar tickable = this.tickables[i];\n\t\tif(tickable instanceof Vex.Flow.StaveNote)\n\t\t\tnotes.push(tickable);\n\t}\n\treturn notes;\n};\n\nVex.Flow.Stave.prototype.insertTickableBetween = function(newTickable, previousTickable, nextTickable) {\n\n\tif(newTickable instanceof Vex.Flow.ClefNote){\n\t\t//If the stave has no clef modifiers, then add it. \n\t\tif(this.getClefModifierIndex() < 0){\n\t\t\tthis.addClef(newTickable.clefKey);\n\t\t\treturn;\n\t\t}\n\t\t//If the stave already has a clef, but the user clicked before any other tickable, then replace the stave clef\n\t\telse if(previousTickable == null){\n\t\t\tthis.replaceClef(newTickable.clefKey);\n\t\t\treturn;\n\t\t}\n\t\t//Else add it as a normal ClefNote as long as the stave already has notes, so leave otherwise\n\t\telse if(this.getNotes().length == 0)\n\t\t\treturn;\n\t\t\t\n\t\t\t\n\t} else if(newTickable instanceof Vex.Flow.BarNote){\n\t\t//If the BarNote is to be inserted after everything, then modify the end bar of the stave\n\t\tif(nextTickable == null){\n\t\t\tthis.setEndBarType(newTickable.type);\n\t\t\treturn;\n\t\t}\n\t\t//Else add it as a normal BarNote as long as the stave already has notes, so leave otherwise\n\t\telse if(this.getNotes().length == 0)\n\t\t\treturn;\n\t}\n\n\t// if (previousTickable) {\n\t// \tif (previousTickable.getModifiers('annotations')[0].text == \"L\") \n\t// \t\tnewTickable.addModifier(0, new Vex.Flow.Annotation('R'));\n\t// \telse \n\t// \t\tnewTickable.addModifier(0, new Vex.Flow.Annotation('L'));\n\t// } else {\n\t// \tif (nextTickable) {\n\t// \t\tif (nextTickable.getModifiers('annotations')[0].text == \"L\") \n\t// \t\t\tnewTickable.addModifier(0, new Vex.Flow.Annotation('R'));\n\t// \t\telse \n\t// \t\t\tnewTickable.addModifier(0, new Vex.Flow.Annotation('L'));\n\t// \t} else {\n\t// \t\t\tnewTickable.addModifier(0, new Vex.Flow.Annotation('L'));\n\t// \t}\n\t// }\n\n\tif (nextTickable==null) {\n\t\t\tthis.pushTickable(newTickable);\n\t} else {\n\t\tvar referenceIndex = this.tickables.indexOf(nextTickable);\n\t\tthis.tickables.splice(referenceIndex, 0, newTickable);\t\n\t}\n};\n\nVex.Flow.Stave.prototype.getClefModifierIndex = function(){\n\t//Remove all clefs currently in the stave\n\tfor(var i = 0; i < this.modifiers.length; i++){\n\t\tvar modifier = this.modifiers[i];\n\n\t\tif(modifier instanceof Vex.Flow.Clef)\n\t\t\treturn i;\n\n\t}\n\treturn -1;\n\n}\n\nVex.Flow.Stave.prototype.replaceClef = function(clef){\n\tvar start_X= this.start_x ;\n\tthis.clef = clef;\n\tvar modifier = new Vex.Flow.Clef(clef);\n\tthis.modifiers.splice(this.getClefModifierIndex(), 1);\n\tthis.glyphs = [];\n\tthis.addClef(clef);\n\n\tthis.start_x = start_X;\n}\n\nVex.Flow.Stave.prototype.getPreviousTickable = function(referenceTickable){\n\tvar referenceIndex = this.tickables.indexOf(referenceTickable);\n\tif (referenceIndex == 0) return null;\n\treturn this.tickables[referenceIndex-1];\n};\n\nVex.Flow.Stave.prototype.getNextTickable = function(referenceTickable){\n\tvar referenceIndex = this.tickables.indexOf(referenceTickable);\n\tif (referenceIndex == this.tickables.length - 1) return null;\n\treturn this.tickables[referenceIndex+1];\n};\n\nVex.Flow.Stave.prototype.getNextNote = function(referenceNote){\n\tvar referenceIndex = this.tickables.indexOf(referenceNote);\n\twhile(referenceIndex < this.tickables.length){\n\t\treferenceIndex++;\n\t\tif(this.tickables[referenceIndex] instanceof Vex.Flow.StaveNote)\n\t\t\treturn this.tickables[referenceIndex];\n\t}\n\t\t\n\treturn null;\n};\n\nVex.Flow.Stave.prototype.replaceTickable = function(oldTickable,newTickable){\n\t//Replacing note in beam.\n\tif(oldTickable.beam!=null){\n\t\tvar beam = oldTickable.beam;\n\t\tvar referenceIndex = beam.tickables.indexOf(oldTickable);\n\t\tbeam.notes[referenceIndex]=newTickable;\n\t}\n\t\n\tvar referenceIndex = this.tickables.indexOf(oldTickable);\n\tthis.tickables[referenceIndex]=newTickable;\n};\n\nVex.Flow.Stave.prototype.removeTickable = function(tickable){\n\tthis.tickables.splice(this.tickables.indexOf(tickable), 1);\n}\n\nVex.Flow.Stave.prototype.pushTickable = function(newTickable){\n\tthis.tickables.push(newTickable);\n};\n\nVex.Flow.Stave.prototype.beams = [];\n\nVex.Flow.Stave.prototype.setBeams = function(beamList) {\n\tthis.beams = beamList;\n};\n\nVex.Flow.Stave.prototype.getBeams = function() {\n\treturn this.beams;\n};\n\n\nVex.Flow.Stave.prototype.pushBeam = function(newBeam){\n\tthis.beams.push(newBeam);\n};\n\n\n/*\n * Vex.Flow.StaveNote extensions\n */\n/**\n * @param keyName The name of the Key\n * @returns the index of the key in the Note, or -1 if it doesn't contain the key\n */\nVex.Flow.StaveNote.prototype.indexOfKey = function(keyName){\n\treturn this.keys.indexOf(keyName);\n};\n\nVex.Flow.StaveNote.prototype.letter = \"R\";\n\n\nVex.Flow.StaveNote.prototype.getPlayEvents = function(playInfo){\n\t//Prepare the notes to be sent\n\tvar notes = [];\n\t\n\tfor(var i = 0; i < this.keys.length; i++){\n\t\tnotes.push(MIDI.keyToNote[this.keys[i].replace('/','')]);\n\t}\n\n\t//Set clef offset for notes\n\tfor (var i = 0; i < notes.length; i++) {\n\t\tnotes[i] += Vex.UI.ClefOffsets[playInfo.clef];\n\t};\n\n\tvar keyPressTime = playInfo.defaultTime / this.duration;\n\n\t//Set the modifiers for this note (update note value)\n\tfor (var i = 0; i < this.modifiers.length; i++) {\n\t\tvar modifier = this.modifiers[i];\n\t\tif(modifier instanceof Vex.Flow.Accidental){\n\t\t\tvar modValue;\n\n\t\t\tswitch(modifier.type){\n\t\t\t\tcase \"bb\":\n\t\t\t\tmodValue = -2;\n\t\t\t\tbreak;\n\t\t\t\tcase \"b\":\n\t\t\t\tmodValue = -1;\n\t\t\t\tbreak;\n\t\t\t\tcase \"n\":\n\t\t\t\tmodValue = 0;\n\t\t\t\tbreak;\n\t\t\t\tcase \"#\":\n\t\t\t\tmodValue = 1;\n\t\t\t\tbreak;\n\t\t\t\tcase \"##\":\n\t\t\t\tmodValue = 2;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tnotes[modifier.index] += modValue;\n\t\t}else if(modifier instanceof Vex.Flow.Dot){\n\t\t\tkeyPressTime *= 1.5;\n\t\t}\n\t\t\n\n\t};\n\n\t//\tvelocity is set as 127\n\t\n\t\n\t\n\tvar events = [];\n\t\n\n\tevents.push({\n\t\ttype: 'channel',\n\t\tchannel: 0,\n\t\tsubtype: notes.length==1?'noteOn':'chordOn',\n\t\tnoteNumber: notes.length==1?notes[0]:notes,\n\t\tvelocity: 127,\n\t\tqueuedTime: playInfo.delay,\n\t\tnote: this\n\t});\n\tevents.push({\n\t\ttype: 'channel',\n\t\tchannel: 0,\n\t\tsubtype: notes.length==1?'noteOff':'chordOff',\n\t\tnoteNumber: notes.length==1?notes[0]:notes,\n\t\tqueuedTime: playInfo.delay + keyPressTime,\n\t\tnote: this\n\t});\n\n\t\n\t//increment the delay \n\tplayInfo.delay = playInfo.delay + keyPressTime;\n\t\n\treturn events;\n};\n\n\n//TODO Clone Ties\nVex.Flow.StaveNote.prototype.clone = function(newProps){\n\tvar currentProps = {\n\t\t\tkeys: this.keys,\n\t\t\tstem_direction: this.getStemDirection(),\n\t\t\tduration: this.duration,\n\t\t\tnoteType: this.noteType\n\t} ;\n\t\n\t\n\tvar mergedProps = mergeProperties(currentProps, newProps);\n\tmergedProps.duration = mergedProps.duration + mergedProps.noteType;\n\t\n\tvar newNote = new Vex.Flow.StaveNote(mergedProps);\n\t\n\t//Setting the style as the same style as the note head\n\tnewNote.setStyle(this.note_heads[0].style);\n\t \n\t\n\t\n\tif(this.modifierContext!=null && this.getDots()!=null)\n\t\tnewNote.addDotToAll();\n\t\n\tnewNote.beam = this.beam;\n\t\n\t//Clone modifiers\n\tfor (var i = 0; i < this.modifiers.length; i++) {\n\t\tif(this.modifiers[0] instanceof Vex.Flow.Accidental){\n\t\t\tnewNote.addAccidental(this.modifiers[i].index, new Vex.Flow.Accidental(this.modifiers[i].type));\n\t\t}\n\t\t\n\t};\n\n\treturn newNote;\n};\n\nVex.Flow.StaveNote.prototype.setHighlight = function(highlight){\n\tif(highlight)\n\t\tthis.setStyle(Vex.UI.highlightNoteStyle);\n\telse\n\t\tthis.setStyle(Vex.UI.defaultNoteStyle);\n};\n\n/**\n * Return new note, from actions:\n * \"UP\"\t\t=> up on stave\n * \"DOWN\"\t=> down on stave\n * \"SHARP\"\t=> add sharp\n * @param action\n * @returns\n */\nVex.Flow.StaveNote.prototype.change = function(action){\n\tvar newKeys = new Array();\n\t//for each key\n\tfor (var k in this.keys){\n\t\tvar splitted = this.keys[k].split(\"/\");\n\t\tsplitted[0] = splitted[0].toUpperCase();\n\t\t//first char is the note\n\t\tvar note = splitted[0].substring(0,1);\n\t\tvar accidentals = splitted[0].substring(1);\n\t\tvar octave = parseInt(splitted[1]);\n\t\t\n\t\t//search index of key in NoteMap.noteMap\n\t\tvar index = 0;\n\t\tfor (var x in NoteMap.noteMap){\n\t\t\tif (NoteMap.noteMap[x] == note){\n\t\t\t\tindex = x;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\t//do the ACTION\n\t\tif (action == \"UP\") //increment key\n\t\t\tindex++; \n\t\telse if (action == \"DOWN\") //descrease key\n\t\t\tindex--;\n\t\telse if (action == \"SHARP\"){\n\t\t//TODO add other cases\n\t\t\tswitch (accidentals){\n\t\t\t\tcase \"\":\n\t\t\t\tcase null:\n\t\t\t\tcase undefined:\n\t\t\t\t\taccidentals = \"#\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"#\":\n\t\t\t\t\taccidentals = \"##\";\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\talert(accidentals);\n\t\t}\n\t\t//octave changes\n\t\tif (index == NoteMap.noteMap.length){\n\t\t\tindex = 0;\n\t\t\toctave++;\n\t\t}else if (index < 0){\n\t\t\tindex = NoteMap.noteMap.length-1;\n\t\t\toctave--;\n\t\t}\n\t\t//push new key\n\t\tnote = NoteMap.noteMap[index];\n\t\tnewKeys.push(note + accidentals+\"/\"+octave);\n\t}\n\tvar dur = this.duration;\n\tvar type = this.noteType;\n\tif (action == \"PAUSE\"){\n\t\tif (type == \"n\") type = \"r\";\n\t\telse if (type == \"r\") type = \"n\";\n\t\tdur = Vex.Flow.parseNoteDurationString(this.duration);\n\t\tvar dots = \"\";\n\t\tfor (var i=0; i < dur.dots; i++) dots+=\"d\";\n\t\tdur = dur.duration + dots + type;\n\t}\n\t//create new note with new parameters\n\treturn this.clone({keys: newKeys, duration:dur });\n};\n\n/*\n * Override the original draw flag to fix the color being drawed\n */\nVex.Flow.StaveNote.prototype.drawFlag = function(){\n\tif (!this.context) throw new Vex.RERR(\"NoCanvasContext\",\n\t\"Can't draw without a canvas context.\");\n\t//console.log('drawflag called')\n\tvar ctx = this.context;\n\tvar glyph = this.getGlyph();\n\tvar render_flag = this.beam === null;\n\tvar bounds = this.getNoteHeadBounds();\n\n\tvar x_begin = this.getNoteHeadBeginX();\n\tvar x_end = this.getNoteHeadEndX();\n\n\tif (glyph.flag && render_flag) {\n\t\tvar note_stem_height = this.stem.getHeight();\n\t\tvar flag_x, flag_y, flag_code;\n\n\t\tif (this.getStemDirection() === Vex.Flow.Stem.DOWN) {\n\t\t\t// Down stems have flags on the left.\n\t\t\tflag_x = x_begin;\n\t\t\tflag_y = bounds.y_top - note_stem_height;\n\t\t\tflag_code = glyph.code_flag_downstem;\n\n\t\t} else {\n\t\t\t// Up stems have flags on the left.\n\t\t\tflag_x = x_end;\n\t\t\tflag_y = bounds.y_bottom - note_stem_height;\n\t\t\tflag_code = glyph.code_flag_upstem;\n\t\t}\n\n\t\t//NOTE: The 2 lines below were added to the original code\n\t\tvar ctxFillStyle = ctx.fillStyle; \n\t\tctx.fillStyle = this.note_heads[0].style.fillStyle;\n\t\t\n\t\t// Draw the Flag\n\t\tctx.openGroup('flag', null, { pointerBBox: true });\n\t\tthis.applyStyle(ctx, this.getFlagStyle() || false);\n\t\tthis.flag.render(ctx, flag_x, flag_y);\n\t\tthis.restoreStyle(ctx, this.getFlagStyle() || false);\n\t\tctx.closeGroup();\n\n\t\t//NOTE: The 2 lines below were added to the original code\n\t\t//Reverting style\n\t\tctx.fillStyle = ctxFillStyle;\n\t}\n};\n\t\n\n/*\n * Vex.Flow.Dot extensions\n */\n\n/*\n * Overriding the Draw method so that the dot stops going up at every draw call\n */\nVex.Flow.Dot.prototype.draw= function() {\n    if (!this.context) throw new Vex.RERR(\"NoContext\",\n      \"Can't draw dot without a context.\");\n    if (!(this.note && (this.index != null))) throw new Vex.RERR(\"NoAttachedNote\",\n      \"Can't draw dot without a note and index.\");\n\n    var line_space = this.note.stave.options.spacing_between_lines_px;\n\n    var start = this.note.getModifierStartXY(this.position, this.index);\n\n    // Set the starting y coordinate to the base of the stem for TabNotes\n    if (this.note.getCategory() === 'tabnotes') {\n      start.y = this.note.getStemExtents().baseY;\n    }\n\n    var dot_x = (start.x + this.x_shift) + this.width - this.radius;\n    //This next commented line is the original Draw\n    //var dot_y = start.y + this.y_shift + (this.dot_shiftY * line_space);\n    //This next line is the modified Draw\n    var dot_y = start.y + this.y_shift;\n    var ctx = this.context;\n\n    ctx.beginPath();\n    ctx.arc(dot_x, dot_y, this.radius, 0, Math.PI * 2, false);\n    ctx.fill();\n};\n\n/*\n * Barnote Extensions\n */\nVex.Flow.BarNote.prototype.clone = function(){\n\tvar newBarNote = new Vex.Flow.BarNote();\n\tnewBarNote.setType(this.getType());\n\tnewBarNote.setStave(this.getStave());\n\tnewBarNote.setTickContext(this.getTickContext());\n\treturn newBarNote;\n};\n\nVex.Flow.BarNote.prototype.getPlayEvents = function(playInfo, currentEvents){\n\tvar newEvents = [];\n\n\tfunction markBeginRepeatIndex(){\n\t\t//mark current index as repeating point\n\t\tplayInfo.beginRepeatIndex = currentEvents.length + newEvents.length;\n\t}\n\n\tfunction addRepeatEvents(){\n\t\t//Add all events since repeat index\n\t\tfor(var i = playInfo.beginRepeatIndex || 0; i < currentEvents.length; i++){\n\t\t\tnewEvents.push(currentEvents[i]);\n\t\t}\n\t}\n\n\tswitch(this.type){\n\t\tcase Vex.Flow.Barline.type.REPEAT_BEGIN:\t\t\n\t\t\tmarkBeginRepeatIndex();\n\t\tbreak;\n\t\tcase Vex.Flow.Barline.type.REPEAT_END:\n\t\t\taddRepeatEvents();\n\t\tbreak;\n\t\tcase Vex.Flow.Barline.type.REPEAT_BOTH:\n\t\t\taddRepeatEvents();\n\t\t\tmarkBeginRepeatIndex();\n\t\tbreak;\n\t}\n\n\treturn newEvents;\n}\n\n/*\n * ClefNote Extensions\n */\n\nVex.Flow.ClefNote.prototype.clone = function (){\n\tvar newClef = new Vex.Flow.ClefNote(this.clefKey);\n\tnewClef.clefKey = this.clefKey;\n\tnewClef.setTickContext(new Vex.Flow.TickContext());\n\tnewClef.getTickContext().setX(this.getTickContext().getX());\n\treturn newClef;\n};\n\n\nVex.Flow.ClefNote.prototype.getPlayEvents = function (playInfo){\n\t//update current clef\n\tplayInfo.clef = this.clefKey;\n\treturn [];\n};\n\n// Util until line 1670 =====================================================================================================================\n\nfunction getRandomInt(max) {\n  return Math.floor(Math.random() * Math.floor(max));\n}\n\nfunction getStyle(el,styleProp)\n{\n\tvar y = null;\n\tvar x = document.getElementById(el);\n\tif (x.currentStyle)\n\t\ty = x.currentStyle[styleProp];\n\telse if (window.getComputedStyle)\n\t\ty = document.defaultView.getComputedStyle(x,null).getPropertyValue(styleProp);\n\treturn y;\n};\n\nfunction getMousePositionInCanvas(canvas, evt) {\n\t//pegando apenas os valores de border e padding (eliminando coisas como cor e caracteres de pixel 'px'\n\tvar border = getStyle(canvas.id, 'border-left-width');\n\tvar borderValue = border!=null?border.substring(0, border.indexOf(border.match(/\\D/))):0;\n\tvar padding = getStyle(canvas.id, 'padding-left');\n\tvar paddingValue = padding!=null?padding.substring(0, padding.indexOf(padding.match(/\\D/))):0;\n\tvar rect = canvas.getBoundingClientRect();\n\treturn {\n\t\tx: (evt.clientX - rect.left - borderValue - paddingValue) / Vex.UI.scale,\n\t\ty: (evt.clientY - rect.top - borderValue - paddingValue) / Vex.UI.scale,\n\t};\n};\n\nfunction getAbsoluteMousePositionInCanvas(canvas, evt) {\n\t//pegando apenas os valores de border e padding (eliminando coisas como cor e caracteres de pixel 'px'\n\tvar border = getStyle(canvas.id, 'border-left-width');\n\tvar borderValue = border!=null?border.substring(0, border.indexOf(border.match(/\\D/))):0;\n\tvar padding = getStyle(canvas.id, 'padding-left');\n\tvar paddingValue = padding!=null?padding.substring(0, padding.indexOf(padding.match(/\\D/))):0;\n\tvar rect = canvas.getBoundingClientRect();\n\treturn {\n\t\tx: (evt.clientX - rect.left - borderValue - paddingValue),\n\t\ty: (evt.clientY - rect.top - borderValue - paddingValue),\n\t};\n};\n\n\nfunction isCursorWithinRectangle(x, y, width, height, mouseX, mouseY) {\n    if(mouseX > x && mouseX < x + width && mouseY > y && mouseY < y + height) {\n        return true;\n    }\n    return false;\n};\n\nfunction getFirstTickableAfterXPosition(stave, x){\n\tvar note = null;\n\t\n\tfor(var i = 0;  i<stave.getTickables().length; i++ ){\n\t\tif(x < stave.getTickables()[i].getAbsoluteX())\n\t\t\tnote = stave.getTickables()[i];\n\t\tif(note!=null)\n\t\t\tbreak;\n\t}\n\t\n\treturn note;\n};\n\nfunction getLastTickableBeforeXPosition(stave, x){\n\tvar note = null;\n\t\n\tfor(var i = stave.getTickables().length - 1;  i>=0; i-- ){\n\t\tif(x > stave.getTickables()[i].getAbsoluteX())\n\t\t\tnote = stave.getTickables()[i];\n\t\tif(note!=null)\n\t\t\tbreak;\n\t}\n\t\n\treturn note;\n};\n\n/**\n * \n * @param obj1 The first object\n * @param obj2 The second object\n * @returns A new object representing the merged objects. If both objects passed as param have the same prop, then obj2 property is returned.\n */\nfunction mergeProperties(obj1,obj2){\n\tvar obj3 = {};\n    for (var attrname in obj1) { obj3[attrname] = obj1[attrname]; }\n    for (var attrname in obj2) { obj3[attrname] = obj2[attrname]; }\n    return obj3;\n}\n\nfunction getStemDirection(stave, y){\n\tvar reference = stave.getYForLine(2);\n\t\n\tif(y<reference)\n\t\treturn Vex.Flow.StaveNote.STEM_DOWN;\n\telse\n\t\treturn Vex.Flow.StaveNote.STEM_UP;\n};\n\n// Notemap until line 1717 ====================================================================================================\nVex.UI.NoteMap = function(){\n\tthis.noteMap = ['C', 'D', 'E', 'F', 'G', 'A', 'B'];\n};\n\nVex.UI.NoteMap.prototype.getNoteName = function(stave, mousePos){\n\t//Step 1: get mouse position relative to the stave\n\tvar relativeMouseY = mousePos.y - stave.getBoundingBox().getY();\n\t\n\t//Step 2: get in which space within the staves the user clicked\n\t//using half the space between lines because we can click between a line (each line can hold 2 notes)\n\tvar noteArea = Math.round(relativeMouseY / (stave.options.spacing_between_lines_px/2));\n\t\n\t//Step 3: use the map to get the note Name\n\treturn this.toNoteName(noteArea, stave);\n};\n\nVex.UI.NoteMap.prototype.toNoteName = function(noteArea, stave){\n\tvar baseNote = this.getBaseNote(stave);\n\tvar baseNoteValue = this.noteMap.indexOf(baseNote.note);\n\t\n\tvar desiredNoteValue = (baseNoteValue - noteArea) % 7;\n\t//make it a positive value\n\twhile (desiredNoteValue < 0) desiredNoteValue+=7;\n\t\n\tvar desiredNoteOctave = baseNote.octave - (Math.floor(noteArea / 7));\n\t\n\tif( (desiredNoteValue == 5 || desiredNoteValue == 6))\n\t\tdesiredNoteOctave--;\n\t\n\treturn this.noteMap[desiredNoteValue] + '/' + desiredNoteOctave;\n};\n\n/**\n  * For now, it seems the easiest way to map notes is to consider them as always in the treble clef.\n  * For playing purposes, we are using Vex.UI.ClefOffsets to find out the correct note.\n  */\nVex.UI.NoteMap.prototype.getBaseNote = function(stave){\n\t\n\treturn {note:'G', octave: 6}; // represents 4 lines above the treble clef\n\t\n};\n\n\n//Init the variable, so that it can be used globally\nvar NoteMap = new Vex.UI.NoteMap();\n\n// TipRenderer until line 1780==========================================================================================================\n/**\n * Class responsible for rendering tips in the canvas.\n */\n\nVex.UI.TipRenderer = function(canvas){\n\tthis.canvas = canvas;\n\tthis.color = null;\n\tthis.fontSize = null;\n\tthis.fontName = null;\n\tthis.style = null;\n\tthis.context = null;\n\tthis.lineWidth = null;\n\tthis.textAlign = null;\n\tthis.textBaseline = null;\n\tthis.boundingBox= null;\n\tthis.showingTip = null;\n\tthis.backgroundColor = null;\n};\n\nVex.UI.TipRenderer.prototype.init = function(){\n\tthis.textAlign='left';\n\tthis.textBaseline = 'middle';\n\tthis.color = 'black';\n\tthis.fontName = 'Calibri';\n\tthis.lineWidth = 1;\n\tthis.style = 'normal';\n\tthis.fontSize = 10;\n\tthis.boundingBox = {x:0,y:0,width:200,height:20};\n\tthis.context = this.canvas.getContext('2d');\n\tthis.showingTip = false;\n\tthis.backgroundColor = 'white';\n};\n\n\nVex.UI.TipRenderer.prototype.showTip = function(tip){\n\t\n\tif(this.showingTip)\n\t\tthis.hideTip();\n\t\n\tvar font = this.style + ' ' + this.fontSize + 'pt ' + this.fontName;\n\t\n\tthis.context.font = font;\n\tthis.context.fillStyle = this.color;\n\tthis.context.textAlign = this.textAlign;\n\tthis.context.lineWidth = this.lineWidth;\n\tthis.context.textBaseline = this.textBaseline;\n\tthis.context.fillText(tip, this.boundingBox.x, this.boundingBox.y);\n\tthis.showingTip=true;\n};\n\n\n//TOOD needed to add this absolute (-5 and +10) values to be able to fully erase the written tip. FIX!\nVex.UI.TipRenderer.prototype.hideTip = function(){\n\t\n\tthis.context.beginPath();\n\tthis.context.rect(this.boundingBox.x, this.boundingBox.y - 5, this.boundingBox.width, this.boundingBox.height + 10);\n\tthis.context.fillStyle = this.backgroundColor;\n\tthis.context.fill();\n\t\n\tthis.showingTip = false;\n};\n\n//NoteMenuButtonRenderer until line 2091 =========================================================================================\nVex.UI.NoteMenuButtonRenderer = function (panel, context){\n\tthis.ready = false;\n\tvar renderer = this;\n\t//Load Resources\n\tthis.menuButtonsImg = new Image();\n\tthis.menuButtonsImg.src = 'https://cdn.jsdelivr.net/gh/R-D-D-D/Ground-Zero/web_frontend/src/resources/noteMenuButtons.gif';\n\tthis.menuButtonsImg.onload = function(){renderer.ready=true};\n};\n\nVex.UI.NoteMenuButtonRenderer.prototype.closeButton = function (){\n\tvar panelProps = this.panel;\n\tvar context = this.context;\n\t\n\t\n\tvar offset = 5; //offset between panel boundaries and button boundaries\n\tvar drawingOffset = 4; //offset between button boundaries and the X for the close\n\tvar buttonWidth = 15;\n\tvar buttonX = panelProps.rightX - buttonWidth - offset; \n\tvar buttonY = panelProps.y + offset; \n\t\n\t//Button Panel\n\t context.beginPath();\n\t context.rect(buttonX, buttonY, buttonWidth, buttonWidth);\n\t context.fillStyle = 'red';\n\t context.fill();\n\t \n\t //Button Content (the X)\n\t context.beginPath();\n\t context.lineWidth = 3;\n\t //Part 1: the \\\n\t context.moveTo(buttonX + drawingOffset, buttonY + drawingOffset);\n\t context.lineTo(buttonX + buttonWidth - drawingOffset, buttonY + buttonWidth - drawingOffset);\n\t //Part 2: the /\n\t context.moveTo(buttonX + drawingOffset, buttonY + buttonWidth - drawingOffset);\n\t context.lineTo(buttonX + buttonWidth - drawingOffset, buttonY + drawingOffset);\n\t context.strokeStyle = 'white';\n\t context.stroke();\n\n\t //context.strokeStyle = 'black'\n\t \n\t return new Vex.UI.Button({\n\t\t backgroundColor: 'red',\n\t\t width: buttonWidth,\n\t\t height: buttonWidth,\n\t\t x: buttonX,\n\t\t y: buttonY,\n\t\t rightX: buttonX + buttonWidth,\n\t\t bottomY: buttonY + buttonWidth,\n\t\t name: 'closeButton',\n\t\t action: 'close',\n\t\t tip: 'Close the menu'\n\t });\n};\n\nVex.UI.NoteMenuButtonRenderer.prototype.closeButton = function (){\n\tvar panelProps = this.panel;\n\tvar context = this.context;\n\t\n\t\n\tvar offset = 5; //offset between panel boundaries and button boundaries\n\tvar drawingOffset = 4; //offset between button boundaries and the X for the close\n\tvar buttonWidth = 15;\n\tvar buttonX = panelProps.rightX - buttonWidth - offset; \n\tvar buttonY = panelProps.y + offset; \n\t\n\t//Button Panel\n\t context.beginPath();\n\t context.rect(buttonX, buttonY, buttonWidth, buttonWidth);\n\t context.fillStyle = 'red';\n\t context.fill();\n\t \n\t //Button Content (the X)\n\t context.beginPath();\n\t context.lineWidth = 3;\n\t //Part 1: the \\\n\t context.moveTo(buttonX + drawingOffset, buttonY + drawingOffset);\n\t context.lineTo(buttonX + buttonWidth - drawingOffset, buttonY + buttonWidth - drawingOffset);\n\t //Part 2: the /\n\t context.moveTo(buttonX + drawingOffset, buttonY + buttonWidth - drawingOffset);\n\t context.lineTo(buttonX + buttonWidth - drawingOffset, buttonY + drawingOffset);\n\t context.strokeStyle = 'white';\n\t context.stroke();\n\t \n\t return new Vex.UI.Button({\n\t\t backgroundColor: 'red',\n\t\t width: buttonWidth,\n\t\t height: buttonWidth,\n\t\t x: buttonX,\n\t\t y: buttonY,\n\t\t rightX: buttonX + buttonWidth,\n\t\t bottomY: buttonY + buttonWidth,\n\t\t name: 'closeButton',\n\t\t action: 'close',\n\t\t tip: 'Close the menu'\n\t });\n};\n\nVex.UI.NoteMenuButtonRenderer.prototype.accidentalButton = function (index) {\n\tvar panelProps = this.panel;\n\tvar context = this.context;\n\tvar imageObj = this.menuButtonsImg;\n\t\n\t//Position of each accidental:\n\tvar positions = [400,100,200,0,300];\n\t//Actions of each Accidental\n\tvar actions = ['addDoubleFlat', 'addFlat', 'addNatural', 'addSharp', 'addDoubleSharp'];\n\tvar tips = ['Add double flat to key', 'Add flat to key', 'Add natural to key', 'Add sharp to key', 'Add double sharp to key'];\n\n\tvar initialOffsetX = 10; //offset between 1st button and paenl\n\tvar offSetX = 5; // offset between buttons\n\tvar offSetY = 10;\n\n\t//Source Specs\n\tvar sourceX = positions[index];\n\tvar sourceY = 0;\n\tvar sourceWidth = 100;\n\tvar sourceHeight = 100;\n\n\t//Destination Specs\n\tvar destWidth = 25;\n\tvar destHeight = destWidth;\n\n\tvar destX = panelProps.x + initialOffsetX + index * (offSetX + destWidth);\n\n\tvar destY = panelProps.y + offSetY;\n\n\tcontext.drawImage(imageObj, sourceX, sourceY, sourceWidth, sourceHeight, destX, destY, destWidth, destHeight);\n\n\treturn new Vex.UI.Button({\n\t\tbackgroundColor: 'white',\n\t\tx: destX,\n\t\ty: destY,\n\t\trightX: destX + destWidth,\n\t\tbottomY: destY + destHeight,\n\t\twidth: destWidth,\n\t\theight: destHeight,\n\t\taction: actions[index],\n\t\ttip: tips[index]\n\t});\n};\n\nVex.UI.NoteMenuButtonRenderer.prototype.dotButton = function(){\n\tvar panelProps = this.panel;\n\tvar context = this.context;\n\tvar imageObj = this.menuButtonsImg;\n\t\n\t//Position of each dot button in the sprite:\n\tvar position = 700;\n\n\tvar initialOffsetX = 10; //offset between 1st button and paenl\n\t//var offSetX = 5; // offset between buttons\n\tvar offSetY = 10;\n\n\t//Source Specs\n\tvar sourceX = position;\n\tvar sourceY = 0;\n\tvar sourceWidth = 100;\n\tvar sourceHeight = 100;\n\n\t//Destination Specs\n\tvar destWidth = 25;\n\tvar destHeight = destWidth;\n\n\tvar destX = panelProps.x + initialOffsetX;\n\n\t// 2 * offSetY + destHeight=> because its the 2nd row of buttons\n\tvar destY = panelProps.y + (2 * offSetY) + destHeight;\n\n\tcontext.drawImage(imageObj, sourceX, sourceY, sourceWidth, sourceHeight, destX, destY, destWidth, destHeight);\n\n\treturn new Vex.UI.Button({\n\t\tbackgroundColor: 'white',\n\t\tx: destX,\n\t\ty: destY,\n\t\trightX: destX + destWidth,\n\t\tbottomY: destY + destHeight,\n\t\twidth: destWidth,\n\t\theight: destHeight,\n\t\taction: 'addDot',\n\t\ttip: 'Add dot to key'\n\t});\n};\n\nVex.UI.NoteMenuButtonRenderer.prototype.beamButton = function (){\n\tvar panelProps = this.panel;\n\tvar context = this.context;\n\tvar imageObj = this.menuButtonsImg;\n\t\n\t//Position of each dot button in the sprite:\n\tvar position = 500;\n\n\tvar initialOffsetX = 10; //offset between 1st button and paenl\n\tvar offSetX = 5; // offset between buttons\n\tvar offSetY = 10;\n\n\t//Source Specs\n\tvar sourceX = position;\n\tvar sourceY = 0;\n\tvar sourceWidth = 100;\n\tvar sourceHeight = 100;\n\n\t//Destination Specs\n\tvar destWidth = 25;\n\tvar destHeight = destWidth;\n\t\n\t//1 * (offSetX + destWidth) because its the 2nd button in the row.\n\tvar destX = panelProps.x + initialOffsetX + (offSetX + destWidth);\n\n\t// 2 * offSetY + destHeight=> because its the 2nd row of buttons\n\tvar destY = panelProps.y + (2 * offSetY) + destHeight;\n\n\tcontext.drawImage(imageObj, sourceX, sourceY, sourceWidth, sourceHeight, destX, destY, destWidth, destHeight);\n\n\treturn new Vex.UI.Button({\n\t\tbackgroundColor: 'white',\n\t\tx: destX,\n\t\ty: destY,\n\t\trightX: destX + destWidth,\n\t\tbottomY: destY + destHeight,\n\t\twidth: destWidth,\n\t\theight: destHeight,\n\t\taction: 'addBeam',\n\t\ttip: 'Beam with next note'\n\t});\n};\n\nVex.UI.NoteMenuButtonRenderer.prototype.deleteButton = function(){\n\tvar panelProps = this.panel;\n\tvar context = this.context;\n\tvar imageObj = this.menuButtonsImg;\n\t\n\t//Position of each dot button in the sprite:\n\tvar position = 800;\n\n\tvar initialOffsetX = 10; //offset between 1st button and paenl\n\tvar offSetX = 5; // offset between buttons\n\tvar offSetY = 10;\n\n\t//Source Specs\n\tvar sourceX = position;\n\tvar sourceY = 0;\n\tvar sourceWidth = 100;\n\tvar sourceHeight = 100;\n\n\t//Destination Specs\n\tvar destWidth = 25;\n\tvar destHeight = destWidth;\n\t\n\t//1 * (offSetX + destWidth) because its the 4nd button in the row.\n\tvar destX = panelProps.x + initialOffsetX + 3*(offSetX + destWidth);\n\n\t// 2 * offSetY + destHeight=> because its the 2nd row of buttons\n\tvar destY = panelProps.y + (2 * offSetY) + destHeight;\n\n\tcontext.drawImage(imageObj, sourceX, sourceY, sourceWidth, sourceHeight, destX, destY, destWidth, destHeight);\n\n\treturn new Vex.UI.Button({\n\t\tbackgroundColor: 'white',\n\t\tx: destX,\n\t\ty: destY,\n\t\trightX: destX + destWidth,\n\t\tbottomY: destY + destHeight,\n\t\twidth: destWidth,\n\t\theight: destHeight,\n\t\taction: 'deleteNote',\n\t\ttip: 'Remove key'\n\t});\n};\n\nVex.UI.NoteMenuButtonRenderer.prototype.tieButton = function(){\n\tvar panelProps = this.panel;\n\tvar context = this.context;\n\tvar imageObj = this.menuButtonsImg;\n\t\n\t//Position of each dot button in the sprite:\n\tvar position = 600;\n\n\tvar initialOffsetX = 10; //offset between 1st button and paenl\n\tvar offSetX = 5; // offset between buttons\n\tvar offSetY = 10;\n\n\t//Source Specs\n\tvar sourceX = position;\n\tvar sourceY = 0;\n\tvar sourceWidth = 100;\n\tvar sourceHeight = 100;\n\n\t//Destination Specs\n\tvar destWidth = 25;\n\tvar destHeight = destWidth;\n\t\n\t//1 * (offSetX + destWidth) because its the 3nd button in the row.\n\tvar destX = panelProps.x + initialOffsetX + 2*(offSetX + destWidth);\n\n\t// 2 * offSetY + destHeight=> because its the 2nd row of buttons\n\tvar destY = panelProps.y + (2 * offSetY) + destHeight;\n\n\tcontext.drawImage(imageObj, sourceX, sourceY, sourceWidth, sourceHeight, destX, destY, destWidth, destHeight);\n\n\treturn new Vex.UI.Button({\n\t\tbackgroundColor: 'white',\n\t\tx: destX,\n\t\ty: destY,\n\t\trightX: destX + destWidth,\n\t\tbottomY: destY + destHeight,\n\t\twidth: destWidth,\n\t\theight: destHeight,\n\t\taction: 'addTie',\n\t\ttip: 'Tie with next note'\n\t});\n};\n\n// Button ==================================================================================================================\n/**\n * Class representing a button.\n */\n\nVex.UI.Button = function(props){\n\tthis.props = props;\n};\n\n\nVex.UI.Button.prototype.highlight = function (canvas, color, button){\n\t\t//If color == null remove highlight\n\t\tif(color==null)\n\t\t\tcolor = button.props.backgroundColor;\n\t\tvar lineWidth = 4;\n\t\tvar context = canvas.getContext('2d');\n\t\tcontext.beginPath();\n\t\tcontext.lineWidth = lineWidth;\n\t\tcontext.rect(button.props.x, button.props.y, button.props.width, button.props.height);\n\t\tcontext.strokeStyle = color;\n\t\tcontext.stroke();\n};\n\n//TODO Implement showTip\nVex.UI.Button.prototype.showTip = function () {\n\t\n};\n\nVex.UI.Button.prototype.callAction = function (object) {\n\tobject[this.props.action]();\n};\n\nVex.UI.TickableType = {\n\tNOTE : \"note\",\n\tREST : \"rest\",\n\tBAR : \"bar\",\n\tCLEF : \"clef\"\n};\n\nexport default Vex.UI","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',{attrs:{\"id\":\"app\"}},[_c('page-header'),_c('v-main',[_c('v-container',{staticClass:\"pa-0\",attrs:{\"fluid\":\"\"}},[_c('router-view')],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"hello\"},[_c('h1',[_vm._v(\" \"+_vm._s(_vm.msg)+\" \")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"hello\">\n    <h1> {{ msg }} </h1>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'HelloWorld',\n  data () {\n    return {\n      msg: 'Welcome to Your Vue.js App'\n    }\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\nh1, h2 {\n  font-weight: normal;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HelloWorld.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HelloWorld.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HelloWorld.vue?vue&type=template&id=0f42bf65&scoped=true&\"\nimport script from \"./HelloWorld.vue?vue&type=script&lang=js&\"\nexport * from \"./HelloWorld.vue?vue&type=script&lang=js&\"\nimport style0 from \"./HelloWorld.vue?vue&type=style&index=0&id=0f42bf65&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0f42bf65\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"nav\"}},[_c('v-app-bar',{attrs:{\"dark\":\"\",\"color\":\"indigo\",\"app\":\"\"}},[_c('v-app-bar-nav-icon',{on:{\"click\":function($event){_vm.drawer = true}}}),_c('v-toolbar-title',[_vm._v(\"Rhythm Academy\")]),_c('v-spacer'),(!_vm.$store.state.isUserLoggedIn)?_c('v-toolbar-items',[_c('v-btn',{attrs:{\"depressed\":\"\",\"to\":\"/register\",\"color\":\"indigo\"}},[_vm._v(\"Register\")]),_c('v-btn',{attrs:{\"depressed\":\"\",\"to\":\"/login\",\"color\":\"indigo\"}},[_vm._v(\"Log In\")])],1):_vm._e(),(_vm.$store.state.isUserLoggedIn)?_c('v-toolbar-items',[(_vm.$store.state.user.isStudent)?_c('v-btn',{attrs:{\"depressed\":\"\",\"to\":\"/student\",\"color\":\"indigo\"}},[_vm._v(\"Lessons\")]):_vm._e(),(_vm.$store.state.user.isStudent)?_c('v-btn',{attrs:{\"depressed\":\"\",\"color\":\"indigo\"},on:{\"click\":_vm.browseAllTutors}},[_vm._v(\"All Tutors\")]):_vm._e(),_c('v-btn',{attrs:{\"depressed\":\"\",\"color\":\"indigo\"},on:{\"click\":_vm.logout}},[_vm._v(\"Log Out\")])],1):_vm._e()],1),_c('v-navigation-drawer',{attrs:{\"absolute\":\"\",\"temporary\":\"\"},model:{value:(_vm.drawer),callback:function ($$v) {_vm.drawer=$$v},expression:\"drawer\"}},[(_vm.$store.state.isUserLoggedIn)?_c('v-list',{attrs:{\"nav\":\"\",\"dense\":\"\"}},[_c('v-list-item-group',{attrs:{\"active-class\":\"text--accent-4\"}},[_c('v-list-item',{attrs:{\"to\":\"/home\"}},[_c('v-list-item-icon',[_c('v-icon',[_vm._v(\"mdi-home\")])],1),_c('v-list-item-title',[_vm._v(\"Home\")])],1),(_vm.$store.state.user.isStudent)?_c('v-list-item',{attrs:{\"to\":\"/student\"}},[_c('v-list-item-icon',[_c('v-icon',[_vm._v(\"mdi-playlist-music\")])],1),_c('v-list-item-title',[_vm._v(\"Lessons\")])],1):_vm._e(),(_vm.$store.state.user.isStudent)?_c('v-list-item',{on:{\"click\":_vm.browseAllTutors}},[_c('v-list-item-icon',[_c('v-icon',[_vm._v(\"mdi-account\")])],1),_c('v-list-item-title',[_vm._v(\"All Tutors\")])],1):_vm._e(),(_vm.$store.state.user.isTutor)?_c('v-list-item',{on:{\"click\":_vm.go_to_lessons}},[_c('v-list-item-icon',[_c('v-icon',[_vm._v(\"mdi-notebook-outline\")])],1),_c('v-list-item-title',[_vm._v(\"Lessons\")])],1):_vm._e(),(_vm.$store.state.isUserLoggedIn)?_c('v-list-item',{on:{\"click\":_vm.logout}},[_c('v-list-item-icon',[_c('v-icon',[_vm._v(\"mdi-logout\")])],1),_c('v-list-item-title',[_vm._v(\"Log Out\")])],1):_vm._e()],1)],1):_c('v-list',{attrs:{\"nav\":\"\",\"dense\":\"\"}},[_c('v-list-item-group',{attrs:{\"active-class\":\"text--accent-4\"}},[_c('v-list-item',{attrs:{\"to\":\"/home\"}},[_c('v-list-item-icon',[_c('v-icon',[_vm._v(\"mdi-home\")])],1),_c('v-list-item-title',[_vm._v(\"Home\")])],1),(!_vm.$store.state.isUserLoggedIn)?_c('v-list-item',{attrs:{\"to\":\"/register\"}},[_c('v-list-item-icon',[_c('v-icon',[_vm._v(\"mdi-account\")])],1),_c('v-list-item-title',[_vm._v(\"Register\")])],1):_vm._e(),(!_vm.$store.state.isUserLoggedIn)?_c('v-list-item',{attrs:{\"to\":\"/login\"}},[_c('v-list-item-icon',[_c('v-icon',[_vm._v(\"mdi-account\")])],1),_c('v-list-item-title',[_vm._v(\"Log In\")])],1):_vm._e()],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n  #nav\n    v-app-bar(\n      dark\n      color=\"indigo\"\n      app\n    )\n      v-app-bar-nav-icon(@click=\"drawer = true\")\n\n      v-toolbar-title Rhythm Academy\n\n      v-spacer\n\n      v-toolbar-items(v-if=\"!$store.state.isUserLoggedIn\")\n        v-btn(depressed to=\"/register\" color=\"indigo\") Register\n        v-btn(depressed to=\"/login\" color=\"indigo\") Log In\n      v-toolbar-items(v-if=\"$store.state.isUserLoggedIn\")\n        v-btn(depressed to=\"/student\" color=\"indigo\" v-if=\"$store.state.user.isStudent\") Lessons\n        v-btn(depressed @click=\"browseAllTutors\" color=\"indigo\" v-if=\"$store.state.user.isStudent\") All Tutors\n        v-btn(depressed @click=\"logout\" color=\"indigo\") Log Out\n    \n    v-navigation-drawer(v-model='drawer' absolute temporary)\n      v-list(nav dense v-if=\"$store.state.isUserLoggedIn\")\n        v-list-item-group(active-class=\"text--accent-4\" )\n          v-list-item(to=\"/home\")\n            v-list-item-icon\n              v-icon mdi-home\n            v-list-item-title Home\n          v-list-item(to=\"/student\" v-if=\"$store.state.user.isStudent\")\n            v-list-item-icon\n              v-icon mdi-playlist-music\n            v-list-item-title Lessons\n          v-list-item(@click=\"browseAllTutors\" v-if=\"$store.state.user.isStudent\")\n            v-list-item-icon\n              v-icon mdi-account\n            v-list-item-title All Tutors\n          v-list-item(@click=\"go_to_lessons\" v-if=\"$store.state.user.isTutor\")\n            v-list-item-icon\n              v-icon mdi-notebook-outline\n            v-list-item-title Lessons\n          v-list-item(v-if=\"$store.state.isUserLoggedIn\" @click=\"logout\")\n            v-list-item-icon\n              v-icon mdi-logout\n            v-list-item-title Log Out\n      v-list(nav dense v-else)\n        v-list-item-group(active-class=\"text--accent-4\")\n          v-list-item(to=\"/home\")\n            v-list-item-icon\n              v-icon mdi-home\n            v-list-item-title Home\n          v-list-item(to=\"/register\" v-if=\"!$store.state.isUserLoggedIn\")\n            v-list-item-icon\n              v-icon mdi-account\n            v-list-item-title Register\n          v-list-item(to=\"/login\" v-if=\"!$store.state.isUserLoggedIn\")\n            v-list-item-icon\n              v-icon mdi-account\n            v-list-item-title Log In\n</template>\n\n<script>\nexport default {\n  name: 'Header',\n  data () {\n    return {\n      drawer: false\n    }\n  },\n\n  methods: {\n    logout () {\n      this.$store.dispatch('setToken', null)\n      this.$store.dispatch('setUser', null)\n      this.$router.push('/')\n    },\n\n    async browseAllTutors () {\n      if (this.$store.state.allTutors.length == 0) {\n        await this.$store.dispatch('getAllTutors')\n      }\n      this.$router.push('/tutor/index')\n    },\n\n    go_to_lessons () {\n      this.$router.push(`/lesson/index/${this.$store.state.user.id}`)\n    }\n  }\n}\n</script>\n\n<style>\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Header.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Header.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Header.vue?vue&type=template&id=0166ed5a&lang=pug&\"\nimport script from \"./Header.vue?vue&type=script&lang=js&\"\nexport * from \"./Header.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAppBar } from 'vuetify/lib/components/VAppBar';\nimport { VAppBarNavIcon } from 'vuetify/lib/components/VAppBar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemGroup } from 'vuetify/lib/components/VList';\nimport { VListItemIcon } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VNavigationDrawer } from 'vuetify/lib/components/VNavigationDrawer';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VToolbarItems } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VAppBar,VAppBarNavIcon,VBtn,VIcon,VList,VListItem,VListItemGroup,VListItemIcon,VListItemTitle,VNavigationDrawer,VSpacer,VToolbarItems,VToolbarTitle})\n","<template lang=\"pug\">\n  v-app#app\n    page-header\n\n    v-main\n      v-container.pa-0(fluid)\n        router-view\n</template>\n\n<script>\nimport HelloWorld from \"./components/HelloWorld\";\nimport PageHeader from \"./components/Header\";\n\nexport default {\n  name: \"App\",\n\n  components: {\n    'helloworld': HelloWorld,\n    'page-header': PageHeader\n  },\n\n  data: () => ({\n    //\n  })\n};\n</script>\n\n<style>\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--11-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--11-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=7e299248&lang=pug&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VMain } from 'vuetify/lib/components/VMain';\ninstallComponents(component, {VApp,VContainer,VMain})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"register\"}},[_c('panel',{attrs:{\"title\":\"Register\"}},[_c('v-card-text',[_c('v-form',{ref:\"form\"},[_c('v-text-field',{attrs:{\"label\":\"Username\",\"name\":\"username\",\"prepend-icon\":\"mdi-account\",\"type\":\"text\",\"rules\":_vm.nameRules},model:{value:(_vm.username),callback:function ($$v) {_vm.username=$$v},expression:\"username\"}},[_c('v-text-field',{attrs:{\"label\":\"Email\",\"name\":\"email\",\"prepend-icon\":\"mdi-account\",\"type\":\"text\",\"rules\":_vm.emailRules},model:{value:(_vm.email),callback:function ($$v) {_vm.email=$$v},expression:\"email\"}}),_c('v-text-field',{attrs:{\"id\":\"password\",\"label\":\"Password\",\"name\":\"password\",\"prepend-icon\":\"mdi-lock\",\"type\":\"password\",\"rules\":_vm.passwordRules},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_c('v-radio-group',{attrs:{\"row\":\"\"},model:{value:(_vm.role),callback:function ($$v) {_vm.role=$$v},expression:\"role\"}},[_c('v-radio',{attrs:{\"label\":\"Student\",\"value\":\"Student\",\"color\":\"indigo\"}}),_c('v-radio',{attrs:{\"label\":\"Tutor\",\"value\":\"Tutor\",\"color\":\"indigo\"}})],1),_c('v-spacer'),_c('v-btn',{staticClass:\"mt-5\",attrs:{\"loading\":_vm.loading},on:{\"click\":_vm.register}},[_vm._v(\"Register\")]),_c('v-spacer')],1)],1)],1),_c('v-card-text',[_c('div',{staticClass:\"error\",domProps:{\"innerHTML\":_vm._s(_vm.error)}},[_vm._v(_vm._s(_vm.error))])])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import axios from 'axios'\n\nexport default () => {\n  return axios.create({\n    baseURL: process.env.NODE_ENV == 'production' ? '/api/' : 'http://localhost:8081/'\n  })\n}\n","import Api from '@/services/Api'\n\nexport default {\n  register (credentials) {\n    return Api().post('register', credentials)\n  },\n\n  login (credentials) {\n    return Api().post('login', credentials)\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"panel\"}},[_c('v-row',{attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"10\",\"md\":\"6\"}},[_c('v-card',{staticClass:\"elevation-12\"},[_c('v-toolbar',{attrs:{\"light\":\"\"}},[_c('v-toolbar-title',{staticClass:\"text-h4\"},[_vm._v(_vm._s(_vm.title))]),_c('v-spacer')],1),_vm._t(\"default\",[_vm._v(\"No slot defined\")])],2)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n  #panel\n    v-row(align='center' justify='center')\n      v-col(cols='12' sm='10' md='6')\n        v-card.elevation-12\n          v-toolbar(light)\n            v-toolbar-title.text-h4 {{ title }}\n            v-spacer\n          slot No slot defined\n</template>\n\n<script>\nexport default {\n  name: 'Panel',\n  props: ['title']\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Panel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Panel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Panel.vue?vue&type=template&id=035e563a&scoped=true&lang=pug&\"\nimport script from \"./Panel.vue?vue&type=script&lang=js&\"\nexport * from \"./Panel.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"035e563a\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VCard,VCol,VRow,VSpacer,VToolbar,VToolbarTitle})\n","<template lang=\"pug\">\n  #register\n    panel(title=\"Register\")\n      //- v-tooltip(bottom)\n      //-   template(v-slot:activator='{ on, attrs }')\n      //-     v-toolbar-title(dark v-bind='attrs' v-on='on') Login form\n      //-   span Log in\n      v-card-text\n        v-form(ref=\"form\")\n         v-text-field(\n            label='Username' \n            name='username' \n            prepend-icon='mdi-account' \n            type='text' \n            v-model='username' \n            :rules=\"nameRules\")\n          v-text-field(\n            label='Email' \n            name='email' \n            prepend-icon='mdi-account' \n            type='text' \n            v-model='email' \n            :rules=\"emailRules\")\n          v-text-field#password(\n            label='Password' \n            name='password' \n            prepend-icon='mdi-lock' \n            type='password' \n            v-model='password' \n            :rules=\"passwordRules\")\n          v-radio-group(v-model='role' row='')\n            v-radio(label='Student' value='Student' color=\"indigo\")\n            v-radio(label='Tutor' value='Tutor' color=\"indigo\")\n          v-spacer\n          v-btn.mt-5(@click=\"register\" :loading='loading') Register\n          v-spacer\n      v-card-text\n        .error(v-html=\"error\") {{ error }}\n</template>\n\n<script>\nimport AuthenticationService from '@/services/AuthenticationService'\nimport Panel from '@/components/Panel'\n\nexport default {\n  name: 'Register',\n  components: {\n    'panel': Panel\n  },\n  data () {\n    return {\n      username: '',\n      nameRules: [\n        v => !!v || 'Username is required',\n        v => new RegExp('^[a-zA-Z0-9]{1,32}$').test(v) || 'Name must be alphanumeric characters and of length 8 - 32'\n      ],\n      email: '',\n      emailRules: [\n        v => !!v || 'E-mail is required',\n        v => /.+@.+\\..+/.test(v) || 'E-mail must be valid'\n      ],\n      password: '',\n      passwordRules: [\n        v => !!v || 'Password is required',\n        v => new RegExp('^[a-zA-Z0-9]{8,32}$').test(v) || 'Password must be alphanumeric characters and of length 8 - 32',\n      ],\n      error: null,\n      loading: false,\n      role: ''\n    }\n  },\n  methods: {\n    async register () {\n      if (!this.$refs.form.validate())\n        return\n      this.error = ''\n      this.loading = true\n      try {\n        const response = await AuthenticationService.register({\n          username: this.username,\n          email: this.email,\n          password: this.password,\n          role: this.role\n        })\n        console.log(response.data)\n        this.loading = false\n        this.$store.dispatch('setToken', response.data.token)\n        this.$store.dispatch('setUser', response.data.user)\n        this.$router.push('/')\n      } catch (err) {\n        this.error = err.response.data.error\n        this.loading = false\n      }\n    }\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Register.vue?vue&type=template&id=05892ff6&scoped=true&lang=pug&\"\nimport script from \"./Register.vue?vue&type=script&lang=js&\"\nexport * from \"./Register.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"05892ff6\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VRadio } from 'vuetify/lib/components/VRadioGroup';\nimport { VRadioGroup } from 'vuetify/lib/components/VRadioGroup';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCardText,VForm,VRadio,VRadioGroup,VSpacer,VTextField})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"student\"}},[_c('panel',{attrs:{\"title\":\"Lessons By\"}},[_c('v-list',_vm._l((_vm.subscribedTutors),function(tutor){return _c('v-list-item',{key:tutor.id,on:{\"click\":function($event){return _vm.go_to_lessons($event, tutor)}}},[_c('v-list-item-content',[_c('v-list-item-title',{domProps:{\"textContent\":_vm._s(tutor.username)}})],1),_c('v-list-item-avatar',[_c('v-img',{attrs:{\"src\":_vm.avatar}})],1)],1)}),1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n  #student\n    panel(title=\"Lessons By\")\n      v-list\n        v-list-item(v-for='tutor in subscribedTutors' :key='tutor.id' @click='go_to_lessons($event, tutor)')\n          //- v-list-item-icon\n          //-   v-icon(v-if='rhythm.icon' color='pink') mdi-star\n          v-list-item-content\n            v-list-item-title(v-text='tutor.username')\n          v-list-item-avatar\n            v-img(:src='avatar')\n</template>\n\n<script>\nimport Panel from '@/components/Panel'\nimport { mapState } from 'vuex'\n\nexport default {\n  name: 'Student',\n  data () {\n    return {\n      avatar: 'https://cdn.vuetifyjs.com/images/lists/2.jpg'\n    }\n  },\n  components: {\n    'panel': Panel\n  },\n  computed: {\n    ...mapState(['user', 'subscribedTutors'])\n  },\n  methods: {\n    async go_to_lessons (event, tutor) {\n      if (tutor.lessons == null) {\n        await this.$store.dispatch('getLessonsForStudent', tutor)\n      }\n      this.$router.push(`/lesson/index/${tutor.id}`)\n    }\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Student.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Student.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Student.vue?vue&type=template&id=04f99ef2&scoped=true&lang=pug&\"\nimport script from \"./Student.vue?vue&type=script&lang=js&\"\nexport * from \"./Student.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"04f99ef2\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAvatar } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\ninstallComponents(component, {VImg,VList,VListItem,VListItemAvatar,VListItemContent,VListItemTitle})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"login\"}},[_c('panel',{attrs:{\"title\":\"Log In\"}},[_c('v-card-text',[_c('v-form',{ref:\"form\"},[_c('v-text-field',{attrs:{\"label\":\"Email\",\"name\":\"email\",\"prepend-icon\":\"mdi-account\",\"type\":\"text\",\"rules\":_vm.emailRules},model:{value:(_vm.email),callback:function ($$v) {_vm.email=$$v},expression:\"email\"}}),_c('v-text-field',{attrs:{\"id\":\"password\",\"label\":\"Password\",\"name\":\"password\",\"prepend-icon\":\"mdi-lock\",\"type\":\"password\",\"rules\":_vm.passwordRules},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_c('v-spacer'),_c('v-btn',{staticClass:\"mt-5\",attrs:{\"loading\":_vm.loading},on:{\"click\":_vm.login}},[_vm._v(\"Log In\")]),_c('v-spacer')],1)],1),_c('v-card-text',[_c('div',{staticClass:\"error\",domProps:{\"innerHTML\":_vm._s(_vm.error)}},[_vm._v(_vm._s(_vm.error))])])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n  //- div.register\n    //- h1 Register an account with us!\n    //- input(v-model=\"email\" name=\"email\" type=\"text\" placeholder=\"email\")\n    //- br\n    //- input(v-model=\"password\" name=\"password\" type=\"text\" placeholder=\"password\")\n    //- br\n    //- button(@click=\"register\") register\n    //- br\n    //- .error(v-html=\"error\") {{ error }}\n\n  #login\n    panel(title=\"Log In\")\n      //- v-tooltip(bottom)\n      //-   template(v-slot:activator='{ on, attrs }')\n      //-     v-toolbar-title(dark v-bind='attrs' v-on='on') Login form\n      //-   span Log in\n      v-card-text\n        v-form(ref=\"form\")\n          v-text-field(\n            label='Email' \n            name='email' \n            prepend-icon='mdi-account' \n            type='text' \n            v-model='email' \n            :rules=\"emailRules\")\n          v-text-field#password(\n            label='Password' \n            name='password' \n            prepend-icon='mdi-lock' \n            type='password' \n            v-model='password' \n            :rules=\"passwordRules\")\n          v-spacer\n          v-btn.mt-5(@click=\"login\" :loading='loading') Log In\n          v-spacer\n      v-card-text\n        .error(v-html=\"error\") {{ error }}\n</template>\n\n<script>\nimport AuthenticationService from '@/services/AuthenticationService'\nimport Panel from '@/components/Panel'\n\nexport default {\n  name: 'LogIn',\n  components: {\n    'panel': Panel\n  },\n  data () {\n    return {\n      email: '',\n      emailRules: [\n        v => !!v || 'E-mail is required',\n        v => /.+@.+\\..+/.test(v) || 'E-mail must be valid'\n      ],\n      password: '',\n      passwordRules: [\n        v => !!v || 'Password is required',\n      ],\n      error: null,\n      loading: false\n    }\n  },\n  methods: {\n    async login () {\n      if (!this.$refs.form.validate())\n        return\n      this.error = ''\n      this.loading = true\n      try {\n        const response = await AuthenticationService.login({\n          email: this.email,\n          password: this.password\n        })\n\n        this.loading = false\n        this.$store.dispatch('setToken', response.data.token)\n        this.$store.dispatch('setUser', response.data.user)\n        if (response.data.user.isStudent) {\n          this.$store.dispatch('getTutorsOfStudent', response.data.user.id)\n        } else {\n          this.$store.dispatch('getLessons', response.data.user.id)\n          //this.$store.dispatch('getStudentsOfTutor', response.data.user.id)\n        }\n        this.$router.push({\n          name: 'home'\n        })\n      } catch (err) {\n        this.error = err.response.data.error\n        this.loading = false\n      }\n    }\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LogIn.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LogIn.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LogIn.vue?vue&type=template&id=c6b74bc4&scoped=true&lang=pug&\"\nimport script from \"./LogIn.vue?vue&type=script&lang=js&\"\nexport * from \"./LogIn.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c6b74bc4\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCardText,VForm,VSpacer,VTextField})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"show-lesson\"},on:{\"click\":function($event){return _vm.disable_title_edit($event)}}},[_c('v-row',{attrs:{\"no-gutters\":\"\"}},[_c('v-col',{staticClass:\"p-0\",attrs:{\"cols\":\"9\",\"background-color\":\"grey lighten-3\"}},[_c('v-sheet',{attrs:{\"color\":\"grey lighten-4\",\"height\":_vm.height,\"dark\":\"\"}},[_c('div',{attrs:{\"id\":\"vexflow-wrapper\"},on:{\"click\":_vm.enable_save_btn}}),(!_vm.is_student)?_c('v-row',[_c('v-col',[_c('v-btn',{staticClass:\"mt-5\",attrs:{\"x-large\":\"\",\"light\":\"\",\"disabled\":_vm.disable,\"loading\":_vm.save_btn_loading},on:{\"click\":_vm.update_rhythms}},[_c('v-icon',{attrs:{\"left\":\"\",\"dark\":\"\"}},[_vm._v(\"mdi-content-save-all-outline\")]),_vm._v(\"Save Rhythm\")],1)],1)],1):_c('v-row',[_c('v-col',[_c('v-btn',{staticClass:\"mt-5\",attrs:{\"x-large\":\"\",\"light\":\"\",\"loading\":_vm.save_btn_loading},on:{\"click\":function($event){return _vm.$emit('play_sequence')}}},[_c('v-icon',{attrs:{\"left\":\"\",\"dark\":\"\"}},[_vm._v(\"mdi-play-outline\")]),_vm._v(\"Play Rhythm\")],1)],1)],1),_c('v-row',[_c('v-col',[_c('v-btn',{staticClass:\"mt-5 record\",attrs:{\"x-large\":\"\",\"light\":\"\"},on:{\"click\":function($event){}}},[_c('v-icon',{attrs:{\"left\":\"\",\"dark\":\"\",\"color\":\"red darken-3\"}},[_vm._v(\"mdi-circle-slice-8\")]),_vm._v(\"Record\")],1),_c('v-btn',{staticClass:\"mt-5 stop\",attrs:{\"x-large\":\"\",\"light\":\"\"}},[_c('v-icon',{attrs:{\"left\":\"\",\"dark\":\"\",\"color\":\"red darken-3\"}},[_vm._v(\"mdi-stop-circle-outline\")]),_vm._v(\"Stop\")],1)],1)],1)],1)],1),_c('v-col',{staticClass:\"p-0\",attrs:{\"cols\":\"3\"}},[_c('v-card',{staticClass:\"elevation-12 pa-0\",attrs:{\"height\":_vm.height}},[(_vm.lesson)?_c('v-toolbar',{attrs:{\"light\":\"\"}},[_c('v-toolbar-title',{staticClass:\"text-h4\"},[_vm._v(_vm._s(_vm.lesson.name))]),_c('v-spacer')],1):_vm._e(),_c('v-card-text',{staticClass:\"py-0\",class:{'rhythm-list-half': !_vm.is_student, 'rhythm-list-full': _vm.is_student}},[(_vm.lesson)?_c('v-list',_vm._l((_vm.lesson.rhythms),function(rhythm){return _c('v-list-item',{key:rhythm.id,attrs:{\"active\":\"\"},on:{\"click\":function($event){return _vm.display_rhythm($event, rhythm)},\"dblclick\":_vm.edit_rhythm_title}},[_c('v-list-item-icon',[(_vm.active_rhythm == rhythm)?_c('v-icon',{attrs:{\"color\":\"pink\"}},[_vm._v(\"mdi-star\")]):_c('v-icon',[_vm._v(\"mdi-star\")])],1),_c('v-list-item-content',[(!_vm.title_editable || rhythm != _vm.active_rhythm)?_c('v-list-item-title',{staticClass:\"text-left text-h5\",domProps:{\"textContent\":_vm._s(rhythm.title)}}):_c('v-text-field',{staticClass:\"py-0\",attrs:{\"id\":\"title_edit\",\"type\":\"text\",\"required\":\"\",\"rules\":_vm.nameRules},on:{\"input\":_vm.enable_save_btn},model:{value:(_vm.active_rhythm_title),callback:function ($$v) {_vm.active_rhythm_title=$$v},expression:\"active_rhythm_title\"}})],1),(!_vm.is_student)?_c('v-list-item-icon',[_c('v-btn',{staticClass:\"delete_btn\"},[_c('v-icon',{attrs:{\"color\":\"indigo\"},on:{\"click\":function($event){}}},[_vm._v(\"mdi-trash-can-outline\")])],1)],1):_vm._e()],1)}),1):_vm._e()],1),(!_vm.is_student)?_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{staticClass:\"mt-3\",attrs:{\"id\":\"add_btn\",\"outlined\":\"\",\"color\":\"indigo\"},on:{\"click\":_vm.open_dialogue}},[_c('v-icon',{attrs:{\"left\":\"\"}},[_vm._v(\"mdi-plus-thick\")]),_vm._v(\" Add Rhythm\")],1),_c('v-spacer')],1):_vm._e(),(!_vm.is_student)?_c('v-toolbar',{attrs:{\"light\":\"\",\"flat\":\"\"}},[_c('v-toolbar-title',[_vm._v(\"Current Rhythm\")]),_c('v-spacer')],1):_vm._e(),(!_vm.is_student)?_c('v-card-text',[_c('v-select',{staticClass:\"pt-0\",attrs:{\"items\":_vm.time_signatures,\"label\":\"Time Signature\"},on:{\"change\":function($event){return _vm.$emit('change_time_signature')},\"click\":_vm.enable_save_btn},model:{value:(_vm.time_signature),callback:function ($$v) {_vm.time_signature=$$v},expression:\"time_signature\"}}),_c('v-slider',{attrs:{\"min\":\"0\",\"max\":\"4\",\"label\":_vm.bars_label},on:{\"change\":function($event){return _vm.$emit('change_bars')},\"click\":_vm.enable_save_btn},model:{value:(_vm.no_bars),callback:function ($$v) {_vm.no_bars=$$v},expression:\"no_bars\"}}),_c('v-slider',{attrs:{\"min\":\"60\",\"max\":\"120\",\"label\":_vm.bpm_label},on:{\"click\":_vm.enable_save_btn},model:{value:(_vm.bpm),callback:function ($$v) {_vm.bpm=$$v},expression:\"bpm\"}})],1):_vm._e()],1)],1)],1),_c('v-row',{attrs:{\"justify\":\"center\"}},[_c('v-dialog',{attrs:{\"persistent\":\"\",\"max-width\":\"600px\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn undefined}}]),model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-card',[_c('v-card-title',[_c('span',{staticClass:\"headline\"},[_vm._v(\"Rhythm Details\")])]),_c('v-card-text',{staticClass:\"py-0\"},[_c('v-form',{ref:\"form\"},[_c('v-container',[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-text-field',{attrs:{\"type\":\"text\",\"label\":\"Rhythm name*\",\"required\":\"\",\"rules\":_vm.nameRules},model:{value:(_vm.active_rhythm_title),callback:function ($$v) {_vm.active_rhythm_title=$$v},expression:\"active_rhythm_title\"}})],1)],1)],1)],1)],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"text\":\"\"},on:{\"click\":function($event){_vm.dialog = false}}},[_vm._v(\"Close\")]),_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"text\":\"\",\"loading\":_vm.add_btn_loading},on:{\"click\":_vm.add_rhythm}},[_vm._v(\"Save\")])],1),(_vm.error)?_c('v-card-text',[_c('p',[_vm._v(_vm._s(_vm.error)+\" \")])]):_vm._e()],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"," /* eslint-disable */ \n\nimport Tone from 'tone'\n\nexport default {\n  lowPass: new Tone.Filter({\n    frequency: 11000,\n  }),\n\n  noise: new Tone.NoiseSynth({\n    volume: -12,\n    noise: {\n      type: 'pink',\n      playbackRate: 3,\n    },\n    envelope: {\n      attack: 0.001,\n      decay: 0.13,\n      sustain: 0,\n      release: 0.03,\n    },\n  }),\n\n  poly: new Tone.PolySynth(6, Tone.Synth, {\n    volume: -10,\n    oscillator: {\n      partials: [0, 2, 3, 4],\n    },\n    envelope: {\n      attack: 0.001,\n      decay: 0.17,\n      sustain: 0,\n      release: 0.05,\n    },\n  }),\n\n  freqEnv: [],\n  started: false,\n  player: null,\n  started: false,\n  initiated: false,\n  idx : 0,\n\n  notesToEvents(notes) {\n    var result = [];\n    var time = 0;\n    notes.forEach(element => {\n      var temp = element.split(\"/\")[2];\n      var isRest = false;\n      var isDot = false;\n      if (temp.includes(\"d\") || temp.includes(\"r\")) {\n        if (temp.includes(\"r\")) {\n          temp = temp.replace(\"r\", \"\");\n          isRest = true;\n        }\n        if (temp.includes(\"d\")) {\n          temp = temp.replace(\"d\", \"\");\n          isDot = true;\n        }\n      }\n      temp += 'n';\n      if (isDot) temp += \".\"\n      if (!isRest) {\n        result.push(time);\n      }\n      time += Tone.Time(temp);\n    });\n    return result;\n  },\n\n  async init() {\n    if (this.initiated) \n      return\n    this.initiated = true;\n    this.poly.voices.forEach((v, i) => {\n      const env = new Tone.FrequencyEnvelope({\n        attack: 0.001,\n        decay: 0.08,\n        release: 0.08,\n        baseFrequency: Tone.Frequency(\"A4\"),\n        octaves: Math.log2(13),\n        releaseCurve: 'exponential',\n        exponent: 3.5,\n      });\n      env.connect(v.oscillator.frequency);\n      this.freqEnv[i] = env;\n    });\n    this.noise.connect(this.lowPass);\n    this.lowPass.toMaster();\n    this.poly.toMaster();\n    if (this.player == null) {\n      this.player = new Tone.Player()\n      await this.player.load('https://cdn.jsdelivr.net/gh/R-D-D-D/Ground-Zero/web_frontend/src/resources/metronome_click.mp3');\n      this.player.toMaster();\n    }\n  },\n\n  playSequence(timeSignature, bpm, notes, numBars, handler) {\n    this.createAndRecordSequence(timeSignature, bpm, notes, numBars, undefined, true, handler);\n  },\n\n  createAndRecordSequence(timeSignature, bpm, notes, numBars, audio, noRecord, handler) {\n    // simple check to avoid double play\n    if (this.started || numBars == 0) return;\n    this.started = true;\n\n    Tone.Transport.bpm.value = parseInt(bpm);\n    this.notesToEvents([])\n\n    var timeSigArr = timeSignature.split('/')\n    Tone.Transport.timeSignature = [parseInt(timeSigArr[0]), parseInt(timeSigArr[1])];\n\n    Tone.Context.latencyHint = 'fastest';\n    const part = new Tone.Part((time) => {\n        //the events will be given to the callback with the time they occur\n        this.poly.voices.forEach((v, i) => {\n          this.freqEnv[i].triggerAttackRelease('16n', time);\n          v.envelope.triggerAttackRelease('16n', time);\n        });\n        this.noise.triggerAttackRelease('16n', time);\n        //handler.highlightNote(this.idx);\n        // this.idx ++;\n        // console.log(\"idx\", this.idx)\n      }, this.notesToEvents(notes)\n    );\n    // console.log(numBars)\n    // console.log(this.notesToEvents(notes))\n\n    part.start('1m');\n\n    part.loop = numBars;\n    var totalNumBars = numBars + \"m\";\n    \n    Tone.Transport.scheduleRepeat(() => {\n      this.player.restart();\n    }, \"4n\", \"0m\");\n\n    // var seq = new Tone.Sequence((time, note) => {\n    //   this.player.get(\"click\").start();\n    // //straight quater notes\n    // }, [1, 2, 3, 4, 5, 6, 7, 8], \"8n\");\n    //start the Transport for the events to start\n\n    if (!noRecord) {\n      const actx  = Tone.context;\n      const dest  = actx.createMediaStreamDestination();\n      const recorder = new MediaRecorder(dest.stream);\n  \n      this.lowPass.connect(dest);\n      this.poly.connect(dest);\n      this.player.connect(dest);\n    \n      const chunks = [];\n  \n      recorder.ondataavailable = evt => chunks.push(evt.data);\n      recorder.onstop = evt => {\n        let blob = new Blob(chunks, { type: 'audio/ogg; codecs=opus' });\n        audio.src = URL.createObjectURL(blob);\n      };\n\n      Tone.Transport.schedule((time) => {\n        recorder.stop();\n        console.log('stopped')\n        Tone.Transport.stop();  \n        Tone.Transport.cancel(0);\n        this.started = false;\n        this.idx = 0;\n      }, totalNumBars);\n  \n      recorder.start();\n      Tone.Transport.start();\n    } else {\n      Tone.Transport.schedule((time) => {\n        console.log('stopped')\n        Tone.Transport.stop();  \n        Tone.Transport.cancel(0);\n        this.started = false;\n        this.idx = 0;\n      }, totalNumBars);\n\n      Tone.Transport.start();\n    }\n  }\n}\n","export default {\n  // storing rhythm as a string\n  generateRhythmString (rhythm) {\n    if (rhythm != undefined)\n      return rhythm.id.toString() + '&' + rhythm.title + '&' + rhythm.timeSignature + '&' + rhythm.noOfBars.toString() + '&' + rhythm.bpm.toString() + '&' + rhythm.rhythm.join('-')\n    else\n      return ''\n    },\n\n  generateRhythmsString (rhythms) {\n    var result = ''\n    for (var i = 0; i < rhythms.length; i++) {\n      if (i == rhythms.length - 1) {\n        result += this.generateRhythmString(rhythms[i])\n      } else {\n        result += this.generateRhythmString(rhythms[i]) + '$'\n      }\n    }\n    return result;\n  },\n\n  parseRhythmString (str) {\n    //console.log(str)\n    var strArr = str.split('&')\n    const obj = {\n      id: parseInt(strArr[0]),\n      title: strArr[1],\n      timeSignature: strArr[2],\n      noOfBars: strArr[3],\n      bpm: strArr[4],\n      rhythm: strArr[5] ? strArr[5].split('-') : []\n    }\n    return obj\n  },\n\n  parseRhythmsString (str) {\n    if (str.length == 0)\n      return []\n    var rhythms = str.split('$').map(rhythm => this.parseRhythmString(rhythm))\n    return rhythms\n  },\n\n  cloneRhythms (rhythms) {\n    const result = []\n    for (var i = 0; i < rhythms.length; i++) {\n      const newRhythm = {}\n      newRhythm.id = rhythms[i].id\n      newRhythm.title = rhythms[i].title\n      newRhythm.timeSignature = rhythms[i].timeSignature\n      newRhythm.noOfBars = rhythms[i].noOfBars\n      newRhythm.bpm = rhythms[i].bpm\n      newRhythm.rhythm = [...(rhythms[i].rhythm)]\n      result.push(newRhythm)\n    }\n    return result\n  },\n\n  cloneLesson (lesson) {\n    return {\n      id: lesson.id,\n      name: lesson.name,\n      TutorId: lesson.TutorId,\n      rhythms: this.cloneRhythms(lesson.rhythms),\n      date: lesson.date\n    }\n  }\n}\n","<template lang=\"pug\">\n  #show-lesson(@click=\"disable_title_edit($event)\")\n    v-row(no-gutters)\n      v-col.p-0(cols='9' background-color='grey lighten-3')\n        v-sheet(color='grey lighten-4' :height=\"height\" dark)\n          #vexflow-wrapper(@click=\"enable_save_btn\")\n          v-row(v-if=\"!is_student\")\n            v-col\n              v-btn.mt-5(x-large light :disabled=\"disable\" @click=\"update_rhythms\" :loading=\"save_btn_loading\")\n                v-icon(left dark) mdi-content-save-all-outline\n                | Save Rhythm\n          v-row(v-else)\n            v-col\n              v-btn.mt-5(x-large light @click=\"$emit('play_sequence')\" :loading=\"save_btn_loading\")\n                v-icon(left dark) mdi-play-outline\n                | Play Rhythm\n          v-row\n            v-col\n              v-btn.mt-5.record(x-large light @click=\"\")\n                v-icon(left dark color=\"red darken-3\") mdi-circle-slice-8\n                | Record\n              v-btn.mt-5.stop(x-large light)\n                v-icon(left dark color=\"red darken-3\") mdi-stop-circle-outline\n                | Stop\n\n      //- Side bar\n      v-col.p-0(cols='3')\n        //- v-sheet.pa-8(color='indigo' :height=\"height\" dark)\n        v-card.elevation-12.pa-0(:height=\"height\")\n          v-toolbar(light v-if=\"lesson\")\n            v-toolbar-title.text-h4 {{ lesson.name }}\n            v-spacer\n          v-card-text.py-0(:class=\"{'rhythm-list-half': !is_student, 'rhythm-list-full': is_student}\")\n            v-list(v-if=\"lesson\")\n              v-list-item(v-for=\"rhythm in lesson.rhythms\" :key=\"rhythm.id\" @click=\"display_rhythm($event, rhythm)\" active @dblclick=\"edit_rhythm_title\")\n                v-list-item-icon\n                  v-icon(color=\"pink\" v-if='active_rhythm == rhythm') mdi-star\n                  v-icon(v-else) mdi-star\n                v-list-item-content\n                  v-list-item-title.text-left.text-h5(v-text='rhythm.title' v-if=\"!title_editable || rhythm != active_rhythm\")\n                  v-text-field#title_edit.py-0(v-model=\"active_rhythm_title\" type=\"text\" @input=\"enable_save_btn\" v-else required :rules=\"nameRules\")\n                v-list-item-icon(v-if=\"!is_student\")\n                  v-btn.delete_btn\n                    v-icon(color=\"indigo\" @click=\"\") mdi-trash-can-outline\n          v-card-actions(v-if=\"!is_student\")\n            v-spacer\n            v-btn#add_btn.mt-3(outlined color=\"indigo\" @click=\"open_dialogue\")\n              v-icon(left) mdi-plus-thick\n              |  Add Rhythm\n            v-spacer\n          v-toolbar(light flat v-if=\"!is_student\")\n            v-toolbar-title Current Rhythm\n            v-spacer\n          v-card-text(v-if=\"!is_student\")\n            v-select(:items=\"time_signatures\" v-model=\"time_signature\" label='Time Signature' @change=\"$emit('change_time_signature')\" @click=\"enable_save_btn\").pt-0\n            v-slider(v-model='no_bars' min='0' max='4' :label='bars_label' @change=\"$emit('change_bars')\" @click=\"enable_save_btn\")\n            v-slider(v-model='bpm' min='60' max='120' :label='bpm_label' @click=\"enable_save_btn\")\n          //- v-container(fluid)\n          //-   v-row\n          //-     v-col\n          //-       h2 Settings \n          //-       v-select(:items=\"time_signatures\" label='Time Signature')\n          //-       v-slider(v-model='no_bars' min='0' max='16' :label='bars_label' message=\"hey\")\n          //-       v-slider(v-model='bpm' min='60' max='180' :label='bpm_label')\n\n    v-row(justify='center')\n      v-dialog(v-model='dialog' persistent='' max-width='600px')\n        template(v-slot:activator='{ on, attrs }')\n        v-card\n          v-card-title\n            span.headline Rhythm Details\n          v-card-text.py-0\n            v-form(ref=\"form\")\n              v-container\n                v-row\n                  v-col(cols='12')\n                    v-text-field(v-model=\"active_rhythm_title\" type=\"text\" label='Rhythm name*' required :rules=\"nameRules\")\n                //- v-col(cols='12')\n                //-   v-autocomplete(:items=\"['Skiing', 'Ice hockey', 'Soccer', 'Basketball', 'Hockey', 'Reading', 'Writing', 'Coding', 'Basejump']\" label='Interests' multiple='')\n          v-card-actions\n            v-spacer\n            v-btn(color='blue darken-1' text='' @click='dialog = false') Close\n            v-btn(color='blue darken-1' text='' @click=\"add_rhythm\" :loading=\"add_btn_loading\") Save\n          v-card-text(v-if=\"error\")\n            p {{ error }}  \n</template>\n\n<script>\nimport tone from '@/plugins/tone'\nimport vexUI from '@/plugins/vex'\nimport Panel from '@/components/Panel'\nimport { mapState } from 'vuex'\nimport utils from '@/utils'\n\nexport default {\n  name: 'ShowLesson',\n  data () {\n    return {\n      height: '100vh',\n      no_bars: 4,\n      bpm: 60,\n      time_signatures: ['4/4', '3/4', '2/4', '3/8', '6/8'],\n      time_signature: '4/4',\n      bars_label: 'No. Bars: 4',\n      bpm_label: 'BPM: 60',\n      handler: {},\n      disable: true,\n      active_rhythm: null,\n      active_rhythm_title: '',\n      title_editable: false,\n      save_btn_loading: false,\n      add_btn_loading: false,\n      nameRules: [\n        v => !!v || 'Title is required'\n      ],\n      dialog: false,\n      error: null,\n      recording: false\n    }\n  },\n  components: {\n    'panel': Panel\n  },\n  computed: {\n    lesson () {\n      if (!this.user.isStudent) \n        return this.$store.getters.lesson(this.$route.params.lesson_id)\n      else \n        return this.$store.getters.lessonFromSubscribedTutors(this.$route.params.tutor_id, this.$route.params.lesson_id)\n    },\n\n    tutor () {\n      if (this.user.isStudent)\n        return this.$store.getters.tutorFromSubscribedTutors\n      else \n        return null\n    },\n\n    is_student () {\n      return this.user.isStudent\n    },\n\n    ...mapState(['user', 'students', 'subscribedTutors', 'lessons'])\n  },\n  watch: {\n    bpm: function (val) {\n      this.bpm_label = 'BPM: ' + val\n    },\n    no_bars: function (val) {\n      this.bars_label = 'No. Bars: ' + val\n    }\n  },\n  methods: {\n    alert () {\n      alert('testing')\n    },\n\n    // there are many rhythms in a lesson, display one of them\n    async display_rhythm (event, rhythm) {\n      if (event) {\n        // delete btn pressed\n        if (event.target && event.target.nodeName &&  event.target.nodeName == 'BUTTON') {\n          confirm('Are you sure you want to delete?')\n          var rhythmIdx = this.lesson.rhythms.indexOf(rhythm)\n          var newLesson = utils.cloneLesson(this.lesson)\n\n          newLesson.rhythms.splice(rhythmIdx, 1)\n          console.log(newLesson)\n          newLesson.rhythms = utils.generateRhythmsString(newLesson.rhythms)\n          try {\n            await this.$store.dispatch('editRhythm', {\n              lesson: this.lesson,\n              newLesson: newLesson\n            })\n            return\n          } catch (err) {\n            console.log(err)\n            return\n          }\n        }\n      }\n      this.active_rhythm = rhythm\n      this.active_rhythm_title = rhythm.title\n      this.disable = true\n\n      this.no_bars = rhythm.noOfBars\n      this.handler.changeBars(this.no_bars)\n\n      this.time_signature = rhythm.timeSignature\n      this.handler.setTimeSignature(this.time_signature)\n\n      this.bpm = rhythm.bpm\n\n      this.handler.importNotes(rhythm.rhythm, this.time_signature)\n    },\n\n    enable_save_btn () {\n      this.disable = false\n    },\n\n    edit_rhythm_title () {\n      this.title_editable = true\n    },\n\n    async update_rhythms () {\n      this.save_btn_loading = true\n      var oldRhythmIdx = this.lesson.rhythms.indexOf(this.active_rhythm)\n      // console.log('oldRhythmIdx', oldRhythmIdx)\n      var newRhythm = {\n        id: this.active_rhythm.id,\n        title: this.active_rhythm_title,\n        timeSignature: this.time_signature,\n        noOfBars: this.no_bars,\n        bpm: this.bpm,\n        rhythm: this.handler.exportNotes()\n      }\n\n      var newLesson = utils.cloneLesson(this.lesson)\n      newLesson.rhythms[oldRhythmIdx] = newRhythm\n      newLesson.rhythms = utils.generateRhythmsString(newLesson.rhythms)\n      await this.$store.dispatch('editRhythm', {\n        lesson: this.lesson,\n        newLesson: newLesson\n      })\n      this.save_btn_loading = false\n      this.display_rhythm({}, this.lesson.rhythms[oldRhythmIdx])\n    },\n\n    disable_title_edit (event) {\n      if (event.target.id != 'title_edit') {\n        this.title_editable = false\n      }\n    },\n\n    async add_rhythm () {\n      if (this.$refs.form.validate()) {\n        this.add_btn_loading = true\n        var newRhythm = {\n          id: this.lesson.rhythms.length > 0 ? this.lesson.rhythms[this.lesson.rhythms.length - 1].id + 1 : 1,\n          title: this.active_rhythm_title,\n          timeSignature: this.time_signature,\n          noOfBars: this.no_bars,\n          bpm: this.bpm,\n          rhythm: []\n        }\n\n        var newLesson = utils.cloneLesson(this.lesson)\n\n        newLesson.rhythms.push(newRhythm)\n        newLesson.rhythms = utils.generateRhythmsString(newLesson.rhythms)\n\n        await this.$store.dispatch('editRhythm', {\n            lesson: this.lesson,\n            newLesson: newLesson\n        })\n        this.display_rhythm({}, this.lesson.rhythms[this.lesson.rhythms.length - 1])\n        this.add_btn_loading = false\n        this.dialog = false\n      }\n    },\n\n    open_dialogue () {\n      this.dialog = true\n    },\n\n    record () {\n      // set up basic variables for app\n\n      const record = document.querySelector('.record');\n      const stop = document.querySelector('.stop');\n      const soundClips = document.querySelector('.sound-clips');\n      const mainSection = document.querySelector('.main-controls');\n\n      // disable stop button while not recording\n\n      stop.disabled = true;\n\n      // visualiser setup - create web audio api context and canvas\n\n      let audioCtx;\n\n      if (navigator.mediaDevices.getUserMedia) {\n        console.log('getUserMedia supported.');\n\n        const constraints = { audio: true };\n        let chunks = [];\n\n        let onSuccess = function(stream) {\n          const mediaRecorder = new MediaRecorder(stream);\n\n          record.onclick = function() {\n            mediaRecorder.start();\n            console.log(mediaRecorder.state);\n            console.log(\"recorder started\");\n            record.style.background = \"red\";\n\n            stop.disabled = false;\n            record.disabled = true;\n          }\n\n          stop.onclick = function() {\n            mediaRecorder.stop();\n            console.log(mediaRecorder.state);\n            console.log(\"recorder stopped\");\n            record.style.background = \"\";\n            record.style.color = \"\";\n            // mediaRecorder.requestData();\n\n            stop.disabled = true;\n            record.disabled = false;\n          }\n\n          mediaRecorder.onstop = function(e) {\n            console.log(\"data available after MediaRecorder.stop() called.\");\n\n            const clipName = prompt('Enter a name for your sound clip?','My unnamed clip');\n\n            const clipContainer = document.createElement('div');\n            const clipLabel = document.createElement('p');\n            const audio = document.createElement('audio');\n            const deleteButton = document.createElement('button');\n            const comparison = document.createElement('img');\n\n            clipContainer.classList.add('clip', 'col-12', 'text-center');\n            deleteButton.classList.add('btn', 'btn-outline-light')\n            clipLabel.classList.add('text-light')\n            audio.setAttribute('controls', '');\n            deleteButton.textContent = 'Delete';\n            comparison.src = 'resources/comparison.png';\n            comparison.classList.add('col-12', 'mt-2');\n\n            if(clipName === null) {\n              clipLabel.textContent = 'My unnamed clip';\n            } else {\n              clipLabel.textContent = clipName;\n            }\n\n            clipContainer.appendChild(audio);\n            clipContainer.appendChild(clipLabel);\n            clipContainer.appendChild(deleteButton);\n            soundClips.appendChild(clipContainer);\n            soundClips.appendChild(comparison);\n\n            audio.controls = true;\n            const blob = new Blob(chunks, { 'type' : 'audio/ogg; codecs=opus' });\n            chunks = [];\n            const audioURL = window.URL.createObjectURL(blob);\n            audio.src = audioURL;\n            console.log(\"recorder stopped\");\n\n            deleteButton.onclick = function(e) {\n              let evtTgt = e.target;\n              evtTgt.parentNode.parentNode.removeChild(evtTgt.parentNode.parentNode.childNodes[0]);\n            }\n\n            clipLabel.onclick = function() {\n              const existingName = clipLabel.textContent;\n              const newClipName = prompt('Enter a new name for your sound clip?');\n              if(newClipName === null) {\n                clipLabel.textContent = existingName;\n              } else {\n                clipLabel.textContent = newClipName;\n              }\n            }\n          }\n\n          mediaRecorder.ondataavailable = function(e) {\n            chunks.push(e.data);\n          }\n        }\n\n        let onError = function(err) {\n          console.log('The following error occured: ' + err);\n        }\n\n        navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n\n      } else {\n        console.log('getUserMedia not supported on your browser!');\n      }\n    }\n  },\n  mounted: function () {\n    this.handler = new vexUI.Handler(\"vexflow-wrapper\").init()\n\n    this.$on('play_and_record_sequence', () => {\n      const audio = document.getElementById('solution-audio')\n      tone.init()\n      tone.createAndRecordSequence(this.time_signature, 60, this.handler.exportNotes(), 2, audio)\n      tone.createAndRecordSequence(this.time_signature, this.bpm, this.handler.exportNotes(), parseInt(this.num_of_bars) + 1, audio, false, this.handler)\n    })\n\n    this.$on('play_sequence', () => {\n      tone.init()\n      // TODO disable edit when playing\n      // this.handler.disableEdit();\n      console.log(this.handler.exportNotes())\n      tone.playSequence(this.time_signature, this.bpm, this.handler.exportNotes(), parseInt(this.no_bars) + 1, this.handler)\n      // this.handler.enableEdit();\n    })\n\n    this.$on('change_time_signature', () => {\n      this.handler.setTimeSignature(this.time_signature)\n    })\n\n    this.$on('change_bars', () => {\n      this.handler.changeBars(this.no_bars)\n    })\n  }\n}\n</script>\n\n<style>\n#setting {\n  width: 100%;\n}\n\n#rhythms-list-half {\n  overflow: scroll;\n  height: 50vh;\n}\n\n#rhythms-list-full {\n  overflow: scroll;\n  height: 100vh;\n}\n\n#add_btn {\n  width: 70%;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShowLesson.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShowLesson.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ShowLesson.vue?vue&type=template&id=381c7f91&lang=pug&\"\nimport script from \"./ShowLesson.vue?vue&type=script&lang=js&\"\nexport * from \"./ShowLesson.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ShowLesson.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemIcon } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VSheet } from 'vuetify/lib/components/VSheet';\nimport { VSlider } from 'vuetify/lib/components/VSlider';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VCol,VContainer,VDialog,VForm,VIcon,VList,VListItem,VListItemContent,VListItemIcon,VListItemTitle,VRow,VSelect,VSheet,VSlider,VSpacer,VTextField,VToolbar,VToolbarTitle})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mt-5\",attrs:{\"id\":\"lessons\"}},[_c('panel',{attrs:{\"title\":\"Upcoming Lessons\"}},[(!_vm.is_student)?_c('v-list',_vm._l((_vm.lessons),function(lesson){return _c('v-list-item',{key:lesson.name},[_c('v-list-item-content',[_c('v-list-item-title',{staticClass:\"text-h5 py-0\",domProps:{\"textContent\":_vm._s(lesson.name)}})],1),_c('v-list-item-content',[_c('v-list-item-title',{domProps:{\"textContent\":_vm._s(lesson.date)}})],1),_c('v-list-item-icon',[_c('v-btn',{attrs:{\"outlined\":\"\",\"color\":\"indigo\"},on:{\"click\":function($event){return _vm.showlesson($event, lesson.id)}}},[_c('v-icon',[_vm._v(\"mdi-pencil\")])],1)],1)],1)}),1):_c('v-list',_vm._l((_vm.tutor.lessons),function(lesson){return _c('v-list-item',{key:lesson.name,on:{\"click\":function($event){return _vm.showlesson($event, lesson.id)}}},[_c('v-list-item-content',[_c('v-list-item-title',{staticClass:\"text-h5 py-0\",domProps:{\"textContent\":_vm._s(lesson.name)}})],1),_c('v-list-item-content',[_c('v-list-item-title',{domProps:{\"textContent\":_vm._s(lesson.date)}})],1)],1)}),1)],1),(!_vm.is_student)?_c('v-row',{attrs:{\"justify\":\"center\"}},[_c('v-dialog',{attrs:{\"persistent\":\"\",\"max-width\":\"600px\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({staticClass:\"mt-5\",attrs:{\"x-large\":\"\"}},'v-btn',attrs,false),on),[_c('v-icon',{attrs:{\"left\":\"\",\"dark\":\"\"}},[_vm._v(\"mdi-plus-thick\")]),_vm._v(\"Add Lesson\")],1)]}}],null,false,328248797),model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-card',[_c('v-card-title',[_c('span',{staticClass:\"headline\"},[_vm._v(\"Lesson Details\")])]),_c('v-card-text',{staticClass:\"py-0\"},[_c('v-form',{ref:\"form\"},[_c('v-container',[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-text-field',{attrs:{\"type\":\"text\",\"label\":\"Lesson name*\",\"required\":\"\",\"rules\":_vm.nameRules},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-date-picker',{staticClass:\"elevation-6\",attrs:{\"full-width\":\"\",\"rules\":_vm.pickerRules},model:{value:(_vm.picker),callback:function ($$v) {_vm.picker=$$v},expression:\"picker\"}})],1)],1)],1)],1)],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"text\":\"\"},on:{\"click\":function($event){_vm.dialog = false}}},[_vm._v(\"Close\")]),_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"text\":\"\",\"loading\":_vm.loading},on:{\"click\":_vm.submit}},[_vm._v(\"Save\")])],1),(_vm.error)?_c('v-card-text',[_c('p',[_vm._v(_vm._s(_vm.error))])]):_vm._e()],1)],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Api from '@/services/Api'\n\nexport default {\n  create (lessonInfo) {\n    return Api().post('lesson/new', lessonInfo)\n  },\n\n  list (userId) {\n    return Api().get(`lesson/list?uid=${userId}`)\n  },\n\n  edit (lessonInfo) {\n    return Api().put('lesson/edit', lessonInfo)\n  }\n}\n","<template lang=\"pug\">\n  #lessons.mt-5\n    panel(title=\"Upcoming Lessons\")\n      v-list(v-if=\"!is_student\")\n        v-list-item(v-for=\"lesson in lessons\" :key=\"lesson.name\")\n          v-list-item-content\n            v-list-item-title.text-h5.py-0(v-text=\"lesson.name\")\n          v-list-item-content\n            v-list-item-title(v-text='lesson.date')\n          v-list-item-icon\n            v-btn(outlined color='indigo' @click=\"showlesson($event, lesson.id)\")\n                v-icon mdi-pencil\n      v-list(v-else)\n        v-list-item(v-for=\"lesson in tutor.lessons\" :key=\"lesson.name\" @click=\"showlesson($event, lesson.id)\")\n          v-list-item-content\n            v-list-item-title.text-h5.py-0(v-text=\"lesson.name\")\n          v-list-item-content\n            v-list-item-title(v-text='lesson.date')\n    v-row(justify='center' v-if=\"!is_student\")\n      v-dialog(v-model='dialog' persistent='' max-width='600px')\n        template(v-slot:activator='{ on, attrs }')\n          v-btn.mt-5(x-large v-bind='attrs' v-on='on')\n            v-icon(left dark) mdi-plus-thick\n            | Add Lesson\n        v-card\n          v-card-title\n            span.headline Lesson Details\n          v-card-text.py-0\n            v-form(ref=\"form\")\n              v-container\n                v-row\n                  v-col(cols='12')\n                    v-text-field(v-model=\"name\" type=\"text\" label='Lesson name*' required :rules=\"nameRules\")\n                  v-col(cols='12')\n                    v-date-picker.elevation-6(v-model=\"picker\" full-width :rules=\"pickerRules\")\n                //- v-col(cols='12')\n                //-   v-autocomplete(:items=\"['Skiing', 'Ice hockey', 'Soccer', 'Basketball', 'Hockey', 'Reading', 'Writing', 'Coding', 'Basejump']\" label='Interests' multiple='')\n          v-card-actions\n            v-spacer\n            v-btn(color='blue darken-1' text='' @click='dialog = false') Close\n            v-btn(color='blue darken-1' text='' @click=\"submit\" :loading=\"loading\") Save\n          v-card-text(v-if=\"error\")\n            p {{ error }}\n\n</template>\n\n<script>\nimport Panel from '@/components/Panel'\nimport LessonService from '@/services/LessonService'\nimport { mapState } from 'vuex'\n\nexport default {\n  data () {\n    return {  \n      dialog: false,\n      picker: new Date().toISOString().substr(0, 10),\n      name: '',\n      nameRules: [\n        v => !!v || 'Name is required',\n      ],\n      pickerRules: [\n        v => !!v || 'Password is required',\n      ],\n      validation: {\n        namePassed: false,\n      },\n      error: null,\n      loading: false\n    }\n  },\n  computed: {\n    is_student () {\n      return this.user.isStudent\n    },\n\n    tutor () {\n      return this.$store.getters.tutorFromSubscribedTutors(this.$route.params.tutor_id)\n    },\n\n    ...mapState(['user', 'students', 'subscribedTutors', 'lessons'])\n  },\n  components: {\n    'panel': Panel\n  },\n  methods: {\n    async submit () {\n      if (this.$refs.form.validate()) {\n        this.loading = true\n        this.error = null\n        try {\n          const response = await LessonService.create({\n            name: this.name,\n            date: this.picker,\n            TutorId: this.user ? this.user.id : 2,\n            rhythms: ''\n          })\n          this.$store.dispatch('addLesson', response.data.lesson)\n          this.dialog = false\n          this.$router.push(`/lesson/show/${response.data.lesson.id}`)\n        } catch (err) {\n          console.log(err)\n        }\n      }\n    },\n\n    showlesson (event, id) {\n      if (this.is_student) {\n        this.$router.push(`/lesson/show/${this.tutor.id}/${id}`)\n      } else {\n        this.$router.push(`/lesson/show/${this.user.id}/${id}`)\n      }\n    }\n  },\n  mounted: async function () {\n    // const response = await LessonService.list()\n  }\n}\n</script>\n\n<style>\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LessonIndex.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LessonIndex.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LessonIndex.vue?vue&type=template&id=638a4fe0&lang=pug&\"\nimport script from \"./LessonIndex.vue?vue&type=script&lang=js&\"\nexport * from \"./LessonIndex.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDatePicker } from 'vuetify/lib/components/VDatePicker';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemIcon } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VCol,VContainer,VDatePicker,VDialog,VForm,VIcon,VList,VListItem,VListItemContent,VListItemIcon,VListItemTitle,VRow,VSpacer,VTextField})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"student\"}},[_c('panel',{attrs:{\"title\":\"Tutors\"}},[_c('v-list',_vm._l((_vm.allTutors),function(tutor){return _c('v-list-item',{key:tutor.id},[_c('v-list-item-icon',[(!(_vm.subscribedTutorsId.includes(tutor.id)))?_c('v-btn',{attrs:{\"dark\":\"\",\"color\":\"red darken-3\"},on:{\"click\":function($event){return _vm.subscribe($event, tutor)}}},[_vm._v(\"Subscribe\")]):_c('v-btn',{attrs:{\"dark\":\"\",\"color\":\"grey darken-2\",\"disable\":\"\"},on:{\"click\":function($event){}}},[_vm._v(\"Subscribed\")])],1),_c('v-list-item-content',[_c('v-list-item-title',{staticClass:\"mr-5\",domProps:{\"textContent\":_vm._s(tutor.username)}})],1),_c('v-list-item-avatar',[_c('v-img',{attrs:{\"src\":_vm.avatar}})],1)],1)}),1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n  #student\n    panel(title=\"Tutors\")\n      v-list\n        v-list-item(v-for='tutor in allTutors' :key='tutor.id')\n          v-list-item-icon\n            v-btn(@click=\"subscribe($event, tutor)\" dark color=\"red darken-3\" v-if=\"!(subscribedTutorsId.includes(tutor.id))\") Subscribe\n            v-btn(@click=\"\" dark color=\"grey darken-2\" v-else disable) Subscribed\n          v-list-item-content\n            v-list-item-title.mr-5(v-text='tutor.username')\n          v-list-item-avatar\n            v-img(:src='avatar')\n</template>\n\n<script>\nimport Panel from '@/components/Panel'\nimport { mapState } from 'vuex'\n\nexport default {\n  name: 'Student',\n  data () {\n    return {\n      avatar: 'https://cdn.vuetifyjs.com/images/lists/2.jpg'\n    }\n  },\n  components: {\n    'panel': Panel\n  },\n  computed: {\n    subscribedTutorsId () {\n      return this.subscribedTutors.map(tutor => tutor.id)\n    },\n\n    ...mapState(['user', 'allTutors', 'subscribedTutors'])\n  },\n  methods: {\n    async subscribe (event, tutor) {\n      await this.$store.dispatch('subscribe', {\n        studentId: this.user.id,\n        tutorId: tutor.id\n      })\n    }\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TutorIndex.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TutorIndex.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TutorIndex.vue?vue&type=template&id=9146ff12&scoped=true&lang=pug&\"\nimport script from \"./TutorIndex.vue?vue&type=script&lang=js&\"\nexport * from \"./TutorIndex.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9146ff12\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAvatar } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemIcon } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\ninstallComponents(component, {VBtn,VImg,VList,VListItem,VListItemAvatar,VListItemContent,VListItemIcon,VListItemTitle})\n","import Vue from \"vue\"\nimport VueRouter from \"vue-router\"\nimport HelloWorld from \"../components/HelloWorld\"\nimport Register from \"../components/Register\"\nimport Student from \"../components/StudentView/Student\"\nimport LogIn from \"../components/LogIn\"\nimport ShowLesson from \"../components/Lesson/ShowLesson\"\nimport LessonIndex from \"../components/Lesson/LessonIndex\"\nimport TutorIndex from \"../components/TutorIndex\"\n\nVue.use(VueRouter);\n\nconst routes = [\n  {\n    path: '/',\n    name: 'home',\n    component: HelloWorld\n  },\n  {\n    path: '/register',\n    name: 'register',\n    component: Register\n  },\n  {\n    path: '/login',\n    name: 'login',\n    component: LogIn\n  },\n  {\n    path: '/student',\n    name: 'student',\n    component: Student\n  },\n  {\n    path: '/lesson/show/:tutor_id/:lesson_id',\n    name: 'showlesson',\n    component: ShowLesson\n  },\n  {\n    path: '/lesson/index/:tutor_id',\n    name: 'lessonindex',\n    component: LessonIndex\n  },\n  {\n    path: '/tutor/index',\n    name: 'tutorindex',\n    component: TutorIndex\n  }\n];\n\nconst router = new VueRouter({\n  routes\n});\n\nexport default router;\n","import Api from '@/services/Api'\n\nexport default {\n  subscribe (subscriptionInfo) {\n    return Api().post('subscribe/new', subscriptionInfo)\n  },\n\n  getSubscriptionInfoOfStudent (userId) {\n    return Api().get(`subscribe/get/student?uid=${userId}`)\n  },\n\n  getSubscriptionInfoOfTutor (userId) {\n    return Api().get(`subscribe/get/tutor?uid=${userId}`)\n  },\n\n  getAllTutors () {\n    return Api().get('tutor/list')\n  }\n}\n","import Vue from \"vue\"\nimport Vuex from \"vuex\"\nimport LessonService from \"../services/LessonService\"\nimport SubscriptionService from \"../services/SubscriptionService\"\nimport utils from \"../utils\"\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  strict: true,\n  state: {\n    token: null,\n    user: null,\n    subscribedStudents: [],\n    // this tutor object contains lessons that belongs to them\n    subscribedTutors: [],\n    allTutors: [],\n    // this lessons array is for tutors when they log in as tutor\n    lessons: [],\n    isUserLoggedIn: false\n  },\n\n  getters: {\n    lesson: state => id => {\n      return state.lessons.filter(lesson => lesson.id == id)[0];\n    },\n\n    lessonFromSubscribedTutors: state => (tutor_id, lesson_id) => {\n      return state.subscribedTutors.filter(tutor => tutor.id == tutor_id)[0].lessons.filter(lesson => lesson.id == lesson_id)[0];\n    },\n\n    tutorFromSubscribedTutors: state => id => {\n      return state.subscribedTutors.filter(tutor => tutor.id == id)[0];\n    }\n  },\n\n  mutations: {\n    setToken (state, token) {\n      state.token = token;\n    },\n\n    setUser (state, user) {\n      state.user = user;\n    },\n\n    logIn (state) {\n      state.isUserLoggedIn = true;\n    },\n\n    logOut (state) {\n      state.isUserLoggedIn = false;\n    },\n\n    addLesson (state, lesson) {\n      lesson.rhythms = utils.parseRhythmsString(lesson.rhythms);\n      state.lessons.push(lesson);\n    },\n\n    setLessons (state, lessons) {\n      state.lessons = lessons;\n    },\n\n    setAllTutors (state, tutors) {\n      state.allTutors = tutors;\n    },\n\n    setTutors (state, tutors) {\n      state.subscribedTutors = tutors;\n    },\n\n    setLessonsForTutor (state, payload) {\n      var tutorIdx = -1\n      for (var i = 0; i < state.subscribedTutors.length; i++) {\n        if (state.subscribedTutors[i].id == payload.tutor.id)\n          tutorIdx = i;\n      }\n      if (tutorIdx < 0) \n        throw new Error(\"Negative index\");\n      state.subscribedTutors[tutorIdx].lessons = payload.lessons;\n    }\n  },\n\n  actions: {\n    // user management\n    setToken ({commit}, token) {\n      commit(\"setToken\", token);\n      if (token)\n        commit(\"logIn\");\n      else\n        commit(\"logOut\");\n    },\n\n    setUser ({commit}, user) {\n      commit(\"setUser\", user);\n    },\n\n    // lesson management\n    addLesson ({commit}, lesson) {\n      commit(\"addLesson\", lesson);\n    },\n\n    // for tutor to use when logged in as tutor\n    async getLessons ({commit}, userId) {\n      try {\n        var response = await LessonService.list(userId);\n        var lessons = response.data.lessons.map(lesson => {\n          lesson.rhythms = utils.parseRhythmsString(lesson.rhythms);\n          return lesson;\n        })\n        commit(\"setLessons\", lessons);\n      } catch (err) {\n        console.log(err);\n      }\n    },\n\n    // takes in lesson, oldRhythm and newRhythm as args\n    async editRhythm (store, payload) {\n      try {\n        await LessonService.edit({\n          lessonObj: payload.newLesson\n        });\n        await store.dispatch(\"getLessons\", store.state.user.id);\n      } catch (err) {\n        console.log(err);\n      }\n    },\n\n    // subscription management\n    async subscribe(store, payload) {\n      try {\n        await SubscriptionService.subscribe(payload);\n        store.dispatch(\"getTutorsOfStudent\", payload.studentId);\n      } catch (err) {\n        console.log(err);\n      }\n    },\n\n    async getAllTutors ({commit}) {\n      try {\n        const response = await SubscriptionService.getAllTutors();\n        var tutors = response.data.tutors.map(tutor => {\n          tutor.lessons = null;\n          return tutor;\n        });\n        commit(\"setAllTutors\", tutors);\n      } catch (err) {\n        console.log(err);\n      }\n    },\n\n    async getTutorsOfStudent ({commit}, userId) {\n      try {\n        const response = await SubscriptionService.getSubscriptionInfoOfStudent(userId);\n        var tutors = response.data.tutors.map(tutor => {\n          tutor.lessons = null;\n          return tutor;\n        })\n        // console.log(tutors)\n        commit(\"setTutors\", tutors);\n      } catch (err) {\n        console.log(err);\n      }\n    },\n\n    async getStudentsOfTutor ({commit}, userId) {\n      try {\n        const response = await SubscriptionService.getSubscriptionInfoOfTutor(userId);\n        commit(\"setStudents\", response.data.students);\n      } catch (err) {\n        console.log(err);\n      }\n    },\n\n    // for student to use when logged in as student to get lessons of his subscribed tutor\n    async getLessonsForStudent ({commit}, tutor) {\n      const response = await LessonService.list(tutor.id);\n      var lessons = response.data.lessons.map(lesson => {\n        lesson.rhythms = utils.parseRhythmsString(lesson.rhythms)\n        return lesson\n      });\n      commit(\"setLessonsForTutor\", {\n        tutor: tutor,\n        lessons: lessons\n      });\n    },\n\n  }\n})\n","import Vue from \"vue\";\nimport Vuetify from \"vuetify/lib\";\n\nVue.use(Vuetify);\n\nexport default new Vuetify({});\n","import Vue from \"vue\";\nimport App from \"./App.vue\";\nimport router from \"./router\";\nimport store from \"./store\";\nimport vuetify from \"./plugins/vuetify\";\n\nVue.config.productionTip = false;\n\nnew Vue({\n  router,\n  store,\n  vuetify,\n  render: h => h(App)\n}).$mount(\"#app\");\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShowLesson.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShowLesson.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}