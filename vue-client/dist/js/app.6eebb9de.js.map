{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/views/thread/CourseThreadsIndex.vue?3629","webpack:///./src/App.vue?a807","webpack:///./src/views/Payment.vue?1601","webpack:///./src/views/course/NewCourse.vue?1393","webpack:///./src/views/thread/ShowCourseThread.vue?09f9","webpack:///./src/plugins/vex.js","webpack:///./src/components/Course/VideoPlayer.vue?0a61","webpack:///./src/App.vue?58d7","webpack:///./src/components/Header.vue?d211","webpack:///src/components/Header.vue","webpack:///./src/components/Header.vue?f596","webpack:///./src/components/Header.vue?500f","webpack:///src/App.vue","webpack:///./src/App.vue?fa61","webpack:///./src/App.vue?312b","webpack:///./src/components/Home.vue?3868","webpack:///./src/services/LessonService.js","webpack:///./src/services/SubscriptionService.js","webpack:///./src/store/store.js","webpack:///./src/services/Api.js","webpack:///./src/services/CourseService.js","webpack:///src/components/Home.vue","webpack:///./src/components/Home.vue?7849","webpack:///./src/components/Home.vue","webpack:///./src/components/Register.vue?6c71","webpack:///./src/services/AuthenticationService.js","webpack:///./src/components/Panel.vue?d316","webpack:///src/components/Panel.vue","webpack:///./src/components/Panel.vue?a047","webpack:///./src/components/Panel.vue","webpack:///src/components/Register.vue","webpack:///./src/components/Register.vue?0c6d","webpack:///./src/components/Register.vue","webpack:///./src/components/StudentView/Student.vue?b3a5","webpack:///src/components/StudentView/Student.vue","webpack:///./src/components/StudentView/Student.vue?b898","webpack:///./src/components/StudentView/Student.vue","webpack:///./src/components/LogIn.vue?85b1","webpack:///src/components/LogIn.vue","webpack:///./src/components/LogIn.vue?b5a1","webpack:///./src/components/LogIn.vue","webpack:///./src/views/course/ShowCourse.vue?546a","webpack:///./src/components/Course/ShowLesson.vue?59ec","webpack:///./src/plugins/tone.js","webpack:///./src/utils.js","webpack:///./src/services/PostService.js","webpack:///./src/components/Course/VideoPlayer.vue?457a","webpack:///src/components/Course/VideoPlayer.vue","webpack:///./src/components/Course/VideoPlayer.vue?7c69","webpack:///./src/components/Course/VideoPlayer.vue?20e6","webpack:///./src/services/ThreadService.js","webpack:///src/components/Course/ShowLesson.vue","webpack:///./src/components/Course/ShowLesson.vue?281c","webpack:///./src/components/Course/ShowLesson.vue?db74","webpack:///src/views/course/ShowCourse.vue","webpack:///./src/views/course/ShowCourse.vue?b24e","webpack:///./src/views/course/ShowCourse.vue?aac7","webpack:///./src/views/course/CourseIndex.vue?0635","webpack:///src/views/course/CourseIndex.vue","webpack:///./src/views/course/CourseIndex.vue?654b","webpack:///./src/views/course/CourseIndex.vue","webpack:///./src/views/course/NewCourse.vue?0f8c","webpack:///./src/services/ExerciseService.js","webpack:///src/views/course/NewCourse.vue","webpack:///./src/views/course/NewCourse.vue?6680","webpack:///./src/views/course/NewCourse.vue?ab02","webpack:///./src/components/TutorIndex.vue?2b06","webpack:///src/components/TutorIndex.vue","webpack:///./src/components/TutorIndex.vue?a0bc","webpack:///./src/components/TutorIndex.vue","webpack:///./src/components/Video.vue?4bf9","webpack:///src/components/Video.vue","webpack:///./src/components/Video.vue?006a","webpack:///./src/components/Video.vue?3c7f","webpack:///./src/views/thread/CoursesThreadsIndex.vue?ea07","webpack:///src/views/thread/CoursesThreadsIndex.vue","webpack:///./src/views/thread/CoursesThreadsIndex.vue?20cd","webpack:///./src/views/thread/CoursesThreadsIndex.vue?a733","webpack:///./src/views/thread/CourseThreadsIndex.vue?7033","webpack:///src/views/thread/CourseThreadsIndex.vue","webpack:///./src/views/thread/CourseThreadsIndex.vue?6114","webpack:///./src/views/thread/CourseThreadsIndex.vue?f936","webpack:///./src/views/thread/ShowCourseThread.vue?c8d4","webpack:///src/views/thread/ShowCourseThread.vue","webpack:///./src/views/thread/ShowCourseThread.vue?887c","webpack:///./src/views/thread/ShowCourseThread.vue?c814","webpack:///./src/views/Payment.vue?1cb8","webpack:///./src/services/PaymentService.js","webpack:///src/views/Payment.vue","webpack:///./src/views/Payment.vue?c3a0","webpack:///./src/views/Payment.vue?a923","webpack:///./src/views/AdvancedPayment.vue?d193","webpack:///src/views/AdvancedPayment.vue","webpack:///./src/views/AdvancedPayment.vue?5490","webpack:///./src/views/AdvancedPayment.vue?0ebb","webpack:///./src/components/OSMD.vue?fffa","webpack:///src/components/OSMD.vue","webpack:///./src/components/OSMD.vue?33f8","webpack:///./src/components/OSMD.vue","webpack:///./src/router/index.js","webpack:///./src/components/CustomIcons/bpm.vue?29cc","webpack:///src/components/CustomIcons/bpm.vue","webpack:///./src/components/CustomIcons/bpm.vue?28b7","webpack:///./src/components/CustomIcons/bpm.vue?28d7","webpack:///./src/plugins/vuetify.js","webpack:///./src/main.js","webpack:///./src/components/Course/ShowLesson.vue?6988","webpack:///./src/views/AdvancedPayment.vue?59e7","webpack:///./src/views/course/ShowCourse.vue?b607","webpack:///./src/assets/play_button.png","webpack:///./src/views/thread/CoursesThreadsIndex.vue?030f","webpack:///./src/components/CustomIcons/bpm.vue?595a","webpack:///./src/components/Video.vue?0f9c","webpack:///./src/components/Header.vue?deb3"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","Vex","UI","VF","Flow","getRandomInt","max","Math","floor","random","getStyle","el","styleProp","y","x","document","getElementById","currentStyle","getComputedStyle","defaultView","getPropertyValue","getMousePositionInCanvas","canvas","evt","border","id","borderValue","substring","indexOf","match","padding","paddingValue","rect","getBoundingClientRect","clientX","left","scale","clientY","top","getAbsoluteMousePositionInCanvas","isCursorWithinRectangle","width","height","mouseX","mouseY","getFirstTickableAfterXPosition","stave","note","getTickables","getAbsoluteX","getLastTickableBeforeXPosition","mergeProperties","obj1","obj2","obj3","attrname","getStemDirection","reference","getYForLine","StaveNote","STEM_DOWN","STEM_UP","provisoryTickableStyle","shadowBlur","shadowColor","fillStyle","strokeStyle","highlightNoteStyle","defaultNoteStyle","Handler","containerId","options","DOMNode","this","container","defaultOptions","canEdit","canPlay","canAddStaves","canChangeNoteValue","showToolbar","numberOfStaves","lessStaveHeight","canvasProperties","innerWidth","tabindex","createCanvas","renderer","Renderer","Backends","CANVAS","ctx","getContext","staveList","createStaves","currentNote","currentStave","provisoryTickable","mouseListener","MouseListener","noteMenu","NoteMenu","init","tipRenderer","TipRenderer","numBars","timeSignature","createElement","props","keys","ceil","appendChild","yPosition","widthOfStave","Stave","addClef","addTimeSignature","font","family","size","weight","setContext","setTickables","redraw","startListening","resize","removeChild","childNodes","convas","notesInserted","clear","drawStaves","drawNotes","undefined","redrawStave","box","getBoundingBox","idx","clearRect","getX","getY","getW","getH","draw","voice","Voice","TIME4_4","setMode","Mode","SOFT","setStrict","addTickables","formatter","Formatter","joinVoices","formatToStave","drawBeams","beams","Beam","generateBeams","updateProvisoryKey","mousePos","duration","noteType","noteName","NoteMap","getNoteName","clone","setStyle","setStemDirection","setStave","setTickContext","TickContext","drawProvisoryTickable","updateProvisoryDuration","newDur","x_shift","updateProvisoryType","newType","TickableType","NOTE","REST","BAR","BarNote","CLEF","ClefNote","clefKey","barline","Barline","setX","getTickContext","getNoteStartX","render_options","stave_padding","tempFillStyle","tempStrokeStyle","openMenuForKey","keyName","stopListening","setNote","setKeyIndex","indexOfKey","open","noteMenuClosed","addAccidentalToNote","index","accidental","Accidental","addAccidental","addDotToNote","dots","addDotToAll","beamWithNextNote","nextNote","getNextNote","notes","beam","pushBeam","deleteNote","getNotes","referenceIndex","removeTickable","exportNotes","dur","dot","temp","importNotes","tickables","barNum","barDuration","eval","accumDuration","noteArr","split","isDot","isRest","includes","replace","staveNote","clef","autoStem","parseInt","notesToBars","notesInBars","changeBars","newNumBars","usable","durationOfRest","setTimeSignature","highlightNote","setHighlight","currStave","currNumNotes","changeNumberOfBars","newNumberOfBars","console","log","lastElementChild","handler","keyIndex","panelProps","buttons","accidentals","canRender","currentButton","buttonRenderer","NoteMenuButtonRenderer","setTipArea","leftPadding","rightPadding","bottomPadding","fontSize","_x","_y","bottomY","_width","_height","boundingBox","backgroundColor","drawMenuPanel","panel","context","ready","drawButtons","addEventListener","close","removeEventListener","handleEvent","preventDefault","type","handleMouseClick","handleMouseMove","panelWidth","panelHeight","panelX","panelY","panelPosition","beginPath","fill","lineWidth","stroke","moveTo","lineTo","rightX","position","closeButton","accidentalButton","dotButton","beamButton","deleteButton","button","callAction","highlight","showTip","tip","addDoubleFlat","addFlat","addNatural","addSharp","addDoubleSharp","addDot","addBeam","handleMouseOver","handleMouseWheel","handleRightMouseClick","handleMouseLeave","findWhichStaveMouseOver","findWhichNoteMouseOver","noteList","noteBox","staveBox","handleLeftMouseClick","handleMiddleMouseClick","alert","delta","min","wheelDelta","deltaY","isAlias","durationAliases","newNote","replaceTickable","setType","setClef","previousNote","insertTickableBetween","clickedKeyName","newKeys","oldNote","tickable","newTickable","previousTickable","nextTickable","getClefModifierIndex","replaceClef","setEndBarType","pushTickable","modifiers","modifier","Clef","start_X","start_x","glyphs","getPreviousTickable","referenceTickable","getNextTickable","referenceNote","oldTickable","setBeams","beamList","getBeams","newBeam","letter","getPlayEvents","playInfo","MIDI","keyToNote","ClefOffsets","keyPressTime","defaultTime","modValue","Dot","events","channel","subtype","noteNumber","velocity","queuedTime","delay","newProps","currentProps","stem_direction","mergedProps","note_heads","style","modifierContext","getDots","change","action","Array","k","splitted","toUpperCase","octave","noteMap","parseNoteDurationString","drawFlag","RERR","glyph","getGlyph","render_flag","bounds","getNoteHeadBounds","x_begin","getNoteHeadBeginX","x_end","getNoteHeadEndX","flag","flag_x","flag_y","note_stem_height","stem","getHeight","Stem","DOWN","y_top","code_flag_downstem","y_bottom","code_flag_upstem","ctxFillStyle","openGroup","pointerBBox","applyStyle","getFlagStyle","render","restoreStyle","closeGroup","spacing_between_lines_px","start","getModifierStartXY","getCategory","getStemExtents","baseY","dot_x","radius","dot_y","y_shift","arc","PI","newBarNote","getType","getStave","currentEvents","newEvents","markBeginRepeatIndex","beginRepeatIndex","addRepeatEvents","REPEAT_BEGIN","REPEAT_END","REPEAT_BOTH","newClef","relativeMouseY","noteArea","round","toNoteName","baseNote","getBaseNote","baseNoteValue","desiredNoteValue","desiredNoteOctave","color","fontName","textAlign","textBaseline","showingTip","hideTip","fillText","menuButtonsImg","Image","src","onload","offset","drawingOffset","buttonWidth","buttonX","buttonY","Button","imageObj","positions","actions","tips","initialOffsetX","offSetX","offSetY","sourceX","sourceY","sourceWidth","sourceHeight","destWidth","destHeight","destX","destY","drawImage","tieButton","_vm","_h","$createElement","_c","_self","attrs","staticRenderFns","on","$event","drawer","staticClass","_v","$store","state","isUserLoggedIn","staticStyle","_s","notifications","logout","model","callback","$$v","expression","user","_e","messages","methods","dispatch","$router","computed","mounted","component","VAppBar","VAppBarNavIcon","VBtn","VIcon","VList","VListItem","VListItemGroup","VListItemIcon","VListItemTitle","VNavigationDrawer","VSpacer","VToolbarItems","VToolbar","VToolbarTitle","components","VApp","VMain","items","isLoading","search","scopedSlots","_u","fn","proxy","ref","item","go_to_course","_l","course","lessonInfo","Api","post","list","courseId","edit","put","delete","lessonId","subscribe","subscriptionInfo","getSubscriptionInfoOfStudent","userId","getSubscriptionInfoOfCourse","getAllTutors","Vue","use","Vuex","Store","strict","plugins","createPersistedState","token","userOwnedCourses","userSubscribedCourses","allTutors","allCourses","getters","isSubscribed","find","isOwned","mutations","resetState","assign","setToken","setUser","setNotifications","logIn","logOut","setAllTutors","tutors","setUserOwnedCourses","courses","setUserSubscribedCourses","setNav","bool","hideNav","setAllCourses","addCourse","deleteCourse","cid","Error","deleteAllLessons","stateCourse","lessons","addLesson","lesson","CourseId","deleteLesson","addExercise","payload","exercise","LessonId","exercises","commit","getAllCourses","CourseService","listAll","response","store","Promise","all","map","LessonService","editRhythm","lessonObj","newLesson","SubscriptionService","studentId","tutor","getCoursesForTutor","getCoursesForStudent","student","axios","baseURL","headers","Authorization","courseInfo","show","watch","VAutocomplete","VCard","VCardActions","VCardSubtitle","VCardText","VCardTitle","VCol","VContainer","VDivider","VImg","VListItemContent","VRow","register","nameRules","username","emailRules","email","passwordRules","password","role","loading","domProps","error","credentials","login","md","title","_t","Panel","VForm","VRadio","VRadioGroup","VTextField","avatar","VListItemAvatar","TutorId","Date","updatedAt","toLocaleString","year","month","day","is_student","price","toFixed","goToLesson","timeConverted","thread","posts","videoUrl","UserId","message","hour","minute","file","create_post","class","fullHeight","currLesson","opened","directives","rawName","useXml","lowPass","Tone","Filter","frequency","noise","NoiseSynth","volume","playbackRate","envelope","attack","decay","sustain","release","poly","PolySynth","Synth","oscillator","partials","freqEnv","started","player","time","forEach","element","Time","initiated","voices","v","env","FrequencyEnvelope","baseFrequency","Frequency","octaves","log2","releaseCurve","exponent","connect","toMaster","Player","load","bpm","createAndRecordSequence","audio","noRecord","Transport","notesToEvents","timeSigArr","Context","latencyHint","part","Part","triggerAttackRelease","totalNumBars","scheduleRepeat","restart","schedule","stop","cancel","actx","dest","createMediaStreamDestination","recorder","MediaRecorder","stream","chunks","ondataavailable","onstop","blob","Blob","URL","createObjectURL","generateRhythmString","rhythm","toString","noOfBars","join","generateRhythmsString","rhythms","parseRhythmString","str","strArr","obj","parseRhythmsString","cloneRhythms","newRhythm","cloneLesson","date","postInfo","instance","defaults","threadId","postId","hide","playbackBpm","numberOfBars","description","melody","useScore","videoHandler","timePerTwoBars","timePerBar","demoStartTime","demoEndTime","currentDisplayedBar","videoOsmd","from","to","timeUpdated","currBar","concat","drawScores","wrapper","setAttribute","background","right","vex","$refs","videoPlayer","offsetWidth","val","videoSrc","demoUrl","VSlider","threadInfo","lid","uid","getUnread","VideoPlayer","disable","save_btn_loading","add_btn_loading","dialog","requiredRules","grade","osmd","selected","bpm_label","no_bars","bars_label","go","isStudent","enable_save_btn","params","course_id","lesson_id","beforeDestroy","VAvatar","VChip","VExpansionPanel","VExpansionPanelContent","VExpansionPanelHeader","VExpansionPanels","VFileInput","VTextarea","recording","tab","new_name","new_duration","new_melody","durationRules","ShowLesson","num","hours","rhours","minutes","rminutes","edit_rhythm_name","name_editable","open_dialogue","created","VSheet","showCourse","validation","namePassed","priceRules","e1","languages","language","levels","level","instruments","instrument","goStepTwo","refInFor","$set","showVex","demoStartTimeRules","scoreOption","changeMelody","time_signatures","changeTimeSignature","goStepThree","video","videoPoster","demo","demoPoster","submit","exerciseInfo","exerciseId","musicXml","reviewVexHandlers","div","pannel","courseForm","validate","go_to_courses","demoVideo","VSelect","VStepper","VStepperContent","VStepperHeader","VStepperItems","VStepperStep","VSubheader","VSwitch","subscribedTutorsId","goToThread","unreadStudentPost","showThread","unreadTutorPost","threads","student_id","unreads","students","$route","currentThread","lesson_pos","adjustAspectRatioForFullScreen","aspectRatio","originalHeight","originalWidth","desiredHeight","videoHeight","videoWidth","paymentMethod","requestPaymentMethod","getClientToken","createTransaction","paymentInfo","createPaypalTransaction","getPaypalClientToken","createOrder","captureOrder","clientToken","dropinInstance","nonceObj","deviceData","transaction","togglePaymentMethod","loaded","paidFor","isEligible","orderId","setLoaded","paypal","Buttons","onApprove","onError","err","scoreLoading","VueRouter","routes","path","Home","Register","LogIn","Student","ShowCourse","CourseIndex","NewCourse","TutorIndex","Video","CoursesThreadsIndex","CourseThreadsIndex","ShowCourseThread","Payment","AdvancedPayment","OSMD","router","beforeEach","next","Vuetify","icons","values","custom_bpm","config","productionTip","vuetify","h","App","$mount"],"mappings":"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","file":"js/app.6eebb9de.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CourseThreadsIndex.vue?vue&type=style&index=0&id=5943e257&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CourseThreadsIndex.vue?vue&type=style&index=0&id=5943e257&scoped=true&lang=css&\"","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Payment.vue?vue&type=style&index=0&id=6a23dff3&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Payment.vue?vue&type=style&index=0&id=6a23dff3&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewCourse.vue?vue&type=style&index=0&id=706d71d0&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewCourse.vue?vue&type=style&index=0&id=706d71d0&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShowCourseThread.vue?vue&type=style&index=0&id=a5634c80&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShowCourseThread.vue?vue&type=style&index=0&id=a5634c80&scoped=true&lang=css&\""," /* eslint-disable */ \r\n\r\n// Handler until line 483 =================================================================================================================\r\n\r\nVex.UI = {};\r\n\r\nconst VF = Vex.Flow;\r\n\r\n//Vex UI -> User Interface for VexFlow\r\n/*\r\n * Vex.UI.Handler: this class is responsible for starting all the events needed for the VexFlow User Interface to work.\r\n */\r\nVex.UI.provisoryTickableStyle = {shadowBlur:0, shadowColor:'gray', fillStyle:'gray', strokeStyle:'gray'}; \r\nVex.UI.highlightNoteStyle = {shadowBlur:15, shadowColor:'red', fillStyle:'black', strokeStyle:'black'};\r\nVex.UI.defaultNoteStyle = {shadowBlur:0, shadowColor:'black', fillStyle:'black', strokeStyle:'black'};\r\nVex.UI.scale = 1.5;\r\n\r\nVex.UI.Handler = function (containerId, options, DOMNode){\r\n\tif (DOMNode) {\r\n\t\tthis.container = DOMNode;\r\n\t} else {\r\n\t\tthis.container = document.getElementById(containerId);\r\n\t}\r\n\r\n\t//Merge options with default options\r\n\tvar defaultOptions = {\r\n\t\tcanEdit: true,\r\n\t\tcanPlay: true,\r\n\t\tcanAddStaves: true,\r\n\t\tcanChangeNoteValue: true,\r\n\t\tshowToolbar: true,\r\n\t\tnumberOfStaves: 4,\r\n\t\tlessStaveHeight: false,\r\n\t\tcanvasProperties: {\r\n\t\t\tid: containerId + \"-canvas\",\r\n\t\t\twidth: window.innerWidth * 0.9,\r\n\t\t\ttabindex: 1\r\n\t\t}\r\n\t};\r\n\r\n\tthis.options = mergeProperties(defaultOptions, options || {});\r\n\tthis.canvas = this.createCanvas();\r\n\tthis.renderer = new Vex.Flow.Renderer(this.canvas, Vex.Flow.Renderer.Backends.CANVAS);\r\n\tthis.ctx = this.renderer.getContext();\r\n\tthis.staveList = this.createStaves();\r\n\tthis.ctx.scale(Vex.UI.scale, Vex.UI.scale);\r\n\r\n\t// if(this.options.showToolbar)\r\n\t// \tthis.toolbar = new Vex.UI.Toolbar(this);\r\n\r\n\tthis.currentNote = null;\r\n\tthis.currentStave = null;\r\n\t//Tickable that will follow the mouse position\r\n\tthis.provisoryTickable = null;\r\n\t\r\n\tthis.mouseListener = new Vex.UI.MouseListener(this, this.canvas, this.staveList);\r\n\t\r\n\t// this.keyboardListener = new Vex.UI.KeyboardListener(this, this.canvas, this.staveList);\r\n\t\r\n\tthis.noteMenu = new Vex.UI.NoteMenu(this, this.canvas, this.ctx);\r\n\tthis.noteMenu.init();\r\n\t\r\n\tthis.tipRenderer = new Vex.UI.TipRenderer(this.canvas);\r\n\tthis.tipRenderer.init();\r\n\t\r\n\t// this.player = new Vex.UI.Player(this, this.staveList);\r\n};\r\n\r\nVex.UI.Handler.prototype.numBars = 4;\r\nVex.UI.Handler.prototype.timeSignature = '4/4';\r\n\r\nVex.UI.Handler.prototype.createCanvas = function() {\r\n\tvar canvas = document.createElement('canvas');\r\n\t//Attach all properties to element\r\n\tvar props = Object.keys(this.options.canvasProperties);\r\n\tfor(var i = 0; i<props.length; i++){\r\n\t\tcanvas[props[i]] = this.options.canvasProperties[props[i]];\r\n\t}\r\n\tif (this.options.lessStaveHeight) {\r\n\t\tcanvas.height = 90 * Vex.UI.scale;\r\n\t} else {\r\n\t\tcanvas.height = 130 * Math.ceil(this.options.numberOfStaves / 2) * Vex.UI.scale;\r\n\t}\r\n\tthis.container.appendChild(canvas);\r\n\r\n\treturn canvas;\r\n};\r\n\r\nVex.UI.Handler.prototype.createStaves = function() {\r\n\tvar staveList = [];\r\n\tvar yPosition = 0;\r\n\tif (this.options.lessStaveHeight) \r\n\t\tyPosition = -20;\r\n\tvar widthOfStave = (this.canvas.width / Vex.UI.scale - 20) / 2\r\n\tfor(var i = 0; i < this.options.numberOfStaves; i++){\r\n\t\t//TODO make stave position more dinamic\r\n\t\tvar stave = {};\r\n\t\tif ((i + 1) % 2 == 0) {\r\n\t\t\tstave = new Vex.Flow.Stave(10 + widthOfStave, yPosition, widthOfStave);\r\n\t\t\tyPosition += 130;\r\n\t\t} else {\r\n\t\t\tstave = new Vex.Flow.Stave(10, yPosition, widthOfStave);\r\n\t\t\tstave.addClef(\"treble\").addTimeSignature('4/4');\r\n\t\t}\r\n\t\tstave.font = {\r\n      family: 'sans-serif',\r\n      size: 12,\r\n      weight: '',\r\n\t\t};\r\n\t\tstaveList.push(stave);\r\n\t\tstave.setContext(this.ctx);\r\n\t\t//Initially empty -> No Notes\r\n\t\t//TODO make it able to load notes\r\n\t\tstave.setTickables([]);\r\n\t}\r\n\r\n\treturn staveList;\r\n};\r\n\r\n\r\nVex.UI.Handler.prototype.init = function(editable = true) {\r\n\t//Draw everything\r\n\tthis.redraw();\r\n\r\n\tif(this.options.canEdit){\r\n\t\t//Start the Listeners\r\n\t\tthis.mouseListener.startListening();\r\n\t\t// this.keyboardListener.startListening();\r\n\t}\r\n\r\n\treturn this;\r\n};\r\n\r\nVex.UI.Handler.prototype.resize = function(width) {\r\n\t//Merge options with default options\r\n\tvar canvasProperties = {\r\n\t\tid: this.canvas.id,\r\n\t\twidth: width,\r\n\t\theight: this.canvas.height,\r\n\t\ttabindex: 1\r\n\t}\r\n\tthis.options.canvasProperties = canvasProperties\r\n\r\n\tvar canvas = document.createElement('canvas');\r\n\t//Attach all properties to element\r\n\tvar props = Object.keys(canvasProperties);\r\n\tfor(var i = 0; i<props.length; i++){\r\n\t\tcanvas[props[i]] = canvasProperties[props[i]];\r\n\t}\r\n\tthis.container.removeChild(this.container.childNodes[0]);\r\n\tthis.container.appendChild(canvas);\r\n\tthis.convas = canvas;\r\n\tthis.renderer = new Vex.Flow.Renderer(this.canvas, Vex.Flow.Renderer.Backends.CANVAS);\r\n\tthis.ctx = this.renderer.getContext();\r\n\tthis.staveList = this.createStaves();\r\n\tthis.ctx.scale(Vex.UI.scale, Vex.UI.scale);\r\n\r\n\tthis.currentNote = null;\r\n\tthis.currentStave = null;\r\n\t//Tickable that will follow the mouse position\r\n\tthis.provisoryTickable = null;\r\n\t\r\n\tthis.mouseListener = new Vex.UI.MouseListener(this, this.canvas, this.staveList);\r\n\t\r\n\t// this.keyboardListener = new Vex.UI.KeyboardListener(this, this.canvas, this.staveList);\r\n\t\r\n\tthis.noteMenu = new Vex.UI.NoteMenu(this, this.canvas, this.ctx);\r\n\tthis.noteMenu.init();\r\n\t\r\n\tthis.tipRenderer = new Vex.UI.TipRenderer(this.canvas);\r\n\tthis.tipRenderer.init();\r\n\r\n\tthis.redraw();\r\n\r\n\tif(this.options.canEdit){\r\n\t\t//Start the Listeners\r\n\t\tthis.mouseListener.startListening();\r\n\t\t// this.keyboardListener.startListening();\r\n\t}\r\n};\r\n\r\nVex.UI.Handler.prototype.redraw = function(notesInserted){\r\n\tthis.ctx.clear();\r\n\tthis.drawStaves();\r\n\tif (notesInserted) {\r\n\t\tthis.drawNotes(undefined, true);\r\n\t} else {\r\n\t\tthis.drawNotes();\r\n\t}\r\n};\r\n\r\nVex.UI.Handler.prototype.redrawStave = function(stave){\r\n\t//get stave bounding box\r\n\tvar box = stave.getBoundingBox();\r\n\t//TODO The +12 and +5 values are to erase part of a note that could be out of the bounding box. This values shouldn't be absolut. FIX!\t\r\n\t// this.ctx.clear();\r\n\t// this.drawStaves();\r\n\t// for(var i = 0; i < this.staveList.length; i++){\r\n\t// \tthis.drawNotes(this.staveList[i]);\r\n\t// }\r\n\tvar idx = this.staveList.indexOf(stave);\r\n\tif ((idx + 1) % 2 == 0) {\r\n\t\tthis.ctx.clearRect(box.getX(), box.getY(), box.getW() + 15, box.getH() + 5);\r\n\t} else {\r\n\t\tthis.ctx.clearRect(box.getX() - 15, box.getY(), box.getW() + 16, box.getH());\r\n\t}\r\n\tthis.drawStaves(stave, true);\r\n\tthis.drawNotes(stave);\r\n};\r\n\r\nVex.UI.Handler.prototype.drawStaves = function(stave){\r\n\tif (stave) {\r\n\t\tstave.draw();\r\n\t} else {\r\n\t\tfor(var i = 0; i < this.staveList.length; i++){\r\n\t\t\tthis.staveList[i].draw();\r\n\t\t}\r\n\t}\r\n};\r\n\r\nVex.UI.Handler.prototype.drawNotes = function(stave, notesInserted){\r\n\tif(stave === undefined){\r\n\t\t//Draw Notes on all staves\r\n\t\tfor(var i = 0; i < this.staveList.length; i++){\r\n\t\t\tthis.drawNotes(this.staveList[i], notesInserted);\r\n\t\t}\r\n\t} else {\r\n\t\t//Draw notes on Stave passed as Arg\r\n\t\tvar voice = new Vex.Flow.Voice(Vex.Flow.TIME4_4).setMode(Vex.Flow.Voice.Mode.SOFT);\r\n\t\t// disable strict timing, or else we won't be able to render BarNotes\r\n\t\tvoice.setStrict(false);\r\n\t\tvoice.addTickables(stave.getTickables());\r\n\t\t\r\n    var formatter = new Vex.Flow.Formatter();\r\n    if (stave.getTickables().length != 0) {\r\n\t\t\tformatter.joinVoices([voice]);\r\n\t\t\tformatter.formatToStave([voice], stave);\r\n\t\t\tvoice.draw(this.ctx, stave);\r\n\t\t\tif (notesInserted) {\r\n\t\t\t\tthis.drawBeams(stave, true);\r\n\t\t\t} else {\r\n\t\t\t\tthis.drawBeams(stave);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\nVex.UI.Handler.prototype.drawBeams = function(stave, notesInserted){\r\n\t// for(var i = 0; i < stave.getBeams().length; i++){\r\n\t// \tstave.getBeams()[i].setContext(this.ctx).draw();\r\n\t// }\r\n\t\r\n\tif (notesInserted || stave.beams == null) {\r\n\t\tstave.beams = Vex.Flow.Beam.generateBeams(stave.getTickables());\r\n\t}\r\n\r\n\tfor (var i = 0; i < stave.beams.length; i ++) {\r\n\t\tstave.beams[i].setContext(this.ctx).draw();\r\n\t}\r\n};\r\n\r\n\r\nVex.UI.Handler.prototype.updateProvisoryKey = function(mousePos){\r\n\t\r\n\tif(this.provisoryTickable==null){\r\n\t\tthis.provisoryTickable = new Vex.Flow.StaveNote({keys: [\"d/4\"], duration: \"4\"});\t\t\r\n\t}\r\n\r\n\t\r\n\t\r\n\tif(this.currentStave!=null){\r\n\t\tif(!(this.provisoryTickable instanceof Vex.Flow.StaveNote) || this.provisoryTickable.noteType == \"r\"){\r\n\t\t\t//No need to update key if its not a note or if its a rest, just draw the tickable in the new mouse position\r\n\t\t}\r\n\t\telse{\r\n\t\t\tvar noteName = NoteMap.getNoteName(this.currentStave, mousePos);\r\n\t\t\tif(noteName != this.provisoryTickable.keys[0]){\r\n\t\t\t\t\r\n\t\t\t\tthis.provisoryTickable = this.provisoryTickable.clone({keys: [noteName]});\r\n\t\t\t\tif(this.provisoryTickable !== undefined){\r\n\t\t\t\t\tthis.provisoryTickable.setStyle(Vex.UI.provisoryTickableStyle);\r\n\t\t\t\t}\r\n\t\t\t\t//Since we have a new note key, update the stem direction\r\n\t\t\t\tthis.provisoryTickable.setStemDirection(getStemDirection(this.currentStave, mousePos.y));\r\n\t\t\t\tthis.provisoryTickable.setStave(this.currentStave);\r\n\t\t\t\tthis.provisoryTickable.setTickContext(new Vex.Flow.TickContext());\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.drawProvisoryTickable(mousePos);\r\n\t\t\r\n\t}\r\n\t\r\n};\r\n\r\nVex.UI.Handler.prototype.updateProvisoryDuration = function(newDur){\r\n\tvar x_shift = null;\r\n\tif(this.provisoryTickable)\r\n\t\tx_shift = this.provisoryTickable.x_shift;\r\n\tthis.provisoryTickable = this.provisoryTickable.clone({duration: newDur});\r\n\tif(x_shift)\r\n\t\tthis.provisoryTickable.x_shift = x_shift;\r\n\tthis.provisoryTickable.setStave(this.currentStave || this.staveList[0]);\r\n\tthis.provisoryTickable.setTickContext(new Vex.Flow.TickContext());\r\n\tthis.drawProvisoryTickable();\r\n\t\r\n};\r\n\r\nVex.UI.Handler.prototype.updateProvisoryType = function(newType){\r\n\tvar x_shift = null;\r\n\tif(this.provisoryTickable)\r\n\t\tx_shift = this.provisoryTickable.x_shift;\r\n\t\r\n\tswitch(newType){\r\n\tcase Vex.UI.TickableType.NOTE:\r\n\t\tthis.provisoryTickable = new Vex.Flow.StaveNote({keys: [\"d/4\"], duration: \"4\" });\r\n\t\tbreak;\r\n\tcase Vex.UI.TickableType.REST:\r\n\t\tvar duration = \"4\";//TODO make it more configurable, or at least dinamic\r\n\t\tif(this.provisoryTickable)\r\n\t\t\tduration = this.provisoryTickable.duration;\r\n\t\tthis.provisoryTickable = new Vex.Flow.StaveNote({ keys: [\"b/4\"], duration: duration + \"r\" });\r\n\t\tbreak;\r\n\tcase Vex.UI.TickableType.BAR:\r\n\t\tthis.provisoryTickable = new Vex.Flow.BarNote();\r\n\t\tbreak;\r\n\tcase Vex.UI.TickableType.CLEF:\r\n\t\tthis.provisoryTickable = new Vex.Flow.ClefNote(\"treble\");\r\n\t\tthis.provisoryTickable.clefKey = \"treble\";\r\n\t\tbreak;\r\n\t}\r\n\t\r\n\t//TODO Maybe this code below shouldn't be here... should we really draw in this method?\r\n\tthis.provisoryTickable.setStave(this.currentStave || this.staveList[0]);\r\n\tthis.provisoryTickable.setTickContext(new Vex.Flow.TickContext());\r\n\tif(this.provisoryTickable.setStyle !== undefined)\r\n\t\tthis.provisoryTickable.setStyle(Vex.UI.provisoryTickableStyle);\r\n\tif(x_shift)\r\n\t\tthis.provisoryTickable.x_shift = x_shift;\r\n\t\r\n\tthis.drawProvisoryTickable();\r\n};\r\n\r\nVex.UI.Handler.prototype.drawProvisoryTickable = function(mousePos){\r\n\t\r\n\tif(this.provisoryTickable && this.currentStave!=null){\r\n\t\t//console.log('hey----------', this.provisoryTickable)\r\n\t\tthis.redrawStave(this.currentStave);\r\n\t\tif(mousePos!==undefined){\r\n\t\t\tif(this.provisoryTickable instanceof Vex.Flow.StaveNote){\r\n\t\t\t\t//Fix X position to set exactly where the mouse is\r\n\t\t\t\t//TODO the -5 value shouldnt be absolute! it should reflect half the note's Width\r\n\t\t\t\tthis.provisoryTickable.x_shift= mousePos.x - this.provisoryTickable.getAbsoluteX() - 5;\r\n\r\n\t\t\t}else if (this.provisoryTickable instanceof Vex.Flow.BarNote){// if(this.provisoryTickable instanceof Vex.Flow.BarNote){\r\n\t\t\t\tconst barline = new Vex.Flow.Barline(1);\r\n\t\t\t\t// barline.setX(mousePos.x \r\n\t\t\t\t// \t- this.currentStave.getNoteStartX() \r\n\t\t\t\t// \t- this.provisoryTickable.render_options.stave_padding);\r\n\t\t\t\tbarline.setX(mousePos.x);\r\n\t\t\t\tbarline.draw(this.currentStave);\r\n\t\t\t} else {\r\n\t\t\t\tthis.provisoryTickable.getTickContext().setX(\r\n\t\t\t\t\tmousePos.x \r\n\t\t\t\t\t- this.currentStave.getNoteStartX()\r\n\t\t\t\t\t- this.provisoryTickable.render_options.stave_padding\r\n\t\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t\t//Only draw Provisory note if not on a definitive note\r\n\t\tif(this.currentNote==null){\r\n\t\t\tvar tempFillStyle = this.ctx.fillStyle;\r\n\t\t\tvar tempStrokeStyle = this.ctx.strokeStyle;\r\n\t\t\tthis.ctx.fillStyle = 'gray';\r\n\t\t\tthis.ctx.strokeStyle = 'gray';\r\n\r\n\t\t\tif (this.provisoryTickable instanceof Vex.Flow.BarNote) {\r\n\t\t\t\t//this.provisoryTickable.draw();\r\n\t\t\t} else {\r\n\t\t\t\tthis.provisoryTickable.draw();\r\n\t\t\t}\r\n\r\n\t\t\tthis.ctx.fillStyle = tempFillStyle;\r\n\t\t\tthis.ctx.strokeStyle = tempStrokeStyle;\r\n\r\n\t\t}\t\r\n\t}\r\n\t\r\n};\r\n\r\n// Menu management\r\nVex.UI.Handler.prototype.openMenuForKey = function(keyName, mousePos){\r\n\t//We will open a new Menu: stop listening to the StaveMouseListener\r\n\tthis.mouseListener.stopListening();\r\n\tthis.noteMenu.setNote(this.currentNote);\r\n\tthis.noteMenu.setKeyIndex(this.currentNote.indexOfKey(keyName));\r\n\tthis.noteMenu.open(mousePos);\r\n};\r\n\r\n/**\r\n * This method is called by NoteMenu on close()\r\n */\r\nVex.UI.Handler.prototype.noteMenuClosed = function(){\r\n\t//Redraw the whole canvas\r\n\tthis.redraw();\r\n\t//Resume listening the the mouse\r\n\tthis.mouseListener.startListening();\r\n};\r\n\r\nVex.UI.Handler.prototype.addAccidentalToNote = function(name, note, index){\r\n\tif(index === undefined || index == -1)\r\n\t\tindex = 0;\r\n\t\r\n\tvar accidental = new Vex.Flow.Accidental(name);\r\n\tnote.addAccidental(index, accidental);\r\n};\r\n\r\n//Dots were moving up when the key is over a line. between lines works fine.\r\n//Error provoked by modifiercontext.js on line 356 (or vexflow-min.js line 4007)\r\n//Changed the line on min.js to stop shifting the dot when over a line to avoid the problem.\r\nVex.UI.Handler.prototype.addDotToNote = function(note){\r\n\tif (note.dots == 0) \r\n\t\tnote.addDotToAll();\r\n};\r\n\r\n//TODO Only create a new beam with next note if there isnt a beam already. Otherwise, merge beam or add note to beam.\r\nVex.UI.Handler.prototype.beamWithNextNote = function(note){\r\n\tvar nextNote = this.currentStave.getNextNote(note);\r\n\t\r\n\tif(nextNote != null) {\r\n\t\t//Set the note array\r\n\t\t\r\n\t\tnotes = [note, nextNote];\r\n\t\t\r\n\t\tnextNote.setStemDirection(note.getStemDirection());\r\n\t\t//Create beam\r\n\t\tvar beam = new Vex.Flow.Beam(notes);\r\n\t\t\r\n\t\tthis.currentStave.pushBeam(beam);\r\n\t}\r\n};\r\n\r\nVex.UI.Handler.prototype.deleteNote = function(note){\r\n\tfor(var i = 0; i < this.staveList.length; i++){\r\n\t\tvar notes = this.staveList[i].getNotes();\r\n\t\tvar referenceIndex = notes.indexOf(note);\r\n\r\n\t\tif(referenceIndex > -1){\r\n\t\t\tthis.staveList[i].removeTickable(note);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nVex.UI.Handler.prototype.exportNotes = function() {\r\n\tvar result = [];\r\n\tfor(var i = 0; i < this.staveList.length; i++){\r\n\t\tfor(var j = 0; j < this.staveList[i].getTickables().length; j++){\r\n\t\t\tvar note = this.staveList[i].getTickables()[j];\r\n\t\t\tif (note instanceof Vex.Flow.StaveNote) {\r\n\t\t\t\tvar dur = note.duration;\r\n\t\t\t\tvar key = note.keys[0];\r\n\t\t\t\tvar dot = note.dots;\r\n\t\t\t\tvar noteType = note.noteType;\r\n\t\t\t\tvar temp = key + \"/\" + dur;\r\n\t\t\t\tif (noteType == \"r\") {\r\n\t\t\t\t\ttemp += \"r\";\r\n\t\t\t\t}\r\n\t\t\t\tif (dot == 1) {\r\n\t\t\t\t\ttemp += \"d\";\r\n\t\t\t\t}\r\n\t\t\t\tresult.push(temp);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn result;\r\n};\r\n\r\nVex.UI.Handler.prototype.importNotes = function(notes, timeSignature) {\r\n\tif (notes && timeSignature) {\r\n\t\tvar tickables = []\r\n\t\tvar barNum = 0\r\n\t\tvar barDuration = eval(timeSignature)\r\n\t\tvar accumDuration = 0\r\n\t\r\n\t\tfor (var j = 0; j < this.staveList.length; j++) {\r\n\t\t\tthis.staveList[j].setTickables([])\r\n\t\t}\r\n\t\r\n\t\tfor (var i = 0; i < notes.length && barNum < this.staveList.length; i++) {\r\n\t\t\tvar noteArr = notes[i].split('/')\r\n\t\t\tvar dur = noteArr[2]\r\n\t\t\tvar isDot = false\r\n\t\t\tvar isRest = false\r\n\t\t\tif (dur.includes(\"r\")) {\r\n\t\t\t\tdur = dur.replace(\"r\", \"\");\r\n\t\t\t\tisRest = true\r\n\t\t\t}\r\n\t\t\tif (dur.includes(\"d\")) {\r\n\t\t\t\tdur = dur.replace(\"d\", \"\");\r\n\t\t\t\tisDot = true;\r\n\t\t\t}\r\n\t\t\tvar staveNote = new Vex.Flow.StaveNote({clef: \"treble\", keys: [noteArr[0] + '/' + noteArr[1]], duration: isRest ? dur + 'r' : dur })\r\n\t\t\tstaveNote.autoStem()\r\n\t\t\tstaveNote.setStyle(Vex.UI.defaultNoteStyle);\r\n\t\t\tstaveNote.setTickContext(new Vex.Flow.TickContext());\r\n\t\t\tdur = 1 / parseInt(dur)\r\n\t\t\tif (isDot) {\r\n\t\t\t\tdur = dur * 1.5\r\n\t\t\t\tstaveNote.addDotToAll()\r\n\t\t\t}\r\n\t\r\n\t\t\tif (accumDuration + dur > barDuration) {\r\n\t\t\t\tthis.staveList[barNum].setTickables(tickables)\r\n\t\t\t\ttickables = []\r\n\t\t\t\tbarNum++\r\n\t\t\t\taccumDuration = dur\r\n\t\t\t} else {\r\n\t\t\t\taccumDuration += dur\r\n\t\t\t}\r\n\t\t\tif (barNum < this.staveList.length)\r\n\t\t\t\tstaveNote.setStave(this.staveList[barNum])\r\n\t\r\n\t\t\ttickables.push(staveNote)\r\n\t\t}\r\n\t\t\r\n\t\tif (tickables.length > 0 && barNum + 1 <= this.options.numberOfStaves) {\r\n\t\t\tthis.staveList[barNum].setTickables(tickables)\r\n\t\t}\r\n\r\n\t\tfor (var j = 0; j < this.staveList.length; j++) {\r\n\t\t\tthis.drawBeams(this.staveList[j], true);\r\n\t\t}\r\n\t\tthis.redraw()\r\n\t}\r\n};\r\n\r\nVex.UI.Handler.prototype.notesToBars = function (notes, timeSignature) {\r\n\tif (notes && timeSignature) {\r\n\t\tvar tickables = []\r\n\t\tvar barNum = 0\r\n\t\tvar barDuration = eval(timeSignature)\r\n\t\tvar accumDuration = 0\r\n\t\tvar notesInBars = []\r\n\t\r\n\t\tfor (var i = 0; i < notes.length; i++) {\r\n\t\t\tvar noteArr = notes[i].split('/')\r\n\t\t\tvar dur = noteArr[2]\r\n\t\t\tvar isDot = false\r\n\t\t\tif (dur.includes(\"r\")) {\r\n\t\t\t\tdur = dur.replace(\"r\", \"\");\r\n\t\t\t}\r\n\t\t\tif (dur.includes(\"d\")) {\r\n\t\t\t\tdur = dur.replace(\"d\", \"\");\r\n\t\t\t\tisDot = true;\r\n\t\t\t}\r\n\r\n\t\t\tdur = 1 / parseInt(dur)\r\n\t\t\tif (isDot) {\r\n\t\t\t\tdur = dur * 1.5\r\n\t\t\t\tstaveNote.addDotToAll()\r\n\t\t\t}\r\n\t\r\n\t\t\tif (accumDuration + dur > barDuration) {\r\n\t\t\t\tnotesInBars.push(tickables)\r\n\t\t\t\ttickables = []\r\n\t\t\t\tbarNum++\r\n\t\t\t\taccumDuration = dur\r\n\t\t\t} else if (accumDuration + dur == barDuration) {\r\n\t\t\t\tif (i == notes.length - 1) {\r\n\t\t\t\t\ttickables.push(notes[i])\r\n\t\t\t\t\tnotesInBars.push(tickables)\r\n\t\t\t\t\tbarNum++\r\n\t\t\t\t\treturn notesInBars\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\taccumDuration += dur\r\n\t\t\t}\r\n\t\r\n\t\t\ttickables.push(notes[i])\r\n\t\t}\r\n\t\t\r\n\t\tif (tickables.length > 0 && barNum + 1 <= this.options.numberOfStaves) {\r\n\t\t\tnotesInBars.push(tickables)\r\n\t\t}\r\n\r\n\t\treturn notesInBars\r\n\t}\r\n}\r\n\r\nVex.UI.Handler.prototype.changeBars = function(newNumBars) {\r\n\t//console.log(\"newBar\", newNumBars);\r\n\tif (newNumBars > this.numBars) {\r\n\t\tfor (var j = this.numBars; j < newNumBars; j ++) {\r\n\t\t\tthis.staveList[j].setTickables([]);\r\n\t\t\tthis.staveList[j].usable = true;\r\n\t\t}\r\n\t\tthis.redraw();\r\n\t} else if (newNumBars < this.numBars) {\r\n\t\tvar tickables = [];\r\n\t\tvar durationOfRest = this.timeSignature.split('/')[1] + 'r';\r\n\t\tfor (var i = 0; i < parseInt(this.timeSignature.split('/')[0]); i++) {\r\n\t\t\ttickables.push(new Vex.Flow.StaveNote({clef: \"treble\", keys: [\"b/4\"], duration: durationOfRest }));\r\n\t\t}\r\n\t\t// loop through to fill up the empty bars with rest\r\n\t\tfor (var j = newNumBars; j < this.staveList.length; j ++) {\r\n\t\t\tthis.staveList[j].setTickables(tickables);\r\n\t\t\tthis.staveList[j].usable = false;\r\n\t\t}\r\n\t\tthis.redraw();\r\n\t} else {\r\n\t\t// do nothing cuz no change\r\n\t}\r\n\r\n\tthis.numBars = newNumBars;\r\n};\r\n\r\nVex.UI.Handler.prototype.setTimeSignature = function(timeSignature) {\r\n\tfor(var i = 0; i < this.staveList.length; i++){\r\n\t\tif ((i + 1) % 2 == 1) \r\n\t\t\tthis.staveList[i].setTimeSignature(timeSignature);\r\n\t}\r\n\tthis.timeSignature = timeSignature;\r\n\tthis.redraw();\r\n};\r\n\r\nVex.UI.Handler.prototype.highlightNote = function(idx) {\r\n\tif (idx == 0) {\r\n\t\tthis.staveList[0].getTickables()[0].setHighlight(true);\r\n\t\tthis.redraw();\r\n\t} else {\r\n\t\tvar currStave = 0;\r\n\t\tvar currNumNotes = this.staveList[currStave].getTickables().length;\r\n\t\twhile (idx > currNumNotes) {\r\n\t\t\tidx -= currNumNotes;\r\n\t\t\tcurrStave ++;\r\n\t\t\tcurrNumNotes = this.staveList[currStave].getTickables().length;\r\n\t\t}\r\n\t\tif (currNumNotes > idx)\r\n\t\t\tthis.staveList[currStave].getTickables()[idx].setHighlight(true);\r\n\t\t\tthis.redraw();\r\n\t}\r\n};\r\n\r\nVex.UI.Handler.prototype.changeNumberOfBars = function (newNumberOfBars, notes) {\r\n\tconsole.log('called')\r\n\tthis.container.removeChild(this.container.lastElementChild);\r\n\t//Merge options with default options\r\n\tvar options = {\r\n\t\tnumberOfStaves: newNumberOfBars\r\n\t};\r\n\r\n\tthis.options = mergeProperties(this.options, options || {});\r\n\tthis.canvas = this.createCanvas();\r\n\tthis.renderer = new Vex.Flow.Renderer(this.canvas, Vex.Flow.Renderer.Backends.CANVAS);\r\n\tthis.ctx = this.renderer.getContext();\r\n\tthis.staveList = this.createStaves();\r\n\tthis.ctx.scale(Vex.UI.scale, Vex.UI.scale);\r\n\r\n\t// if(this.options.showToolbar)\r\n\t// \tthis.toolbar = new Vex.UI.Toolbar(this);\r\n\r\n\tthis.currentNote = null;\r\n\tthis.currentStave = null;\r\n\t//Tickable that will follow the mouse position\r\n\tthis.provisoryTickable = null;\r\n\t\r\n\tthis.mouseListener = new Vex.UI.MouseListener(this, this.canvas, this.staveList);\r\n\t\r\n\t// this.keyboardListener = new Vex.UI.KeyboardListener(this, this.canvas, this.staveList);\r\n\t\r\n\tthis.noteMenu = new Vex.UI.NoteMenu(this, this.canvas, this.ctx);\r\n\tthis.noteMenu.init();\r\n\t\r\n\tthis.tipRenderer = new Vex.UI.TipRenderer(this.canvas);\r\n\tthis.tipRenderer.init();\r\n\r\n\tthis.init()\r\n\tthis.importNotes(notes, this.timeSignature)\r\n}\r\n\r\n// Vex.UI.Handler.prototype.disableEdit = function() {\r\n// \tfor (var i = 0; i < this.staveList.length; i++) {\r\n// \t\tthis.staveList[i].usable = false;\r\n// \t}\r\n// };\r\n\r\n// Vex.UI.Handler.prototype.enableEdit = function() {\r\n// \tfor (var i = 0; i < this.staveList.length; i++) {\r\n// \t\tthis.staveList[i].usable = true;\r\n// \t}\r\n// };\r\n\r\n\r\n// NoteMenu until line 755 ===============================================================================================================\r\n\r\nVex.UI.NoteMenu = function (handler, canvas, ctx) {\r\n\tthis.handler = handler;\r\n\tthis.canvas = canvas;\r\n\tthis.ctx = ctx;\r\n\tthis.note=null;\r\n\tthis.keyIndex = null;\r\n\tthis.panelProps = null;\r\n\tthis.buttons = [];\r\n\tthis.accidentals = ['doubleFlat', 'flat', 'natural', 'sharp', 'doubleSharp'];\r\n\tthis.canRender = false;\r\n\tthis.currentButton = null;\r\n\tthis.buttonRenderer = new Vex.UI.NoteMenuButtonRenderer();\r\n};\r\n\r\nVex.UI.NoteMenu.prototype.init = function() {\r\n  // nothing to do atm\r\n}\r\n\r\nVex.UI.NoteMenu.prototype.setTipArea = function() {\r\n\tvar leftPadding = 5;\r\n\tvar rightPadding = 5;\r\n\tvar bottomPadding = 5;\r\n\tvar fontSize = 10;//in pixels\r\n\t\r\n\t\r\n\t//Getting the dimensions of the bounding box\r\n\tvar _x = this.panelProps.x + leftPadding; //5 pixels right of the beginning of the panel\r\n\tvar _y = this.panelProps.bottomY - bottomPadding - fontSize; //15 pixels before the end of the panel (vertically)\r\n\tvar _width = this.panelProps.width - leftPadding - rightPadding;\r\n\tvar _height = fontSize - bottomPadding;\r\n\t\r\n\tthis.handler.tipRenderer.boundingBox = {x: _x, y: _y, width: _width, height: _height};\r\n\tthis.handler.tipRenderer.backgroundColor = this.panelProps.backgroundColor;\r\n};\r\n\r\nVex.UI.NoteMenu.prototype.open = function(mousePos){\r\n\t\r\n\tthis.panelProps = this.drawMenuPanel(mousePos);\r\n\tthis.buttonRenderer.panel = this.panelProps;\r\n\tthis.buttonRenderer.context = this.ctx;\r\n\r\n\tif(this.buttonRenderer.ready){\r\n\t\tthis.drawButtons();\r\n\t\tthis.canvas.addEventListener('mouseup', this, false);\r\n\t\tthis.canvas.addEventListener('mousemove', this, false);\r\n\t\tthis.canvas.addEventListener('contextmenu', this, false);\r\n\t\tthis.setTipArea();\t\r\n\t}\r\n\r\n};\r\n\r\nVex.UI.NoteMenu.prototype.close = function(){\r\n\tthis.buttons = [];\r\n\tthis.currentButton = null;\r\n\tthis.canvas.removeEventListener('mouseup', this, false);\r\n\tthis.canvas.removeEventListener('mousemove', this, false);\r\n\tthis.canvas.removeEventListener('contextmenu', this, false);\r\n\t//Notify the handler that the panel was closed, so that the usual behavior can resume\r\n\tthis.handler.noteMenuClosed();\r\n};\r\n\r\nVex.UI.NoteMenu.prototype.handleEvent = function(evt){\r\n\tevt.preventDefault();\r\n\tswitch(evt.type) {\r\n\t\tcase \"mouseup\":\r\n\t\t\tthis.handleMouseClick(evt);\r\n\t\t\tbreak;\r\n\t\tcase \"mousemove\":\r\n\t\t\tthis.handleMouseMove(evt);\r\n\t\t\tbreak;\r\n\t}\r\n};\r\n\r\nVex.UI.NoteMenu.prototype.setNote = function(note){\r\n\tthis.note=note;\r\n};\r\n\r\nVex.UI.NoteMenu.prototype.setKeyIndex = function(index){\r\n\tthis.keyIndex=index;\r\n};\r\n\r\n\r\n/**\r\n * Draws the panel that will hold the buttons for modifying the note key.\r\n * @param mousePos\r\n * @returns a properties object of the panel.\r\n */\r\nVex.UI.NoteMenu.prototype.drawMenuPanel = function(mousePos) {\r\n\tvar canvas = this.canvas;\r\n\tvar panelWidth = 200;\r\n\tvar panelHeight = 100;\r\n\tvar panelX = mousePos.x + 30; // 30 - chosen offset\r\n\tvar panelY = mousePos.y;\r\n\tvar panelPosition = 'right'; //relative to the key\r\n\t\r\n\t//Check if the panel fits in X Axis\r\n\tif((panelX + panelWidth) * Vex.UI.scale > canvas.width){\r\n\t\t//Reposition panel X to fit canvas - repositioning it to be 30 pixels left from key\r\n\t\tpanelX = mousePos.x - panelWidth - 30; //30 - chosen offset\r\n\t\t\r\n\t\tpanelPosition = 'left';\r\n\t}\r\n\t\r\n\t// console.log(\"pannelY\", panelY);\r\n\t// console.log(\"canvas height\", canvas.height);\r\n\t//Check if the panel fits in Y Axis\r\n\tif((panelY + panelHeight) * Vex.UI.scale > canvas.height){\r\n\t\t//Reposition panel Y to fit canvas\r\n\t\tpanelY = (canvas.height / Vex.UI.scale) - panelHeight - 10; //10 - chosen offset\r\n\t}\r\n\t\r\n\t//Draw the Panel.\r\n\tvar context = this.ctx;\r\n\r\n    context.beginPath();\r\n    context.rect(panelX, panelY, panelWidth, panelHeight);\r\n    context.fillStyle = '#ddc';\r\n    context.fill();\r\n    context.lineWidth = 3;\r\n    context.strokeStyle = 'black';\r\n    context.stroke();\r\n    \r\n    \r\n    //Draw a line to link the panel to the key\r\n    context.beginPath();\r\n    context.moveTo(mousePos.x, mousePos.y);\r\n    if(panelPosition == 'right')\r\n    \tcontext.lineTo(panelX, panelY);\r\n    else\r\n    \tcontext.lineTo(panelX + panelWidth, panelY);\r\n    context.stroke();\r\n    \r\n    return {\r\n    \twidth: panelWidth,\r\n    \theight: panelHeight,\r\n    \tx: panelX,\r\n    \ty: panelY,\r\n    \trightX: panelX + panelWidth,\r\n    \tbottomY: panelY + panelHeight,\r\n    \tbackgroundColor: '#ddc',\r\n    \tposition: panelPosition\r\n    };\r\n};\r\n\r\n\r\nVex.UI.NoteMenu.prototype.drawButtons = function(){\r\n\t\r\n\t//Close button\r\n\tthis.buttons.push(this.buttonRenderer.closeButton());\r\n\t\r\n\t//Accidentals buttons\r\n\tfor(var i = 0; i < this.accidentals.length; i++){\r\n\t\tthis.buttons.push(this.buttonRenderer.accidentalButton(i));\r\n\t}\r\n\t\r\n\t//Dot button\r\n\tthis.buttons.push(this.buttonRenderer.dotButton());\r\n\t\r\n\t//Beam button\r\n\tthis.buttons.push(this.buttonRenderer.beamButton());\r\n\r\n\t//Tie button\r\n\t//this.buttons.push(this.buttonRenderer.tieButton());\r\n\t\r\n\t//Delete button\r\n\tthis.buttons.push(this.buttonRenderer.deleteButton());\r\n};\r\n\r\nVex.UI.NoteMenu.prototype.handleMouseClick = function(evt){\r\n\tif(evt.button == 0){//Left Button\r\n\t\t//get mouse position\r\n\t\tvar mousePos = getMousePositionInCanvas(this.canvas, evt);\r\n\t\t\r\n\t\t//if clicked in one of the buttons, then call the action for that button\r\n\t\tfor(var i = 0; i<this.buttons.length; i++){\r\n\t\t\tvar button = this.buttons[i];\r\n\t\t\tif(isCursorWithinRectangle(button.props.x, button.props.y, button.props.width, button.props.height, mousePos.x, mousePos.y)){\r\n\t\t\t\t//call button action.\r\n\r\n\t\t\t\tbutton.callAction(this);\r\n\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\t\t\r\n\t}\r\n};\r\n\r\nVex.UI.NoteMenu.prototype.handleMouseMove = function(evt){\r\n\t//get mouse position\r\n\tvar mousePos = getMousePositionInCanvas(this.canvas, evt);\r\n\t\r\n\tfor(var i = 0; i<this.buttons.length; i++){\r\n\t\tvar button =  this.buttons[i];\r\n\t\t\r\n\t\tif(isCursorWithinRectangle(button.props.x, button.props.y, button.props.width, button.props.height, mousePos.x, mousePos.y)){\r\n\t\t\t//cursor is in this button\r\n\t\t\t//check if already current button\r\n\t\t\tif(this.currentButton == null || this.currentButton != button){\r\n\t\t\t\t\r\n\t\t\t\t//It isnt! change the current button to normal, and highlight the new button\r\n\t\t\t\t\r\n\t\t\t\tif(this.currentButton !=null)\r\n\t\t\t\t\tthis.currentButton.highlight(this.canvas, null, this.currentButton);\r\n\t\t\t\t\r\n\t\t\t\t//Highlight new button\r\n\t\t\t\t\r\n\t\t\t\tthis.currentButton = button;\r\n\t\t\t\t//highlight the button\r\n\t\t\t\tthis.currentButton.highlight(this.canvas, 'yellow', this.currentButton);\r\n\t\t\t\tthis.handler.tipRenderer.showTip(this.currentButton.props.tip);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t} else {\r\n\t\t\t//it isnt in this button, make sure it isnt highlighted\r\n\t\t\tbutton.highlight(this.canvas, null, button);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n};\r\n\r\nVex.UI.NoteMenu.prototype.addDoubleFlat = function(){\r\n\tthis.handler.addAccidentalToNote(\"bb\", this.note, this.keyIndex);\r\n\tthis.close();\r\n};\r\n\r\nVex.UI.NoteMenu.prototype.addFlat = function(){\r\n\tthis.handler.addAccidentalToNote(\"b\", this.note, this.keyIndex);\r\n\tthis.close();\r\n};\r\n\r\nVex.UI.NoteMenu.prototype.addNatural = function(){\r\n\tthis.handler.addAccidentalToNote(\"n\", this.note, this.keyIndex);\r\n\tthis.close();\r\n};\r\n\r\nVex.UI.NoteMenu.prototype.addSharp = function(){\r\n\tthis.handler.addAccidentalToNote(\"#\", this.note, this.keyIndex);\r\n\tthis.close();\r\n};\r\n\r\nVex.UI.NoteMenu.prototype.addDoubleSharp = function(){\r\n\tthis.handler.addAccidentalToNote(\"##\", this.note, this.keyIndex);\r\n\tthis.close();\r\n};\r\n\r\nVex.UI.NoteMenu.prototype.addDot = function(){\r\n\tconsole.log('got here')\r\n\tthis.handler.addDotToNote(this.note);\r\n\tthis.close();\r\n};\r\n\r\n\r\nVex.UI.NoteMenu.prototype.addBeam = function(){\r\n\tthis.handler.beamWithNextNote(this.note);\r\n\tthis.close();\r\n};\r\n\r\n\r\nVex.UI.NoteMenu.prototype.deleteNote = function(){\r\n\tthis.handler.deleteNote(this.note);\r\n\tthis.close();\r\n}\r\n\r\n// MouseListener until line 1027 ==========================================================================================================\r\n\r\n/*\r\n * Vex.UI.MouseListener: this class is responsible for handling all mouse events performed by the user within the canvas\r\n */\r\n\r\nVex.UI.MouseListener = function(handler, canvas, staveList) {\r\n\tthis.handler = handler;\r\n\tthis.canvas = canvas;\r\n\tthis.staveList = staveList;\r\n};\r\n\r\n\r\nVex.UI.MouseListener.prototype.handleEvent = function(evt){\r\n\tevt.preventDefault();\r\n\tswitch(evt.type) {\r\n\t\tcase \"mouseup\":\r\n\t\t\tthis.handleMouseClick(evt);\r\n\t\t\tbreak;\r\n\t\tcase \"mousemove\":\r\n\t\t\tthis.handleMouseOver(evt);\r\n\t\t\tbreak;\r\n\t\tcase \"wheel\":\r\n\t\t\tthis.handleMouseWheel(evt);\r\n\t\t\tbreak;\r\n\t\tcase \"contextmenu\":\r\n\t\t\tthis.handleRightMouseClick(evt);\r\n\t\t\tbreak;\r\n\t\tcase \"mouseleave\":\r\n\t\t\tthis.handleMouseLeave(evt);\r\n\t\t\tbreak;\r\n\t}\r\n};\r\n\r\nVex.UI.MouseListener.prototype.startListening = function(){\r\n\tthis.canvas.addEventListener('mouseup', this, false);\r\n\tthis.canvas.addEventListener('mousemove', this, false);\r\n\tthis.canvas.addEventListener('wheel', this, false);\r\n\tthis.canvas.addEventListener('contextmenu', this, false);\r\n\tthis.canvas.addEventListener(\"mouseleave\", this, false);\r\n};\r\n\r\nVex.UI.MouseListener.prototype.stopListening = function(){\r\n\tthis.canvas.removeEventListener('mouseup', this, false);\r\n\tthis.canvas.removeEventListener('mousemove', this, false);\r\n\tthis.canvas.removeEventListener('wheel', this, false);\r\n\tthis.canvas.removeEventListener('contextmenu', this, false);\r\n\tthis.canvas.removeEventListener(\"mouseleave\", this, false);\r\n};\r\n\r\nVex.UI.MouseListener.prototype.handleMouseLeave = function(evt){\r\n\t// console.log(\"in mouseleave\")\r\n\t// if(this.handler.currentNote != null){\r\n\t// \tconsole.log(this.handler.currentNote);\r\n\t// \tvar idx = this.currentStave.getTickables().indexOf(this.handler.currentNote);\r\n\t// \tthis.handler.currentStave.getTickables()[idx].setHighlight(false);\r\n\t// }\r\n\tthis.handler.redraw();\r\n}\r\n\r\nVex.UI.MouseListener.prototype.handleMouseOver = function(evt){\r\n\tvar mousePos = getMousePositionInCanvas(this.canvas, evt);\r\n\tvar temp = findWhichStaveMouseOver(this.staveList, mousePos);\r\n\t// if (this.handler.currentStave)\r\n\t// \tconsole.log(\"current stave idx\", this.staveList.indexOf(this.handler.currentStave));\r\n\t// if (temp)\r\n\t// \tconsole.log(\"next stave idx\", this.staveList.indexOf(temp));\r\n\tif (temp && this.handler.currentStave && temp != this.handler.currentStave) {\r\n\t\tthis.handler.redraw();\r\n\t}\r\n\tthis.handler.currentStave = temp;\r\n\tthis.handler.currentNote = findWhichNoteMouseOver(this.handler.currentStave, mousePos);\r\n\tthis.handler.updateProvisoryKey(mousePos);\r\n\t//change color of currentNote\r\n\tif(this.handler.currentNote != null){\r\n\t\tthis.handler.currentNote.setHighlight(true);\r\n\t\tthis.handler.redraw();\r\n\t}\r\n    \r\n\t//Private function\r\n\tfunction findWhichStaveMouseOver(staveList, mousePos){\r\n\t\tfor(var i = 0; i < staveList.length; i++){\r\n\t\t\tvar box = staveList[i].getBoundingBox();\r\n\t\t\tif(isCursorWithinRectangle(box.getX(), box.getY(), box.getW(), box.getH(), mousePos.x, mousePos.y) && staveList[i].usable)\r\n\t\t\t\treturn staveList[i];\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\t//Private function\r\n\tfunction findWhichNoteMouseOver(currentStave, mousePos){\r\n\t\tvar noteList = [];\r\n\t\tif(currentStave != null)\r\n\t\t\tnoteList = currentStave.getTickables();\r\n\t\t\r\n\t\tfor(var i = 0; i < noteList.length; i++){\r\n\t\t\tif (noteList[i] instanceof Vex.Flow.StaveNote) {\r\n\t\t\t\t//return to default color. Unnecessary if currentNote does not change color\r\n\t\t\t\tif(noteList[i].setHighlight !== undefined)\r\n\t\t\t\t\tnoteList[i].setHighlight(false);\r\n\t\t\t\tvar noteBox = noteList[i].getBoundingBox();\r\n\t\t\t\tvar staveBox = currentStave.getBoundingBox();\r\n\t\t\t\t//Use the Notes X and the Stave's Y for the bounding box \r\n\t\t\t\tif(isCursorWithinRectangle(noteBox.getX(), staveBox.getY(), noteBox.getW(), staveBox.getH(), mousePos.x, mousePos.y))\r\n\t\t\t\t\treturn noteList[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n};\r\n\r\n\r\nVex.UI.MouseListener.prototype.handleMouseClick = function(evt){\r\n\tswitch (evt.button) {\r\n    case 0:\r\n        this.handleLeftMouseClick(evt);\r\n        break;\r\n    case 1:\r\n    \tthis.handleMiddleMouseClick(evt);\r\n        break;\r\n    case 2:\r\n    \t  //this.handleRightMouseClick(evt);\r\n        break;\r\n    default:\r\n        alert('You have a strange Mouse!');\r\n\t}\r\n\t\r\n\t\r\n};\r\n\r\nVex.UI.MouseListener.prototype.handleMouseWheel = function(evt){\r\n\tvar delta = Math.max(-1, Math.min(1, (evt.wheelDelta || evt.deltaY)));\r\n\tif(this.handler.currentNote!=null){\r\n\t\tvar dur = this.handler.currentNote.duration;\r\n\t\tvar isAlias = Vex.Flow.durationAliases[dur] !== undefined;\r\n\t\tif (isAlias){\r\n\t\t\tdur = Vex.Flow.durationAliases[dur];\r\n\t\t}\r\n\t\tif (delta>0)dur*=2;\r\n\t\telse dur/=2;\r\n\t\t\r\n\t\tif (dur<1) dur = 1;\r\n\t\tdur = \"\" + dur; //to string\r\n\t\tvar newNote = this.handler.currentNote.clone({duration: dur});\r\n\t\t\r\n\t\tthis.handler.currentStave.replaceTickable(this.handler.currentNote,newNote);\r\n\t\tthis.handler.currentNote = newNote;\r\n\t\tthis.handler.currentNote.setHighlight(true);\r\n\t\tthis.handler.redraw();\r\n\t} else if(this.handler.provisoryTickable!=null){\r\n\t\tif(this.handler.provisoryTickable instanceof Vex.Flow.StaveNote){\r\n\t\t\tvar dur = this.handler.provisoryTickable.duration;\r\n\t\t\tvar isAlias = Vex.Flow.durationAliases[dur] !== undefined;\r\n\t\t\tif (isAlias){\r\n\t\t\t\tdur = Vex.Flow.durationAliases[dur];\r\n\t\t\t}\r\n\t\t\tif (delta>0)dur*=2;\r\n\t\t\telse dur/=2;\r\n\t\t\t\r\n\t\t\tif (dur<1) dur = 1;\r\n\t\t\tdur = \"\" + dur; //to string\r\n\t\t\t\r\n\t\t\tthis.handler.updateProvisoryDuration(dur);\r\n\t\t}else if(this.handler.provisoryTickable instanceof Vex.Flow.BarNote){\r\n\t\t\t//See Vex.Flow.Barline.type. Types go from 1 to 6 (7 is Barline.type.NONE).\r\n\t\t\tvar newType = ((this.handler.provisoryTickable.type + 5 + delta) % 6) + 1;\r\n\t\t\tthis.handler.provisoryTickable.setType(newType);\r\n\t\t\t\r\n\t\t\tthis.handler.drawProvisoryTickable();\r\n\t\t}else if(this.handler.provisoryTickable instanceof Vex.Flow.ClefNote){\r\n\t\t\tswitch(this.handler.provisoryTickable.clefKey){\r\n\t\t\t\tcase \"treble\":\r\n\t\t\t\t\t//Switch to bass\r\n\t\t\t\t\tthis.handler.provisoryTickable.clefKey = \"bass\";\r\n\t\t\t\t\tthis.handler.provisoryTickable.setClef(\"bass\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"bass\":\r\n\t\t\t\t\t//For now, switch back to treble. later, we will use other types of clefs\r\n\t\t\t\t\tthis.handler.provisoryTickable.clefKey = \"treble\";\r\n\t\t\t\t\tthis.handler.provisoryTickable.setClef(\"treble\");\r\n\t\t\t}\r\n\r\n\r\n\t\t\tthis.handler.drawProvisoryTickable();\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\t\t\r\n};\r\n\r\nVex.UI.MouseListener.prototype.handleLeftMouseClick = function(evt){\r\n\tif(this.handler.currentStave!=null && this.handler.currentStave.usable){\r\n\t\t//Find out the note representing the place clicked by the user\r\n\t\tvar mousePos = getMousePositionInCanvas(this.canvas, evt);\r\n\t\t\r\n\t\t//Clicking cases:\r\n\t\t//Case 1: clicked a stave, but not into a note bounding box\r\n\t\tif(this.handler.currentNote==null){\r\n\t\t\t//This case inserts a note into the current stave, based on which position the user clicked\r\n\t\t\t\r\n\t\t\tvar previousNote = getLastTickableBeforeXPosition(this.handler.currentStave, mousePos.x);\r\n\t\t\t//Find out the note immediately after the mouse X position\r\n\t\t\tvar nextNote = getFirstTickableAfterXPosition(this.handler.currentStave, mousePos.x);\r\n\t\t\t\r\n\t\t\t//The provisory Note is now added in the stave list\r\n\t\t\tvar newNote = this.handler.provisoryTickable.clone();\r\n\t\t\t//Add the note into the stave\r\n\t\t\tthis.handler.currentStave.insertTickableBetween(newNote, previousNote, nextNote);\r\n\t\t\t\r\n\t\t\t//Redraw the stave\r\n\t\t\tthis.handler.redraw(true);\r\n\t\t\t\r\n\t\t} else{\r\n\t\t\t//Case 2: clicked direclty into a note\r\n\t\t\tvar clickedKeyName = NoteMap.getNoteName(this.handler.currentStave, mousePos);\r\n\t\t\t\r\n\t\t\tvar keyIndex = this.handler.currentNote.indexOfKey(clickedKeyName);\r\n\t\t\t\r\n\t\t\tif(keyIndex == -1){\r\n\t\t\t\t//Case 2.1: Clicked a Key the Current note doesn't have\r\n\t\t\t\t\r\n\t\t\t\t//We should modify the current note to add new Key\r\n\t\t\t\tvar newKeys = this.handler.currentNote.keys;\r\n\t\t\t\tnewKeys.push(clickedKeyName);\r\n\t\t\t\tvar oldNote = this.handler.currentNote;\r\n\t\t\t\tvar newNote = oldNote.clone({ keys: newKeys});\r\n\t\t\t\tthis.handler.currentStave.replaceTickable(oldNote, newNote);\r\n\t\t\t\tthis.handler.currentNote = newNote;\r\n\t\t\t\t//Redraw the stave\r\n\t\t\t\tthis.handler.redraw();\r\n\r\n\t\t\t}/*else{\r\n\t\t\t\t//no actions to be done here, since we passed the menu to the right click \r\n\t\t\t\t//Case 2.2: Clicked a Key the current note already has\r\n\r\n\t\t\t}*/\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t}\r\n};\r\n\r\nVex.UI.MouseListener.prototype.handleMiddleMouseClick = function(evt){\r\n\t//Middle mouse button is responsible for changing the provisory Tickable type\r\n\tvar tickable = this.handler.provisoryTickable;\r\n\tvar newType = null;\r\n\t\r\n\tif(tickable instanceof Vex.Flow.StaveNote){\r\n\t\tif(tickable.noteType == \"n\")\r\n\t\t\tnewType = Vex.UI.TickableType.REST;\r\n\t\telse\r\n\t\t\tnewType = Vex.UI.TickableType.BAR;\r\n\t} else if (tickable instanceof Vex.Flow.BarNote)\r\n\t\tnewType = Vex.UI.TickableType.NOTE;\r\n\t\r\n\tthis.handler.updateProvisoryType(newType);\r\n};\r\n\r\n\r\nVex.UI.MouseListener.prototype.handleRightMouseClick = function(evt){\r\n\tif(this.handler.currentStave!=null){\r\n\t\t//Find out the note representing the place clicked by the user\r\n\t\tif(this.handler.currentNote!=null){\r\n\t\t\tvar mousePos = getMousePositionInCanvas(this.canvas, evt);\r\n\t\t\tvar clickedKeyName = NoteMap.getNoteName(this.handler.currentStave, mousePos);\r\n\t\t\t\t\r\n\t\t\t//We should render a toolbox for modifying current key.\r\n\t\t\tthis.handler.openMenuForKey(clickedKeyName, mousePos);\r\n\t\t}\r\n\t}\r\n};\r\n\r\n// VexflowExtension until line 1551 =============================================================================================================\r\n/*\r\n * New attibutes and methods to be used by the UI classes.\r\n */\r\n\r\n/*\r\n * Vex.Flow.Stave extensions \r\n */\r\n\r\nVex.Flow.Stave.prototype.tickables = [];\r\n\r\nVex.Flow.Stave.prototype.beams = [];\r\n\r\nVex.Flow.Stave.prototype.usable = true;\r\n\r\nVex.Flow.Stave.prototype.setTickables = function(tickables) {\r\n\tthis.tickables = tickables;\r\n};\r\n\r\nVex.Flow.Stave.prototype.getTickables = function() {\r\n\treturn this.tickables;\r\n};\r\n\r\nVex.Flow.Stave.prototype.getNotes = function() {\r\n\tvar notes = [];\r\n\t\r\n\tfor ( var i = 0; i < this.tickables.length; i++) {\r\n\t\tvar tickable = this.tickables[i];\r\n\t\tif(tickable instanceof Vex.Flow.StaveNote)\r\n\t\t\tnotes.push(tickable);\r\n\t}\r\n\treturn notes;\r\n};\r\n\r\nVex.Flow.Stave.prototype.insertTickableBetween = function(newTickable, previousTickable, nextTickable) {\r\n\r\n\tif(newTickable instanceof Vex.Flow.ClefNote){\r\n\t\t//If the stave has no clef modifiers, then add it. \r\n\t\tif(this.getClefModifierIndex() < 0){\r\n\t\t\tthis.addClef(newTickable.clefKey);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t//If the stave already has a clef, but the user clicked before any other tickable, then replace the stave clef\r\n\t\telse if(previousTickable == null){\r\n\t\t\tthis.replaceClef(newTickable.clefKey);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t//Else add it as a normal ClefNote as long as the stave already has notes, so leave otherwise\r\n\t\telse if(this.getNotes().length == 0)\r\n\t\t\treturn;\r\n\t\t\t\r\n\t\t\t\r\n\t} else if(newTickable instanceof Vex.Flow.BarNote){\r\n\t\t//If the BarNote is to be inserted after everything, then modify the end bar of the stave\r\n\t\tif(nextTickable == null){\r\n\t\t\tthis.setEndBarType(newTickable.type);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t//Else add it as a normal BarNote as long as the stave already has notes, so leave otherwise\r\n\t\telse if(this.getNotes().length == 0)\r\n\t\t\treturn;\r\n\t}\r\n\r\n\t// if (previousTickable) {\r\n\t// \tif (previousTickable.getModifiers('annotations')[0].text == \"L\") \r\n\t// \t\tnewTickable.addModifier(0, new Vex.Flow.Annotation('R'));\r\n\t// \telse \r\n\t// \t\tnewTickable.addModifier(0, new Vex.Flow.Annotation('L'));\r\n\t// } else {\r\n\t// \tif (nextTickable) {\r\n\t// \t\tif (nextTickable.getModifiers('annotations')[0].text == \"L\") \r\n\t// \t\t\tnewTickable.addModifier(0, new Vex.Flow.Annotation('R'));\r\n\t// \t\telse \r\n\t// \t\t\tnewTickable.addModifier(0, new Vex.Flow.Annotation('L'));\r\n\t// \t} else {\r\n\t// \t\t\tnewTickable.addModifier(0, new Vex.Flow.Annotation('L'));\r\n\t// \t}\r\n\t// }\r\n\r\n\tif (nextTickable==null) {\r\n\t\t\tthis.pushTickable(newTickable);\r\n\t} else {\r\n\t\tvar referenceIndex = this.tickables.indexOf(nextTickable);\r\n\t\tthis.tickables.splice(referenceIndex, 0, newTickable);\t\r\n\t}\r\n};\r\n\r\nVex.Flow.Stave.prototype.getClefModifierIndex = function(){\r\n\t//Remove all clefs currently in the stave\r\n\tfor(var i = 0; i < this.modifiers.length; i++){\r\n\t\tvar modifier = this.modifiers[i];\r\n\r\n\t\tif(modifier instanceof Vex.Flow.Clef)\r\n\t\t\treturn i;\r\n\r\n\t}\r\n\treturn -1;\r\n\r\n}\r\n\r\nVex.Flow.Stave.prototype.replaceClef = function(clef){\r\n\tvar start_X= this.start_x ;\r\n\tthis.clef = clef;\r\n\tvar modifier = new Vex.Flow.Clef(clef);\r\n\tthis.modifiers.splice(this.getClefModifierIndex(), 1);\r\n\tthis.glyphs = [];\r\n\tthis.addClef(clef);\r\n\r\n\tthis.start_x = start_X;\r\n}\r\n\r\nVex.Flow.Stave.prototype.getPreviousTickable = function(referenceTickable){\r\n\tvar referenceIndex = this.tickables.indexOf(referenceTickable);\r\n\tif (referenceIndex == 0) return null;\r\n\treturn this.tickables[referenceIndex-1];\r\n};\r\n\r\nVex.Flow.Stave.prototype.getNextTickable = function(referenceTickable){\r\n\tvar referenceIndex = this.tickables.indexOf(referenceTickable);\r\n\tif (referenceIndex == this.tickables.length - 1) return null;\r\n\treturn this.tickables[referenceIndex+1];\r\n};\r\n\r\nVex.Flow.Stave.prototype.getNextNote = function(referenceNote){\r\n\tvar referenceIndex = this.tickables.indexOf(referenceNote);\r\n\twhile(referenceIndex < this.tickables.length){\r\n\t\treferenceIndex++;\r\n\t\tif(this.tickables[referenceIndex] instanceof Vex.Flow.StaveNote)\r\n\t\t\treturn this.tickables[referenceIndex];\r\n\t}\r\n\t\t\r\n\treturn null;\r\n};\r\n\r\nVex.Flow.Stave.prototype.replaceTickable = function(oldTickable,newTickable){\r\n\t//Replacing note in beam.\r\n\tif(oldTickable.beam!=null){\r\n\t\tvar beam = oldTickable.beam;\r\n\t\tvar referenceIndex = beam.tickables.indexOf(oldTickable);\r\n\t\tbeam.notes[referenceIndex]=newTickable;\r\n\t}\r\n\t\r\n\tvar referenceIndex = this.tickables.indexOf(oldTickable);\r\n\tthis.tickables[referenceIndex]=newTickable;\r\n};\r\n\r\nVex.Flow.Stave.prototype.removeTickable = function(tickable){\r\n\tthis.tickables.splice(this.tickables.indexOf(tickable), 1);\r\n}\r\n\r\nVex.Flow.Stave.prototype.pushTickable = function(newTickable){\r\n\tthis.tickables.push(newTickable);\r\n};\r\n\r\nVex.Flow.Stave.prototype.beams = [];\r\n\r\nVex.Flow.Stave.prototype.setBeams = function(beamList) {\r\n\tthis.beams = beamList;\r\n};\r\n\r\nVex.Flow.Stave.prototype.getBeams = function() {\r\n\treturn this.beams;\r\n};\r\n\r\n\r\nVex.Flow.Stave.prototype.pushBeam = function(newBeam){\r\n\tthis.beams.push(newBeam);\r\n};\r\n\r\n\r\n/*\r\n * Vex.Flow.StaveNote extensions\r\n */\r\n/**\r\n * @param keyName The name of the Key\r\n * @returns the index of the key in the Note, or -1 if it doesn't contain the key\r\n */\r\nVex.Flow.StaveNote.prototype.indexOfKey = function(keyName){\r\n\treturn this.keys.indexOf(keyName);\r\n};\r\n\r\nVex.Flow.StaveNote.prototype.letter = \"R\";\r\n\r\n\r\nVex.Flow.StaveNote.prototype.getPlayEvents = function(playInfo){\r\n\t//Prepare the notes to be sent\r\n\tvar notes = [];\r\n\t\r\n\tfor(var i = 0; i < this.keys.length; i++){\r\n\t\tnotes.push(MIDI.keyToNote[this.keys[i].replace('/','')]);\r\n\t}\r\n\r\n\t//Set clef offset for notes\r\n\tfor (var i = 0; i < notes.length; i++) {\r\n\t\tnotes[i] += Vex.UI.ClefOffsets[playInfo.clef];\r\n\t};\r\n\r\n\tvar keyPressTime = playInfo.defaultTime / this.duration;\r\n\r\n\t//Set the modifiers for this note (update note value)\r\n\tfor (var i = 0; i < this.modifiers.length; i++) {\r\n\t\tvar modifier = this.modifiers[i];\r\n\t\tif(modifier instanceof Vex.Flow.Accidental){\r\n\t\t\tvar modValue;\r\n\r\n\t\t\tswitch(modifier.type){\r\n\t\t\t\tcase \"bb\":\r\n\t\t\t\tmodValue = -2;\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"b\":\r\n\t\t\t\tmodValue = -1;\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"n\":\r\n\t\t\t\tmodValue = 0;\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"#\":\r\n\t\t\t\tmodValue = 1;\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"##\":\r\n\t\t\t\tmodValue = 2;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tnotes[modifier.index] += modValue;\r\n\t\t}else if(modifier instanceof Vex.Flow.Dot){\r\n\t\t\tkeyPressTime *= 1.5;\r\n\t\t}\r\n\t\t\r\n\r\n\t};\r\n\r\n\t//\tvelocity is set as 127\r\n\t\r\n\t\r\n\t\r\n\tvar events = [];\r\n\t\r\n\r\n\tevents.push({\r\n\t\ttype: 'channel',\r\n\t\tchannel: 0,\r\n\t\tsubtype: notes.length==1?'noteOn':'chordOn',\r\n\t\tnoteNumber: notes.length==1?notes[0]:notes,\r\n\t\tvelocity: 127,\r\n\t\tqueuedTime: playInfo.delay,\r\n\t\tnote: this\r\n\t});\r\n\tevents.push({\r\n\t\ttype: 'channel',\r\n\t\tchannel: 0,\r\n\t\tsubtype: notes.length==1?'noteOff':'chordOff',\r\n\t\tnoteNumber: notes.length==1?notes[0]:notes,\r\n\t\tqueuedTime: playInfo.delay + keyPressTime,\r\n\t\tnote: this\r\n\t});\r\n\r\n\t\r\n\t//increment the delay \r\n\tplayInfo.delay = playInfo.delay + keyPressTime;\r\n\t\r\n\treturn events;\r\n};\r\n\r\n\r\n//TODO Clone Ties\r\nVex.Flow.StaveNote.prototype.clone = function(newProps){\r\n\tvar currentProps = {\r\n\t\t\tkeys: this.keys,\r\n\t\t\tstem_direction: this.getStemDirection(),\r\n\t\t\tduration: this.duration,\r\n\t\t\tnoteType: this.noteType\r\n\t} ;\r\n\t\r\n\t\r\n\tvar mergedProps = mergeProperties(currentProps, newProps);\r\n\tmergedProps.duration = mergedProps.duration + mergedProps.noteType;\r\n\t\r\n\tvar newNote = new Vex.Flow.StaveNote(mergedProps);\r\n\t\r\n\t//Setting the style as the same style as the note head\r\n\tnewNote.setStyle(this.note_heads[0].style);\r\n\t \r\n\t\r\n\t\r\n\tif(this.modifierContext!=null && this.getDots()!=null)\r\n\t\tnewNote.addDotToAll();\r\n\t\r\n\tnewNote.beam = this.beam;\r\n\t\r\n\t//Clone modifiers\r\n\tfor (var i = 0; i < this.modifiers.length; i++) {\r\n\t\tif(this.modifiers[0] instanceof Vex.Flow.Accidental){\r\n\t\t\tnewNote.addAccidental(this.modifiers[i].index, new Vex.Flow.Accidental(this.modifiers[i].type));\r\n\t\t}\r\n\t\t\r\n\t};\r\n\r\n\treturn newNote;\r\n};\r\n\r\nVex.Flow.StaveNote.prototype.setHighlight = function(highlight){\r\n\tif(highlight)\r\n\t\tthis.setStyle(Vex.UI.highlightNoteStyle);\r\n\telse\r\n\t\tthis.setStyle(Vex.UI.defaultNoteStyle);\r\n};\r\n\r\n/**\r\n * Return new note, from actions:\r\n * \"UP\"\t\t=> up on stave\r\n * \"DOWN\"\t=> down on stave\r\n * \"SHARP\"\t=> add sharp\r\n * @param action\r\n * @returns\r\n */\r\nVex.Flow.StaveNote.prototype.change = function(action){\r\n\tvar newKeys = new Array();\r\n\t//for each key\r\n\tfor (var k in this.keys){\r\n\t\tvar splitted = this.keys[k].split(\"/\");\r\n\t\tsplitted[0] = splitted[0].toUpperCase();\r\n\t\t//first char is the note\r\n\t\tvar note = splitted[0].substring(0,1);\r\n\t\tvar accidentals = splitted[0].substring(1);\r\n\t\tvar octave = parseInt(splitted[1]);\r\n\t\t\r\n\t\t//search index of key in NoteMap.noteMap\r\n\t\tvar index = 0;\r\n\t\tfor (var x in NoteMap.noteMap){\r\n\t\t\tif (NoteMap.noteMap[x] == note){\r\n\t\t\t\tindex = x;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t//do the ACTION\r\n\t\tif (action == \"UP\") //increment key\r\n\t\t\tindex++; \r\n\t\telse if (action == \"DOWN\") //descrease key\r\n\t\t\tindex--;\r\n\t\telse if (action == \"SHARP\"){\r\n\t\t//TODO add other cases\r\n\t\t\tswitch (accidentals){\r\n\t\t\t\tcase \"\":\r\n\t\t\t\tcase null:\r\n\t\t\t\tcase undefined:\r\n\t\t\t\t\taccidentals = \"#\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"#\":\r\n\t\t\t\t\taccidentals = \"##\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\talert(accidentals);\r\n\t\t}\r\n\t\t//octave changes\r\n\t\tif (index == NoteMap.noteMap.length){\r\n\t\t\tindex = 0;\r\n\t\t\toctave++;\r\n\t\t}else if (index < 0){\r\n\t\t\tindex = NoteMap.noteMap.length-1;\r\n\t\t\toctave--;\r\n\t\t}\r\n\t\t//push new key\r\n\t\tnote = NoteMap.noteMap[index];\r\n\t\tnewKeys.push(note + accidentals+\"/\"+octave);\r\n\t}\r\n\tvar dur = this.duration;\r\n\tvar type = this.noteType;\r\n\tif (action == \"PAUSE\"){\r\n\t\tif (type == \"n\") type = \"r\";\r\n\t\telse if (type == \"r\") type = \"n\";\r\n\t\tdur = Vex.Flow.parseNoteDurationString(this.duration);\r\n\t\tvar dots = \"\";\r\n\t\tfor (var i=0; i < dur.dots; i++) dots+=\"d\";\r\n\t\tdur = dur.duration + dots + type;\r\n\t}\r\n\t//create new note with new parameters\r\n\treturn this.clone({keys: newKeys, duration:dur });\r\n};\r\n\r\n/*\r\n * Override the original draw flag to fix the color being drawed\r\n */\r\nVex.Flow.StaveNote.prototype.drawFlag = function(){\r\n\tif (!this.context) throw new Vex.RERR(\"NoCanvasContext\",\r\n\t\"Can't draw without a canvas context.\");\r\n\t//console.log('drawflag called')\r\n\tvar ctx = this.context;\r\n\tvar glyph = this.getGlyph();\r\n\tvar render_flag = this.beam === null;\r\n\tvar bounds = this.getNoteHeadBounds();\r\n\r\n\tvar x_begin = this.getNoteHeadBeginX();\r\n\tvar x_end = this.getNoteHeadEndX();\r\n\r\n\tif (glyph.flag && render_flag) {\r\n\t\tvar note_stem_height = this.stem.getHeight();\r\n\t\tvar flag_x, flag_y, flag_code;\r\n\r\n\t\tif (this.getStemDirection() === Vex.Flow.Stem.DOWN) {\r\n\t\t\t// Down stems have flags on the left.\r\n\t\t\tflag_x = x_begin;\r\n\t\t\tflag_y = bounds.y_top - note_stem_height;\r\n\t\t\tflag_code = glyph.code_flag_downstem;\r\n\r\n\t\t} else {\r\n\t\t\t// Up stems have flags on the left.\r\n\t\t\tflag_x = x_end;\r\n\t\t\tflag_y = bounds.y_bottom - note_stem_height;\r\n\t\t\tflag_code = glyph.code_flag_upstem;\r\n\t\t}\r\n\r\n\t\t//NOTE: The 2 lines below were added to the original code\r\n\t\tvar ctxFillStyle = ctx.fillStyle; \r\n\t\tctx.fillStyle = this.note_heads[0].style.fillStyle;\r\n\t\t\r\n\t\t// Draw the Flag\r\n\t\tctx.openGroup('flag', null, { pointerBBox: true });\r\n\t\tthis.applyStyle(ctx, this.getFlagStyle() || false);\r\n\t\tthis.flag.render(ctx, flag_x, flag_y);\r\n\t\tthis.restoreStyle(ctx, this.getFlagStyle() || false);\r\n\t\tctx.closeGroup();\r\n\r\n\t\t//NOTE: The 2 lines below were added to the original code\r\n\t\t//Reverting style\r\n\t\tctx.fillStyle = ctxFillStyle;\r\n\t}\r\n};\r\n\t\r\n\r\n/*\r\n * Vex.Flow.Dot extensions\r\n */\r\n\r\n/*\r\n * Overriding the Draw method so that the dot stops going up at every draw call\r\n */\r\nVex.Flow.Dot.prototype.draw= function() {\r\n    if (!this.context) throw new Vex.RERR(\"NoContext\",\r\n      \"Can't draw dot without a context.\");\r\n    if (!(this.note && (this.index != null))) throw new Vex.RERR(\"NoAttachedNote\",\r\n      \"Can't draw dot without a note and index.\");\r\n\r\n    var line_space = this.note.stave.options.spacing_between_lines_px;\r\n\r\n    var start = this.note.getModifierStartXY(this.position, this.index);\r\n\r\n    // Set the starting y coordinate to the base of the stem for TabNotes\r\n    if (this.note.getCategory() === 'tabnotes') {\r\n      start.y = this.note.getStemExtents().baseY;\r\n    }\r\n\r\n    var dot_x = (start.x + this.x_shift) + this.width - this.radius;\r\n    //This next commented line is the original Draw\r\n    //var dot_y = start.y + this.y_shift + (this.dot_shiftY * line_space);\r\n    //This next line is the modified Draw\r\n    var dot_y = start.y + this.y_shift;\r\n    var ctx = this.context;\r\n\r\n    ctx.beginPath();\r\n    ctx.arc(dot_x, dot_y, this.radius, 0, Math.PI * 2, false);\r\n    ctx.fill();\r\n};\r\n\r\n/*\r\n * Barnote Extensions\r\n */\r\nVex.Flow.BarNote.prototype.clone = function(){\r\n\tvar newBarNote = new Vex.Flow.BarNote();\r\n\tnewBarNote.setType(this.getType());\r\n\tnewBarNote.setStave(this.getStave());\r\n\tnewBarNote.setTickContext(this.getTickContext());\r\n\treturn newBarNote;\r\n};\r\n\r\nVex.Flow.BarNote.prototype.getPlayEvents = function(playInfo, currentEvents){\r\n\tvar newEvents = [];\r\n\r\n\tfunction markBeginRepeatIndex(){\r\n\t\t//mark current index as repeating point\r\n\t\tplayInfo.beginRepeatIndex = currentEvents.length + newEvents.length;\r\n\t}\r\n\r\n\tfunction addRepeatEvents(){\r\n\t\t//Add all events since repeat index\r\n\t\tfor(var i = playInfo.beginRepeatIndex || 0; i < currentEvents.length; i++){\r\n\t\t\tnewEvents.push(currentEvents[i]);\r\n\t\t}\r\n\t}\r\n\r\n\tswitch(this.type){\r\n\t\tcase Vex.Flow.Barline.type.REPEAT_BEGIN:\t\t\r\n\t\t\tmarkBeginRepeatIndex();\r\n\t\tbreak;\r\n\t\tcase Vex.Flow.Barline.type.REPEAT_END:\r\n\t\t\taddRepeatEvents();\r\n\t\tbreak;\r\n\t\tcase Vex.Flow.Barline.type.REPEAT_BOTH:\r\n\t\t\taddRepeatEvents();\r\n\t\t\tmarkBeginRepeatIndex();\r\n\t\tbreak;\r\n\t}\r\n\r\n\treturn newEvents;\r\n}\r\n\r\n/*\r\n * ClefNote Extensions\r\n */\r\n\r\nVex.Flow.ClefNote.prototype.clone = function (){\r\n\tvar newClef = new Vex.Flow.ClefNote(this.clefKey);\r\n\tnewClef.clefKey = this.clefKey;\r\n\tnewClef.setTickContext(new Vex.Flow.TickContext());\r\n\tnewClef.getTickContext().setX(this.getTickContext().getX());\r\n\treturn newClef;\r\n};\r\n\r\n\r\nVex.Flow.ClefNote.prototype.getPlayEvents = function (playInfo){\r\n\t//update current clef\r\n\tplayInfo.clef = this.clefKey;\r\n\treturn [];\r\n};\r\n\r\n// Util until line 1670 =====================================================================================================================\r\n\r\nfunction getRandomInt(max) {\r\n  return Math.floor(Math.random() * Math.floor(max));\r\n}\r\n\r\nfunction getStyle(el,styleProp)\r\n{\r\n\tvar y = null;\r\n\tvar x = document.getElementById(el);\r\n\tif (x.currentStyle)\r\n\t\ty = x.currentStyle[styleProp];\r\n\telse if (window.getComputedStyle)\r\n\t\ty = document.defaultView.getComputedStyle(x,null).getPropertyValue(styleProp);\r\n\treturn y;\r\n};\r\n\r\nfunction getMousePositionInCanvas(canvas, evt) {\r\n\t//pegando apenas os valores de border e padding (eliminando coisas como cor e caracteres de pixel 'px'\r\n\tvar border = getStyle(canvas.id, 'border-left-width');\r\n\tvar borderValue = border!=null?border.substring(0, border.indexOf(border.match(/\\D/))):0;\r\n\tvar padding = getStyle(canvas.id, 'padding-left');\r\n\tvar paddingValue = padding!=null?padding.substring(0, padding.indexOf(padding.match(/\\D/))):0;\r\n\tvar rect = canvas.getBoundingClientRect();\r\n\treturn {\r\n\t\tx: (evt.clientX - rect.left - borderValue - paddingValue) / Vex.UI.scale,\r\n\t\ty: (evt.clientY - rect.top - borderValue - paddingValue) / Vex.UI.scale,\r\n\t};\r\n};\r\n\r\nfunction getAbsoluteMousePositionInCanvas(canvas, evt) {\r\n\t//pegando apenas os valores de border e padding (eliminando coisas como cor e caracteres de pixel 'px'\r\n\tvar border = getStyle(canvas.id, 'border-left-width');\r\n\tvar borderValue = border!=null?border.substring(0, border.indexOf(border.match(/\\D/))):0;\r\n\tvar padding = getStyle(canvas.id, 'padding-left');\r\n\tvar paddingValue = padding!=null?padding.substring(0, padding.indexOf(padding.match(/\\D/))):0;\r\n\tvar rect = canvas.getBoundingClientRect();\r\n\treturn {\r\n\t\tx: (evt.clientX - rect.left - borderValue - paddingValue),\r\n\t\ty: (evt.clientY - rect.top - borderValue - paddingValue),\r\n\t};\r\n};\r\n\r\n\r\nfunction isCursorWithinRectangle(x, y, width, height, mouseX, mouseY) {\r\n    if(mouseX > x && mouseX < x + width && mouseY > y && mouseY < y + height) {\r\n        return true;\r\n    }\r\n    return false;\r\n};\r\n\r\nfunction getFirstTickableAfterXPosition(stave, x){\r\n\tvar note = null;\r\n\t\r\n\tfor(var i = 0;  i<stave.getTickables().length; i++ ){\r\n\t\tif(x < stave.getTickables()[i].getAbsoluteX())\r\n\t\t\tnote = stave.getTickables()[i];\r\n\t\tif(note!=null)\r\n\t\t\tbreak;\r\n\t}\r\n\t\r\n\treturn note;\r\n};\r\n\r\nfunction getLastTickableBeforeXPosition(stave, x){\r\n\tvar note = null;\r\n\t\r\n\tfor(var i = stave.getTickables().length - 1;  i>=0; i-- ){\r\n\t\tif(x > stave.getTickables()[i].getAbsoluteX())\r\n\t\t\tnote = stave.getTickables()[i];\r\n\t\tif(note!=null)\r\n\t\t\tbreak;\r\n\t}\r\n\t\r\n\treturn note;\r\n};\r\n\r\n/**\r\n * \r\n * @param obj1 The first object\r\n * @param obj2 The second object\r\n * @returns A new object representing the merged objects. If both objects passed as param have the same prop, then obj2 property is returned.\r\n */\r\nfunction mergeProperties(obj1,obj2){\r\n\tvar obj3 = {};\r\n    for (var attrname in obj1) { obj3[attrname] = obj1[attrname]; }\r\n    for (var attrname in obj2) { obj3[attrname] = obj2[attrname]; }\r\n    return obj3;\r\n}\r\n\r\nfunction getStemDirection(stave, y){\r\n\tvar reference = stave.getYForLine(2);\r\n\t\r\n\tif(y<reference)\r\n\t\treturn Vex.Flow.StaveNote.STEM_DOWN;\r\n\telse\r\n\t\treturn Vex.Flow.StaveNote.STEM_UP;\r\n};\r\n\r\n// Notemap until line 1717 ====================================================================================================\r\nVex.UI.NoteMap = function(){\r\n\tthis.noteMap = ['C', 'D', 'E', 'F', 'G', 'A', 'B'];\r\n};\r\n\r\nVex.UI.NoteMap.prototype.getNoteName = function(stave, mousePos){\r\n\t//Step 1: get mouse position relative to the stave\r\n\tvar relativeMouseY = mousePos.y - stave.getBoundingBox().getY();\r\n\t\r\n\t//Step 2: get in which space within the staves the user clicked\r\n\t//using half the space between lines because we can click between a line (each line can hold 2 notes)\r\n\tvar noteArea = Math.round(relativeMouseY / (stave.options.spacing_between_lines_px/2));\r\n\t\r\n\t//Step 3: use the map to get the note Name\r\n\treturn this.toNoteName(noteArea, stave);\r\n};\r\n\r\nVex.UI.NoteMap.prototype.toNoteName = function(noteArea, stave){\r\n\tvar baseNote = this.getBaseNote(stave);\r\n\tvar baseNoteValue = this.noteMap.indexOf(baseNote.note);\r\n\t\r\n\tvar desiredNoteValue = (baseNoteValue - noteArea) % 7;\r\n\t//make it a positive value\r\n\twhile (desiredNoteValue < 0) desiredNoteValue+=7;\r\n\t\r\n\tvar desiredNoteOctave = baseNote.octave - (Math.floor(noteArea / 7));\r\n\t\r\n\tif( (desiredNoteValue == 5 || desiredNoteValue == 6))\r\n\t\tdesiredNoteOctave--;\r\n\t\r\n\treturn this.noteMap[desiredNoteValue] + '/' + desiredNoteOctave;\r\n};\r\n\r\n/**\r\n  * For now, it seems the easiest way to map notes is to consider them as always in the treble clef.\r\n  * For playing purposes, we are using Vex.UI.ClefOffsets to find out the correct note.\r\n  */\r\nVex.UI.NoteMap.prototype.getBaseNote = function(stave){\r\n\t\r\n\treturn {note:'G', octave: 6}; // represents 4 lines above the treble clef\r\n\t\r\n};\r\n\r\n\r\n//Init the variable, so that it can be used globally\r\nvar NoteMap = new Vex.UI.NoteMap();\r\n\r\n// TipRenderer until line 1780==========================================================================================================\r\n/**\r\n * Class responsible for rendering tips in the canvas.\r\n */\r\n\r\nVex.UI.TipRenderer = function(canvas){\r\n\tthis.canvas = canvas;\r\n\tthis.color = null;\r\n\tthis.fontSize = null;\r\n\tthis.fontName = null;\r\n\tthis.style = null;\r\n\tthis.context = null;\r\n\tthis.lineWidth = null;\r\n\tthis.textAlign = null;\r\n\tthis.textBaseline = null;\r\n\tthis.boundingBox= null;\r\n\tthis.showingTip = null;\r\n\tthis.backgroundColor = null;\r\n};\r\n\r\nVex.UI.TipRenderer.prototype.init = function(){\r\n\tthis.textAlign='left';\r\n\tthis.textBaseline = 'middle';\r\n\tthis.color = 'black';\r\n\tthis.fontName = 'Calibri';\r\n\tthis.lineWidth = 1;\r\n\tthis.style = 'normal';\r\n\tthis.fontSize = 10;\r\n\tthis.boundingBox = {x:0,y:0,width:200,height:20};\r\n\tthis.context = this.canvas.getContext('2d');\r\n\tthis.showingTip = false;\r\n\tthis.backgroundColor = 'white';\r\n};\r\n\r\n\r\nVex.UI.TipRenderer.prototype.showTip = function(tip){\r\n\t\r\n\tif(this.showingTip)\r\n\t\tthis.hideTip();\r\n\t\r\n\tvar font = this.style + ' ' + this.fontSize + 'pt ' + this.fontName;\r\n\t\r\n\tthis.context.font = font;\r\n\tthis.context.fillStyle = this.color;\r\n\tthis.context.textAlign = this.textAlign;\r\n\tthis.context.lineWidth = this.lineWidth;\r\n\tthis.context.textBaseline = this.textBaseline;\r\n\tthis.context.fillText(tip, this.boundingBox.x, this.boundingBox.y);\r\n\tthis.showingTip=true;\r\n};\r\n\r\n\r\n//TOOD needed to add this absolute (-5 and +10) values to be able to fully erase the written tip. FIX!\r\nVex.UI.TipRenderer.prototype.hideTip = function(){\r\n\t\r\n\tthis.context.beginPath();\r\n\tthis.context.rect(this.boundingBox.x, this.boundingBox.y - 5, this.boundingBox.width, this.boundingBox.height + 10);\r\n\tthis.context.fillStyle = this.backgroundColor;\r\n\tthis.context.fill();\r\n\t\r\n\tthis.showingTip = false;\r\n};\r\n\r\n//NoteMenuButtonRenderer until line 2091 =========================================================================================\r\nVex.UI.NoteMenuButtonRenderer = function (panel, context){\r\n\tthis.ready = false;\r\n\tvar renderer = this;\r\n\t//Load Resources\r\n\tthis.menuButtonsImg = new Image();\r\n\tthis.menuButtonsImg.src = 'https://cdn.jsdelivr.net/gh/R-D-D-D/Ground-Zero/web_frontend/src/resources/noteMenuButtons.gif';\r\n\tthis.menuButtonsImg.onload = function(){renderer.ready=true};\r\n};\r\n\r\nVex.UI.NoteMenuButtonRenderer.prototype.closeButton = function (){\r\n\tvar panelProps = this.panel;\r\n\tvar context = this.context;\r\n\t\r\n\t\r\n\tvar offset = 5; //offset between panel boundaries and button boundaries\r\n\tvar drawingOffset = 4; //offset between button boundaries and the X for the close\r\n\tvar buttonWidth = 15;\r\n\tvar buttonX = panelProps.rightX - buttonWidth - offset; \r\n\tvar buttonY = panelProps.y + offset; \r\n\t\r\n\t//Button Panel\r\n\t context.beginPath();\r\n\t context.rect(buttonX, buttonY, buttonWidth, buttonWidth);\r\n\t context.fillStyle = 'red';\r\n\t context.fill();\r\n\t \r\n\t //Button Content (the X)\r\n\t context.beginPath();\r\n\t context.lineWidth = 3;\r\n\t //Part 1: the \\\r\n\t context.moveTo(buttonX + drawingOffset, buttonY + drawingOffset);\r\n\t context.lineTo(buttonX + buttonWidth - drawingOffset, buttonY + buttonWidth - drawingOffset);\r\n\t //Part 2: the /\r\n\t context.moveTo(buttonX + drawingOffset, buttonY + buttonWidth - drawingOffset);\r\n\t context.lineTo(buttonX + buttonWidth - drawingOffset, buttonY + drawingOffset);\r\n\t context.strokeStyle = 'white';\r\n\t context.stroke();\r\n\r\n\t //context.strokeStyle = 'black'\r\n\t \r\n\t return new Vex.UI.Button({\r\n\t\t backgroundColor: 'red',\r\n\t\t width: buttonWidth,\r\n\t\t height: buttonWidth,\r\n\t\t x: buttonX,\r\n\t\t y: buttonY,\r\n\t\t rightX: buttonX + buttonWidth,\r\n\t\t bottomY: buttonY + buttonWidth,\r\n\t\t name: 'closeButton',\r\n\t\t action: 'close',\r\n\t\t tip: 'Close the menu'\r\n\t });\r\n};\r\n\r\nVex.UI.NoteMenuButtonRenderer.prototype.closeButton = function (){\r\n\tvar panelProps = this.panel;\r\n\tvar context = this.context;\r\n\t\r\n\t\r\n\tvar offset = 5; //offset between panel boundaries and button boundaries\r\n\tvar drawingOffset = 4; //offset between button boundaries and the X for the close\r\n\tvar buttonWidth = 15;\r\n\tvar buttonX = panelProps.rightX - buttonWidth - offset; \r\n\tvar buttonY = panelProps.y + offset; \r\n\t\r\n\t//Button Panel\r\n\t context.beginPath();\r\n\t context.rect(buttonX, buttonY, buttonWidth, buttonWidth);\r\n\t context.fillStyle = 'red';\r\n\t context.fill();\r\n\t \r\n\t //Button Content (the X)\r\n\t context.beginPath();\r\n\t context.lineWidth = 3;\r\n\t //Part 1: the \\\r\n\t context.moveTo(buttonX + drawingOffset, buttonY + drawingOffset);\r\n\t context.lineTo(buttonX + buttonWidth - drawingOffset, buttonY + buttonWidth - drawingOffset);\r\n\t //Part 2: the /\r\n\t context.moveTo(buttonX + drawingOffset, buttonY + buttonWidth - drawingOffset);\r\n\t context.lineTo(buttonX + buttonWidth - drawingOffset, buttonY + drawingOffset);\r\n\t context.strokeStyle = 'white';\r\n\t context.stroke();\r\n\t \r\n\t return new Vex.UI.Button({\r\n\t\t backgroundColor: 'red',\r\n\t\t width: buttonWidth,\r\n\t\t height: buttonWidth,\r\n\t\t x: buttonX,\r\n\t\t y: buttonY,\r\n\t\t rightX: buttonX + buttonWidth,\r\n\t\t bottomY: buttonY + buttonWidth,\r\n\t\t name: 'closeButton',\r\n\t\t action: 'close',\r\n\t\t tip: 'Close the menu'\r\n\t });\r\n};\r\n\r\nVex.UI.NoteMenuButtonRenderer.prototype.accidentalButton = function (index) {\r\n\tvar panelProps = this.panel;\r\n\tvar context = this.context;\r\n\tvar imageObj = this.menuButtonsImg;\r\n\t\r\n\t//Position of each accidental:\r\n\tvar positions = [400,100,200,0,300];\r\n\t//Actions of each Accidental\r\n\tvar actions = ['addDoubleFlat', 'addFlat', 'addNatural', 'addSharp', 'addDoubleSharp'];\r\n\tvar tips = ['Add double flat to key', 'Add flat to key', 'Add natural to key', 'Add sharp to key', 'Add double sharp to key'];\r\n\r\n\tvar initialOffsetX = 10; //offset between 1st button and paenl\r\n\tvar offSetX = 5; // offset between buttons\r\n\tvar offSetY = 10;\r\n\r\n\t//Source Specs\r\n\tvar sourceX = positions[index];\r\n\tvar sourceY = 0;\r\n\tvar sourceWidth = 100;\r\n\tvar sourceHeight = 100;\r\n\r\n\t//Destination Specs\r\n\tvar destWidth = 25;\r\n\tvar destHeight = destWidth;\r\n\r\n\tvar destX = panelProps.x + initialOffsetX + index * (offSetX + destWidth);\r\n\r\n\tvar destY = panelProps.y + offSetY;\r\n\r\n\tcontext.drawImage(imageObj, sourceX, sourceY, sourceWidth, sourceHeight, destX, destY, destWidth, destHeight);\r\n\r\n\treturn new Vex.UI.Button({\r\n\t\tbackgroundColor: 'white',\r\n\t\tx: destX,\r\n\t\ty: destY,\r\n\t\trightX: destX + destWidth,\r\n\t\tbottomY: destY + destHeight,\r\n\t\twidth: destWidth,\r\n\t\theight: destHeight,\r\n\t\taction: actions[index],\r\n\t\ttip: tips[index]\r\n\t});\r\n};\r\n\r\nVex.UI.NoteMenuButtonRenderer.prototype.dotButton = function(){\r\n\tvar panelProps = this.panel;\r\n\tvar context = this.context;\r\n\tvar imageObj = this.menuButtonsImg;\r\n\t\r\n\t//Position of each dot button in the sprite:\r\n\tvar position = 700;\r\n\r\n\tvar initialOffsetX = 10; //offset between 1st button and paenl\r\n\t//var offSetX = 5; // offset between buttons\r\n\tvar offSetY = 10;\r\n\r\n\t//Source Specs\r\n\tvar sourceX = position;\r\n\tvar sourceY = 0;\r\n\tvar sourceWidth = 100;\r\n\tvar sourceHeight = 100;\r\n\r\n\t//Destination Specs\r\n\tvar destWidth = 25;\r\n\tvar destHeight = destWidth;\r\n\r\n\tvar destX = panelProps.x + initialOffsetX;\r\n\r\n\t// 2 * offSetY + destHeight=> because its the 2nd row of buttons\r\n\tvar destY = panelProps.y + (2 * offSetY) + destHeight;\r\n\r\n\tcontext.drawImage(imageObj, sourceX, sourceY, sourceWidth, sourceHeight, destX, destY, destWidth, destHeight);\r\n\r\n\treturn new Vex.UI.Button({\r\n\t\tbackgroundColor: 'white',\r\n\t\tx: destX,\r\n\t\ty: destY,\r\n\t\trightX: destX + destWidth,\r\n\t\tbottomY: destY + destHeight,\r\n\t\twidth: destWidth,\r\n\t\theight: destHeight,\r\n\t\taction: 'addDot',\r\n\t\ttip: 'Add dot to key'\r\n\t});\r\n};\r\n\r\nVex.UI.NoteMenuButtonRenderer.prototype.beamButton = function (){\r\n\tvar panelProps = this.panel;\r\n\tvar context = this.context;\r\n\tvar imageObj = this.menuButtonsImg;\r\n\t\r\n\t//Position of each dot button in the sprite:\r\n\tvar position = 500;\r\n\r\n\tvar initialOffsetX = 10; //offset between 1st button and paenl\r\n\tvar offSetX = 5; // offset between buttons\r\n\tvar offSetY = 10;\r\n\r\n\t//Source Specs\r\n\tvar sourceX = position;\r\n\tvar sourceY = 0;\r\n\tvar sourceWidth = 100;\r\n\tvar sourceHeight = 100;\r\n\r\n\t//Destination Specs\r\n\tvar destWidth = 25;\r\n\tvar destHeight = destWidth;\r\n\t\r\n\t//1 * (offSetX + destWidth) because its the 2nd button in the row.\r\n\tvar destX = panelProps.x + initialOffsetX + (offSetX + destWidth);\r\n\r\n\t// 2 * offSetY + destHeight=> because its the 2nd row of buttons\r\n\tvar destY = panelProps.y + (2 * offSetY) + destHeight;\r\n\r\n\tcontext.drawImage(imageObj, sourceX, sourceY, sourceWidth, sourceHeight, destX, destY, destWidth, destHeight);\r\n\r\n\treturn new Vex.UI.Button({\r\n\t\tbackgroundColor: 'white',\r\n\t\tx: destX,\r\n\t\ty: destY,\r\n\t\trightX: destX + destWidth,\r\n\t\tbottomY: destY + destHeight,\r\n\t\twidth: destWidth,\r\n\t\theight: destHeight,\r\n\t\taction: 'addBeam',\r\n\t\ttip: 'Beam with next note'\r\n\t});\r\n};\r\n\r\nVex.UI.NoteMenuButtonRenderer.prototype.deleteButton = function(){\r\n\tvar panelProps = this.panel;\r\n\tvar context = this.context;\r\n\tvar imageObj = this.menuButtonsImg;\r\n\t\r\n\t//Position of each dot button in the sprite:\r\n\tvar position = 800;\r\n\r\n\tvar initialOffsetX = 10; //offset between 1st button and paenl\r\n\tvar offSetX = 5; // offset between buttons\r\n\tvar offSetY = 10;\r\n\r\n\t//Source Specs\r\n\tvar sourceX = position;\r\n\tvar sourceY = 0;\r\n\tvar sourceWidth = 100;\r\n\tvar sourceHeight = 100;\r\n\r\n\t//Destination Specs\r\n\tvar destWidth = 25;\r\n\tvar destHeight = destWidth;\r\n\t\r\n\t//1 * (offSetX + destWidth) because its the 4nd button in the row.\r\n\tvar destX = panelProps.x + initialOffsetX + 3*(offSetX + destWidth);\r\n\r\n\t// 2 * offSetY + destHeight=> because its the 2nd row of buttons\r\n\tvar destY = panelProps.y + (2 * offSetY) + destHeight;\r\n\r\n\tcontext.drawImage(imageObj, sourceX, sourceY, sourceWidth, sourceHeight, destX, destY, destWidth, destHeight);\r\n\r\n\treturn new Vex.UI.Button({\r\n\t\tbackgroundColor: 'white',\r\n\t\tx: destX,\r\n\t\ty: destY,\r\n\t\trightX: destX + destWidth,\r\n\t\tbottomY: destY + destHeight,\r\n\t\twidth: destWidth,\r\n\t\theight: destHeight,\r\n\t\taction: 'deleteNote',\r\n\t\ttip: 'Remove key'\r\n\t});\r\n};\r\n\r\nVex.UI.NoteMenuButtonRenderer.prototype.tieButton = function(){\r\n\tvar panelProps = this.panel;\r\n\tvar context = this.context;\r\n\tvar imageObj = this.menuButtonsImg;\r\n\t\r\n\t//Position of each dot button in the sprite:\r\n\tvar position = 600;\r\n\r\n\tvar initialOffsetX = 10; //offset between 1st button and paenl\r\n\tvar offSetX = 5; // offset between buttons\r\n\tvar offSetY = 10;\r\n\r\n\t//Source Specs\r\n\tvar sourceX = position;\r\n\tvar sourceY = 0;\r\n\tvar sourceWidth = 100;\r\n\tvar sourceHeight = 100;\r\n\r\n\t//Destination Specs\r\n\tvar destWidth = 25;\r\n\tvar destHeight = destWidth;\r\n\t\r\n\t//1 * (offSetX + destWidth) because its the 3nd button in the row.\r\n\tvar destX = panelProps.x + initialOffsetX + 2*(offSetX + destWidth);\r\n\r\n\t// 2 * offSetY + destHeight=> because its the 2nd row of buttons\r\n\tvar destY = panelProps.y + (2 * offSetY) + destHeight;\r\n\r\n\tcontext.drawImage(imageObj, sourceX, sourceY, sourceWidth, sourceHeight, destX, destY, destWidth, destHeight);\r\n\r\n\treturn new Vex.UI.Button({\r\n\t\tbackgroundColor: 'white',\r\n\t\tx: destX,\r\n\t\ty: destY,\r\n\t\trightX: destX + destWidth,\r\n\t\tbottomY: destY + destHeight,\r\n\t\twidth: destWidth,\r\n\t\theight: destHeight,\r\n\t\taction: 'addTie',\r\n\t\ttip: 'Tie with next note'\r\n\t});\r\n};\r\n\r\n// Button ==================================================================================================================\r\n/**\r\n * Class representing a button.\r\n */\r\n\r\nVex.UI.Button = function(props){\r\n\tthis.props = props;\r\n};\r\n\r\n\r\nVex.UI.Button.prototype.highlight = function (canvas, color, button){\r\n\t\t//If color == null remove highlight\r\n\t\tif(color==null)\r\n\t\t\tcolor = button.props.backgroundColor;\r\n\t\tvar lineWidth = 4;\r\n\t\tvar context = canvas.getContext('2d');\r\n\t\tcontext.beginPath();\r\n\t\tcontext.lineWidth = lineWidth;\r\n\t\tcontext.rect(button.props.x, button.props.y, button.props.width, button.props.height);\r\n\t\tcontext.strokeStyle = color;\r\n\t\tcontext.stroke();\r\n};\r\n\r\n//TODO Implement showTip\r\nVex.UI.Button.prototype.showTip = function () {\r\n\t\r\n};\r\n\r\nVex.UI.Button.prototype.callAction = function (object) {\r\n\tobject[this.props.action]();\r\n};\r\n\r\nVex.UI.TickableType = {\r\n\tNOTE : \"note\",\r\n\tREST : \"rest\",\r\n\tBAR : \"bar\",\r\n\tCLEF : \"clef\"\r\n};\r\n\r\nexport default Vex.UI","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoPlayer.vue?vue&type=style&index=0&id=593b3adb&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoPlayer.vue?vue&type=style&index=0&id=593b3adb&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',{attrs:{\"id\":\"app\"}},[_c('page-header'),_c('v-main',[_c('router-view')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-app-bar',{attrs:{\"light\":\"\",\"app\":\"\",\"absolute\":\"\",\"color\":\"white\"}},[_c('v-app-bar-nav-icon',{on:{\"click\":function($event){_vm.drawer = true}}}),_c('router-link',{staticClass:\"pl-3\",attrs:{\"id\":\"logo\",\"to\":\"/\"}},[_c('v-toolbar-title',{staticClass:\"font-weight-bold\"},[_vm._v(\"VIOLIAN\")])],1),_c('v-spacer'),(!_vm.$store.state.isUserLoggedIn)?_c('v-toolbar-items',[_c('v-btn',{attrs:{\"depressed\":\"\",\"to\":\"/register\",\"color\":\"white\"}},[_vm._v(\"Register\")]),_c('v-btn',{attrs:{\"depressed\":\"\",\"to\":\"/login\",\"color\":\"white\"}},[_vm._v(\"Log In\")])],1):_c('v-toolbar-items',[_c('v-btn',{attrs:{\"depressed\":\"\",\"to\":\"/course/index\",\"color\":\"white\"}},[_vm._v(\"My Courses\")]),_c('v-btn',{staticStyle:{\"position\":\"relative\"},attrs:{\"depressed\":\"\",\"to\":\"/courses/threads/index\",\"color\":\"white\"}},[_vm._v(\"Notifications\"),_c('div',{attrs:{\"id\":\"notification\"}},[_vm._v(_vm._s(_vm.notifications))])]),_c('v-btn',{attrs:{\"depressed\":\"\",\"color\":\"white\"},on:{\"click\":_vm.logout}},[_vm._v(\"Log Out\")])],1)],1),_c('v-navigation-drawer',{attrs:{\"absolute\":\"\",\"temporary\":\"\"},model:{value:(_vm.drawer),callback:function ($$v) {_vm.drawer=$$v},expression:\"drawer\"}},[(_vm.$store.state.isUserLoggedIn)?_c('v-list',{attrs:{\"nav\":\"\",\"dense\":\"\"}},[_c('v-list-item-group',{attrs:{\"active-class\":\"text--accent-4\"}},[_c('v-list-item',{attrs:{\"to\":\"/\"}},[_c('v-list-item-icon',[_c('v-icon',[_vm._v(\"mdi-home\")])],1),_c('v-list-item-title',[_vm._v(\"Home\")])],1),(_vm.$store.state.user.isStudent)?_c('v-list-item',{attrs:{\"to\":\"/student\"}},[_c('v-list-item-icon',[_c('v-icon',[_vm._v(\"mdi-playlist-music\")])],1),_c('v-list-item-title',[_vm._v(\"My Courses\")])],1):_vm._e(),(_vm.$store.state.user.isTutor)?_c('v-list-item',{attrs:{\"to\":\"/course/index\"}},[_c('v-list-item-icon',[_c('v-icon',[_vm._v(\"mdi-notebook-outline\")])],1),_c('v-list-item-title',[_vm._v(\"My Courses\")])],1):_vm._e(),(_vm.$store.state.isUserLoggedIn)?_c('v-list-item',{on:{\"click\":_vm.logout}},[_c('v-list-item-icon',[_c('v-icon',[_vm._v(\"mdi-logout\")])],1),_c('v-list-item-title',[_vm._v(\"Log Out\")])],1):_vm._e()],1)],1):_c('v-list',{attrs:{\"nav\":\"\",\"dense\":\"\"}},[_c('v-list-item-group',{attrs:{\"active-class\":\"text--accent-4\"}},[_c('v-list-item',{attrs:{\"to\":\"/\"}},[_c('v-list-item-icon',[_c('v-icon',[_vm._v(\"mdi-home\")])],1),_c('v-list-item-title',[_vm._v(\"Home\")])],1),(!_vm.$store.state.isUserLoggedIn)?_c('v-list-item',{attrs:{\"to\":\"/register\"}},[_c('v-list-item-icon',[_c('v-icon',[_vm._v(\"mdi-account\")])],1),_c('v-list-item-title',[_vm._v(\"Register\")])],1):_vm._e(),(!_vm.$store.state.isUserLoggedIn)?_c('v-list-item',{attrs:{\"to\":\"/login\"}},[_c('v-list-item-icon',[_c('v-icon',[_vm._v(\"mdi-account\")])],1),_c('v-list-item-title',[_vm._v(\"Log In\")])],1):_vm._e()],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\r\n  div\r\n    v-app-bar(\r\n      light\r\n      app\r\n      absolute\r\n      color=\"white\"\r\n    )\r\n      v-app-bar-nav-icon(@click=\"drawer = true\")\r\n\r\n      router-link.pl-3#logo(to=\"/\")\r\n        v-toolbar-title.font-weight-bold VIOLIAN\r\n\r\n      v-spacer\r\n\r\n      v-toolbar-items(v-if=\"!$store.state.isUserLoggedIn\")\r\n        v-btn(depressed to=\"/register\" color=\"white\") Register\r\n        v-btn(depressed to=\"/login\" color=\"white\") Log In\r\n      v-toolbar-items(v-else)\r\n        v-btn(depressed to=\"/course/index\" color=\"white\") My Courses\r\n        v-btn(depressed to=\"/courses/threads/index\" style=\"position: relative;\" color=\"white\") Notifications\r\n          #notification {{ notifications }}\r\n        v-btn(depressed @click=\"logout\" color=\"white\") Log Out\r\n    \r\n    v-navigation-drawer(v-model='drawer' absolute temporary)\r\n      v-list(nav dense v-if=\"$store.state.isUserLoggedIn\")\r\n        v-list-item-group(active-class=\"text--accent-4\" )\r\n          v-list-item(to=\"/\")\r\n            v-list-item-icon\r\n              v-icon mdi-home\r\n            v-list-item-title Home\r\n          v-list-item(to=\"/student\" v-if=\"$store.state.user.isStudent\")\r\n            v-list-item-icon\r\n              v-icon mdi-playlist-music\r\n            v-list-item-title My Courses\r\n          v-list-item(to=\"/course/index\" v-if=\"$store.state.user.isTutor\")\r\n            v-list-item-icon\r\n              v-icon mdi-notebook-outline\r\n            v-list-item-title My Courses\r\n          v-list-item(v-if=\"$store.state.isUserLoggedIn\" @click=\"logout\")\r\n            v-list-item-icon\r\n              v-icon mdi-logout\r\n            v-list-item-title Log Out\r\n      v-list(nav dense v-else)\r\n        v-list-item-group(active-class=\"text--accent-4\")\r\n          v-list-item(to=\"/\")\r\n            v-list-item-icon\r\n              v-icon mdi-home\r\n            v-list-item-title Home\r\n          v-list-item(to=\"/register\" v-if=\"!$store.state.isUserLoggedIn\")\r\n            v-list-item-icon\r\n              v-icon mdi-account\r\n            v-list-item-title Register\r\n          v-list-item(to=\"/login\" v-if=\"!$store.state.isUserLoggedIn\")\r\n            v-list-item-icon\r\n              v-icon mdi-account\r\n            v-list-item-title Log In\r\n</template>\r\n\r\n<script>\r\nimport {mapState} from 'vuex'\r\n\r\nexport default {\r\n  name: 'Header',\r\n  data () {\r\n    return {\r\n      drawer: false,\r\n      messages: 0\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    logout () {\r\n      this.$store.dispatch('setToken', null)\r\n      this.$store.dispatch('setUser', null)\r\n      this.$router.push('/')\r\n    }\r\n  },\r\n\r\n  computed: {\r\n\r\n    ...mapState(['user', 'notifications'])\r\n  },\r\n\r\n  mounted: function () {\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#logo, #logo:link, #logo:visited, #logo:active, #logo:hover {\r\n  text-decoration: none;\r\n  color: #1e1e1c;\r\n}\r\n\r\n#notification {\r\n  position: absolute;\r\n  background: #C62828;\r\n  top: -14px;\r\n  right: -16px;\r\n  width: 22px;\r\n  height: 22px;\r\n  border-radius: 50%;\r\n  font-size: 14px;\r\n  line-height: 1.35rem;\r\n  color: white;\r\n  text-align: center;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Header.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Header.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Header.vue?vue&type=template&id=6000137a&scoped=true&lang=pug&\"\nimport script from \"./Header.vue?vue&type=script&lang=js&\"\nexport * from \"./Header.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Header.vue?vue&type=style&index=0&id=6000137a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6000137a\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAppBar } from 'vuetify/lib/components/VAppBar';\nimport { VAppBarNavIcon } from 'vuetify/lib/components/VAppBar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemGroup } from 'vuetify/lib/components/VList';\nimport { VListItemIcon } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VNavigationDrawer } from 'vuetify/lib/components/VNavigationDrawer';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VToolbarItems } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VAppBar,VAppBarNavIcon,VBtn,VIcon,VList,VListItem,VListItemGroup,VListItemIcon,VListItemTitle,VNavigationDrawer,VSpacer,VToolbarItems,VToolbarTitle})\n","<template lang=\"pug\">\r\n  v-app#app\r\n    page-header\r\n\r\n    v-main\r\n      router-view\r\n</template>\r\n\r\n<script>\r\nimport PageHeader from \"./components/Header\";\r\n\r\nexport default {\r\n  name: \"App\",\r\n\r\n  components: {\r\n    'page-header': PageHeader\r\n  },\r\n\r\n  data: () => ({\r\n    //\r\n  })\r\n};\r\n</script>\r\n\r\n<style>\r\n@import '../node_modules/video.js/dist/video-js.css';\r\n\r\n#app {\r\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  /* text-align: center; */\r\n  color: #3c3b37;\r\n}\r\n\r\n.disabled-dom {\r\n  pointer-events: none;\r\n  opacity: 0.4;\r\n}\r\n\r\n.speech-bubble-other, .speech-bubble-self {\r\n\tposition: relative;\r\n\tbackground: #EEEEEE;\r\n\tborder-radius: .4em;\r\n  min-height: 40px;\r\n}\r\n\r\n.speech-bubble-other:after {\r\n\tcontent: '';\r\n\tposition: absolute;\r\n\tright: 0;\r\n\ttop: 60%;\r\n\twidth: 0;\r\n\theight: 0;\r\n\tborder: 20px solid transparent;\r\n\tborder-left-color: #EEEEEE;\r\n\tborder-right: 0;\r\n\tborder-bottom: 0;\r\n\tmargin-top: -10px;\r\n\tmargin-right: -18px;\r\n}\r\n\r\n.speech-bubble-self:after {\r\n\tcontent: '';\r\n\tposition: absolute;\r\n\tleft: 0;\r\n\ttop: 60%;\r\n\twidth: 0;\r\n\theight: 0;\r\n\tborder: 20px solid transparent;\r\n\tborder-right-color: #EEEEEE;\r\n\tborder-left: 0;\r\n\tborder-bottom: 0;\r\n\tmargin-top: -10px;\r\n\tmargin-left: -18px;\r\n}\r\n\r\n.timestamp {\r\n  position: absolute;\r\n  right: 6px;\r\n  bottom: 3px;\r\n  font-size: 12px;\r\n  color: #757575;\r\n}\r\n\r\n.bottom-border {\r\n  border-left: 1px solid #BDBDBD;\r\n  border-right: 1px solid #BDBDBD;\r\n  border-bottom: 1px solid #BDBDBD;\r\n}\r\n\r\n.v-expansion-panel-content__wrap {\r\n  padding: 0 !important;\r\n}\r\n</style>\r\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--11-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--11-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=ef8ee88c&lang=pug&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\nimport { VMain } from 'vuetify/lib/components/VMain';\ninstallComponents(component, {VApp,VMain})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-container',[_c('v-row',{staticClass:\"mt-10\"},[_c('v-col',{staticClass:\"text-left\",attrs:{\"cols\":\"8\"}},[_c('h1',[_vm._v(\"Welcome to Music Academy\")])])],1),_c('v-row',{staticClass:\"mb-12\"},[_c('v-col',{attrs:{\"cols\":\"8\"}},[_c('v-autocomplete',{attrs:{\"items\":_vm.items,\"loading\":_vm.isLoading,\"search-input\":_vm.search,\"cache-items\":\"\",\"multiple\":\"\",\"clearable\":\"\",\"hide-details\":\"\",\"hide-selected\":\"\",\"item-text\":\"name\",\"item-value\":\"symbol\",\"label\":\"Search for a course...\",\"solo\":\"\"},on:{\"update:searchInput\":function($event){_vm.search=$event},\"update:search-input\":function($event){_vm.search=$event}},scopedSlots:_vm._u([{key:\"no-data\",fn:function(){return [_c('v-list-item',[_c('v-list-item-title',[_vm._v(\"Search for your favorite \"),_c('strong',[_vm._v(\"Course\")])])],1)]},proxy:true},{key:\"item\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-list-item',{on:{\"click\":function($event){return _vm.go_to_course($event, item.id)}}},[_c('v-list-item-content',[_vm._v(_vm._s(item.name))])],1)]}}]),model:{value:(_vm.model),callback:function ($$v) {_vm.model=$$v},expression:\"model\"}})],1)],1),_c('v-divider'),_c('v-row',{staticClass:\"mt-10\"},[_c('v-col',{staticClass:\"text-left\",attrs:{\"cols\":\"12\"}},[_c('h2',[_vm._v(\"Popular Courses\")])]),_vm._l((_vm.allCourses),function(course){return _c('v-col',{attrs:{\"sm\":\"6\",\"md\":\"4\",\"lg\":\"3\"}},[_c('v-card',{staticClass:\"mx-auto\"},[_c('v-img',{staticClass:\"white--text align-end\",attrs:{\"height\":\"200px\",\"src\":\"https://images.pexels.com/photos/1246437/pexels-photo-1246437.jpeg?cs=srgb&dl=close-up-photo-of-person-playing-piano-1246437.jpg&fm=jpg\"}},[_c('v-card-title',{staticStyle:{\"text-shadow\":\"1px 1px 2px #000000\"}},[_vm._v(_vm._s(course.name))])],1),_c('v-card-subtitle',{staticClass:\"pb-0 text-left\"},[_vm._v(\"Drum\")]),_c('v-card-text',{staticClass:\"text-left text--primary pb-0\"},[_c('div',[_vm._v(\"Whitehaven Beach\")])]),_c('v-card-actions',[_c('v-btn',{attrs:{\"color\":\"indigo\",\"text\":\"\"},on:{\"click\":function($event){return _vm.go_to_course($event, course.id)}}},[_vm._v(\"Find out more\")])],1)],1)],1)})],2)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Api from '@/services/Api'\r\n\r\nexport default {\r\n  create (lessonInfo) {\r\n    return Api().post('lesson/new', lessonInfo)\r\n  },\r\n\r\n  list (courseId) {\r\n    return Api().get(`lesson/list?cid=${courseId}`)\r\n  },\r\n\r\n  edit (lessonInfo) {\r\n    return Api().put('lesson/edit', lessonInfo)\r\n  },\r\n\r\n  delete (lessonId) {\r\n    return Api().delete(`lesson/del?lid=${lessonId}`)\r\n  }\r\n}\r\n","import Api from '@/services/Api'\r\n\r\nexport default {\r\n  subscribe (subscriptionInfo) {\r\n    return Api().post('subscribe/new', subscriptionInfo)\r\n  },\r\n\r\n  getSubscriptionInfoOfStudent (userId) {\r\n    return Api().get(`subscribe/get/student?uid=${userId}`)\r\n  },\r\n\r\n  getSubscriptionInfoOfCourse (courseId) {\r\n    return Api().get(`subscribe/get/course?cid=${courseId}`)\r\n  },\r\n\r\n  getAllTutors () {\r\n    return Api().get('tutor/list')\r\n  }\r\n}\r\n","import Vue from \"vue\"\r\nimport Vuex from \"vuex\"\r\nimport createPersistedState from \"vuex-persistedstate\"\r\nimport LessonService from \"../services/LessonService\"\r\nimport SubscriptionService from \"../services/SubscriptionService\"\r\nimport CourseService from \"../services/CourseService\"\r\n// import ExerciseService from \"../services/ExerciseService\"\r\n\r\nVue.use(Vuex)\r\n\r\nexport default new Vuex.Store({\r\n  strict: true,\r\n  plugins: [createPersistedState()],\r\n  state: {\r\n    token: null,\r\n    user: null,\r\n    // this lessons array is for tutors when they log in as tutor\r\n    userOwnedCourses: [],\r\n    userSubscribedCourses: [],\r\n    allTutors: [],\r\n    allCourses: [],\r\n    isUserLoggedIn: false,\r\n    notifications: null\r\n  },\r\n\r\n  getters: {\r\n    isSubscribed: (state) => (id) => {\r\n      var course = state.userSubscribedCourses.find(course => course.id === id)\r\n      if (course)\r\n        return true\r\n      else\r\n        return false\r\n    },\r\n\r\n    isOwned: (state) => (id) => {\r\n      var course = state.userOwnedCourses.find(course => course.id === id)\r\n      if (course)\r\n        return true\r\n      else\r\n        return false\r\n    }\r\n  },\r\n\r\n  mutations: {\r\n    resetState (state) {\r\n      Object.assign(state, {\r\n        token: null,\r\n        user: null,\r\n        // this lessons array is for tutors when they log in as tutor\r\n        userOwnedCourses: [],\r\n        userSubscribedCourses: [],\r\n        allTutors: [],\r\n        allCourses: [],\r\n        isUserLoggedIn: false,\r\n        notifications: 0\r\n      })\r\n    },\r\n\r\n    setToken (state, token) {\r\n      state.token = token;\r\n    },\r\n\r\n    setUser (state, user) {\r\n      state.user = user;\r\n    },\r\n\r\n    setNotifications (state, notifications) {\r\n      state.notifications = notifications\r\n    },\r\n\r\n    logIn (state) {\r\n      state.isUserLoggedIn = true;\r\n    },\r\n\r\n    logOut (state) {\r\n      state.isUserLoggedIn = false;\r\n    },\r\n\r\n    setAllTutors (state, tutors) {\r\n      state.allTutors = tutors;\r\n    },\r\n\r\n    setUserOwnedCourses (state, courses) {\r\n      state.userOwnedCourses = courses;\r\n    },\r\n\r\n    setUserSubscribedCourses (state, courses) {\r\n      state.userSubscribedCourses = courses;\r\n    },\r\n\r\n    setNav (state, bool) {\r\n      state.hideNav = bool;\r\n    },\r\n\r\n    setAllCourses (state, courses) {\r\n      state.allCourses = courses;\r\n    },\r\n\r\n    addCourse (state, course) {\r\n      state.userOwnedCourses.push(course);\r\n    },\r\n\r\n    deleteCourse (state, cid) {\r\n      var course = state.userOwnedCourses.find(course => course.id == cid)\r\n      var idx = state.userOwnedCourses.indexOf(course)\r\n      if (idx >= 0)\r\n        state.userOwnedCourses.splice(idx, 1)\r\n      else \r\n        throw new Error(\"negative index\")\r\n    },\r\n\r\n    deleteAllLessons (state, course) {\r\n      var stateCourse = state.userOwnedCourses.find(c => c.id == course.id)\r\n      stateCourse.lessons = []\r\n    },\r\n\r\n    addLesson (state, lesson) {\r\n      const course = state.userOwnedCourses.find(course => course.id == lesson.CourseId)\r\n      if (course.lessons == null)\r\n        course.lessons = []\r\n\r\n      course.lessons.push(lesson)\r\n    },\r\n\r\n    deleteLesson (state, lesson) {\r\n      const course = state.userOwnedCourses.find(course => course.id == lesson.CourseId)\r\n      var idx = course.lessons.indexOf(lesson)\r\n      course.lessons.splice(idx, 1)\r\n    },\r\n\r\n    addExercise (state, payload) {\r\n      const course = state.userOwnedCourses.find(course => course.id == payload.CourseId);\r\n      const lesson = course.lessons.find(lesson => lesson.id == payload.exercise.LessonId);\r\n      if (lesson.exercises == null)\r\n        lesson.exercises = [];\r\n\r\n      lesson.exercises.push(payload.exercise);\r\n    }\r\n  },\r\n\r\n  actions: {\r\n    // user management\r\n    setToken ({commit}, token) {\r\n      commit(\"setToken\", token);\r\n      if (token)\r\n        commit(\"logIn\");\r\n      else {\r\n        commit(\"logOut\");\r\n        commit(\"resetState\");\r\n      }\r\n    },\r\n\r\n    setUser ({commit}, user) {\r\n      commit(\"setUser\", user);\r\n    },\r\n\r\n    setNotifications ({commit}, notifications) {\r\n      commit('setNotifications', notifications)\r\n    },\r\n\r\n    // course management\r\n    addCourse ({commit}, course) {\r\n      commit(\"addCourse\", course);\r\n    },\r\n\r\n    async getAllCourses ({commit}) {\r\n      const response = await CourseService.listAll();\r\n      commit('setAllCourses', response.data.courses);\r\n    },\r\n\r\n    async deleteCourse(store, course) {\r\n      await Promise.all(course.lessons.map(lesson => {\r\n        return LessonService.delete(lesson.id);\r\n      }))\r\n      store.commit('deleteAllLessons', course);\r\n      await CourseService.delete(course.id);\r\n      store.commit(\"deleteCourse\", course.id);\r\n    },\r\n\r\n    // lesson management\r\n    addLesson ({commit}, lesson) {\r\n      commit(\"addLesson\", lesson);\r\n    },\r\n\r\n    async deleteLesson({commit}, lesson) {\r\n      await LessonService.delete(lesson.id)\r\n      commit('deleteLesson', lesson)\r\n    },\r\n\r\n    addExercise ({commit}, payload) {\r\n      commit(\"addExercise\", payload)\r\n    },\r\n\r\n    // takes in lesson, oldRhythm and newRhythm as args\r\n    async editRhythm (store, payload) {\r\n      try {\r\n        await LessonService.edit({\r\n          lessonObj: payload.newLesson\r\n        });\r\n        await store.dispatch(\"getLessons\", store.state.user.id);\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    },\r\n\r\n    // subscription management\r\n    async subscribe(store, payload) {\r\n      try {\r\n        await SubscriptionService.subscribe(payload);\r\n        store.dispatch(\"getCoursesForStudent\", {\r\n          id: payload.studentId\r\n        });\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    },\r\n\r\n    async getAllTutors ({commit}) {\r\n      try {\r\n        const response = await SubscriptionService.getAllTutors();\r\n        var tutors = response.data.tutors.map(tutor => {\r\n          tutor.lessons = null;\r\n          return tutor;\r\n        });\r\n        commit(\"setAllTutors\", tutors);\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    },\r\n\r\n    async getCoursesForTutor ({commit}, tutor) {\r\n      const response = await CourseService.list(tutor.id);\r\n      var courses = response.data.courses\r\n      commit(\"setUserOwnedCourses\", courses);\r\n    },\r\n\r\n    // for student to use when logged in as student to get lessons of his subscribed tutor\r\n    async getCoursesForStudent ({commit}, student) {\r\n      const response = await SubscriptionService.getSubscriptionInfoOfStudent(student.id);\r\n      var courses = response.data.courses\r\n      commit(\"setUserSubscribedCourses\", courses);\r\n    },\r\n\r\n  }\r\n})\r\n","import axios from 'axios'\r\nimport store from '@/store/store'\r\n\r\nexport default () => {\r\n  return axios.create({\r\n    baseURL: process.env.NODE_ENV == 'production' ? '/api/' : 'http://localhost:8081/',\r\n    headers: {\r\n      Authorization: `Bearer ${store.state.token}`\r\n    }\r\n  })\r\n}\r\n","import Api from '@/services/Api'\r\n\r\nexport default {\r\n  create (courseInfo) {\r\n    return Api().post('course/new', courseInfo)\r\n  },\r\n\r\n  list (userId) {\r\n    return Api().get(`course/list?uid=${userId}`)\r\n  },\r\n\r\n  listAll (value) {\r\n    if (value) {\r\n      return Api().get(`course/listall?search=${value}`)\r\n    } else {\r\n      return Api().get(`course/listall`)\r\n    }\r\n  },\r\n\r\n  show (cid) {\r\n    return Api().get(`course/show?cid=${cid}`)\r\n  },\r\n\r\n  edit (courseInfo) {\r\n    return Api().put('course/edit', courseInfo)\r\n  },\r\n\r\n  delete (courseId) {\r\n    return Api().delete(`course/del?cid=${courseId}`)\r\n  }\r\n}\r\n","<template lang=\"pug\">\r\n  div\r\n    v-container\r\n      v-row.mt-10\r\n        v-col.text-left(cols=\"8\")\r\n          h1 Welcome to Music Academy\r\n\r\n      v-row.mb-12\r\n        v-col(cols=\"8\")\r\n          v-autocomplete(v-model='model' :items='items' :loading='isLoading' :search-input.sync='search' cache-items multiple clearable hide-details hide-selected item-text='name' item-value='symbol' label='Search for a course...' solo)\r\n            template(v-slot:no-data)\r\n              v-list-item\r\n                v-list-item-title\r\n                  | Search for your favorite \r\n                  strong Course\r\n            //- template(v-slot:selection='{ attr, on, item, selected }')\r\n            //-   v-chip.white--text(v-bind='attr' :input-value='selected' color='indigo' v-on='on')\r\n            //-     v-icon(left) mdi-coin\r\n            //-     span(v-text='item')\r\n            template(v-slot:item='{ item }')\r\n              v-list-item(@click=\"go_to_course($event, item.id)\")\r\n                v-list-item-content {{ item.name }}\r\n\r\n      v-divider\r\n\r\n      v-row.mt-10\r\n        v-col.text-left(cols=\"12\")\r\n          h2 Popular Courses\r\n        v-col(v-for=\"course in allCourses\" sm=\"6\" md=\"4\" lg=\"3\")\r\n          v-card.mx-auto\r\n            v-img.white--text.align-end(height=\"200px\" src='https://images.pexels.com/photos/1246437/pexels-photo-1246437.jpeg?cs=srgb&dl=close-up-photo-of-person-playing-piano-1246437.jpg&fm=jpg')\r\n              v-card-title(style=\"text-shadow: 1px 1px 2px #000000;\") {{ course.name }}\r\n            v-card-subtitle.pb-0.text-left Drum\r\n            v-card-text.text-left.text--primary.pb-0\r\n              div Whitehaven Beach\r\n            v-card-actions\r\n              v-btn(color='indigo' text @click=\"go_to_course($event, course.id)\")\r\n                | Find out more\r\n\r\n\r\n\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex'\r\nimport CourseService from '@/services/CourseService'\r\nimport _ from 'lodash'\r\n\r\nexport default {\r\n  name: 'Home',\r\n  data () {\r\n    return {\r\n      isLoading: false,\r\n      items: [{\r\n        name: 'hey',\r\n        id: 1\r\n      }, {\r\n        name: 'yo',\r\n        id: 2\r\n      }, {\r\n        name: 'yo',\r\n        id: 3\r\n      }],\r\n      model: null,\r\n      search: null,\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    model (value) {\r\n      console.log(value)\r\n    },\r\n\r\n    search: _.debounce(async function (value) {\r\n      if (value != '' &&  value != undefined) {\r\n        this.isLoading = true\r\n        try {\r\n          this.items = (await CourseService.listAll(value)).data.courses\r\n          this.isLoading = false\r\n        } catch (err) {\r\n          this.isLoading = false\r\n          console.log(err)\r\n        }\r\n      }\r\n    }, 700)\r\n  },\r\n\r\n  computed: mapState(['user', 'allCourses']),\r\n\r\n  methods: {\r\n    go_to_course (event, id) {\r\n      this.$router.push(`/course/show/${id}`)\r\n    },\r\n  },\r\n\r\n  mounted: async function () {\r\n    await this.$store.dispatch('getAllCourses')\r\n  }\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=1c893ec2&scoped=true&lang=pug&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1c893ec2\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAutocomplete } from 'vuetify/lib/components/VAutocomplete';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardSubtitle } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VAutocomplete,VBtn,VCard,VCardActions,VCardSubtitle,VCardText,VCardTitle,VCol,VContainer,VDivider,VImg,VListItem,VListItemContent,VListItemTitle,VRow})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"register\"}},[_c('panel',{attrs:{\"title\":\"Register\"}},[_c('v-card-text',[_c('v-form',{ref:\"form\",staticClass:\"text-center\",on:{\"submit\":function($event){$event.preventDefault();return _vm.register($event)}}},[_c('v-text-field',{attrs:{\"label\":\"Username\",\"name\":\"username\",\"prepend-icon\":\"mdi-account\",\"type\":\"text\",\"rules\":_vm.nameRules},model:{value:(_vm.username),callback:function ($$v) {_vm.username=$$v},expression:\"username\"}}),_c('v-text-field',{attrs:{\"label\":\"Email\",\"name\":\"email\",\"prepend-icon\":\"mdi-account\",\"type\":\"text\",\"rules\":_vm.emailRules},model:{value:(_vm.email),callback:function ($$v) {_vm.email=$$v},expression:\"email\"}}),_c('v-text-field',{attrs:{\"label\":\"Password\",\"name\":\"password\",\"prepend-icon\":\"mdi-lock\",\"type\":\"password\",\"rules\":_vm.passwordRules},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_c('v-radio-group',{attrs:{\"row\":\"\"},model:{value:(_vm.role),callback:function ($$v) {_vm.role=$$v},expression:\"role\"}},[_c('v-radio',{attrs:{\"label\":\"Student\",\"value\":\"Student\",\"color\":\"indigo\"}}),_c('v-radio',{attrs:{\"label\":\"Tutor\",\"value\":\"Tutor\",\"color\":\"indigo\"}})],1),_c('v-spacer'),_c('v-btn',{staticClass:\"mt-5\",attrs:{\"type\":\"submit\",\"loading\":_vm.loading,\"disabled\":_vm.loading}},[_vm._v(\"Register\")]),_c('v-spacer')],1)],1),_c('v-card-text',[_c('div',{staticClass:\"error\",domProps:{\"innerHTML\":_vm._s(_vm.error)}},[_vm._v(_vm._s(_vm.error))])])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Api from '@/services/Api'\r\n\r\nexport default {\r\n  register (credentials) {\r\n    return Api().post('register', credentials)\r\n  },\r\n\r\n  login (credentials) {\r\n    return Api().post('login', credentials)\r\n  }\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"panel\"}},[_c('v-row',{attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"10\",\"md\":_vm.md || 6}},[_c('v-card',{staticClass:\"elevation-8\"},[_c('v-toolbar',{attrs:{\"light\":\"\"}},[_c('v-toolbar-title',{staticClass:\"text-h4\"},[_vm._v(_vm._s(_vm.title))]),_c('v-spacer')],1),_vm._t(\"default\",[_vm._v(\"No slot defined\")])],2)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\r\n  #panel\r\n    v-row(align='center' justify='center')\r\n      v-col(cols='12' sm='10' :md='md || 6')\r\n        v-card.elevation-8\r\n          v-toolbar(light)\r\n            v-toolbar-title.text-h4 {{ title }}\r\n            v-spacer\r\n          slot No slot defined\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'Panel',\r\n  props: ['title', 'md']\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Panel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Panel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Panel.vue?vue&type=template&id=b3aee92e&scoped=true&lang=pug&\"\nimport script from \"./Panel.vue?vue&type=script&lang=js&\"\nexport * from \"./Panel.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b3aee92e\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VCard,VCol,VRow,VSpacer,VToolbar,VToolbarTitle})\n","<template lang=\"pug\">\r\n  #register\r\n    panel(title=\"Register\")\r\n      //- v-tooltip(bottom)\r\n      //-   template(v-slot:activator=\"{ on, attrs }\")\r\n      //-     v-toolbar-title(dark v-bind=\"attrs\" v-on=\"on\") Login form\r\n      //-   span Log in\r\n      v-card-text\r\n        v-form.text-center(ref=\"form\" v-on:submit.prevent=\"register\")\r\n          v-text-field(\r\n            label='Username' \r\n            name='username' \r\n            prepend-icon='mdi-account' \r\n            type='text' \r\n            v-model='username' \r\n            :rules=\"nameRules\")\r\n            \r\n          v-text-field(\r\n            label=\"Email\" \r\n            name=\"email\" \r\n            prepend-icon=\"mdi-account\" \r\n            type=\"text\" \r\n            v-model=\"email\" \r\n            :rules=\"emailRules\")\r\n            \r\n          v-text-field(\r\n            label=\"Password\" \r\n            name=\"password\" \r\n            prepend-icon=\"mdi-lock\" \r\n            type=\"password\" \r\n            v-model=\"password\" \r\n            :rules=\"passwordRules\")\r\n\r\n          v-radio-group(v-model=\"role\" row=\"\")\r\n            v-radio(label=\"Student\" value=\"Student\" color=\"indigo\")\r\n            v-radio(label=\"Tutor\" value=\"Tutor\" color=\"indigo\")\r\n\r\n          v-spacer\r\n          v-btn.mt-5(type=\"submit\" :loading=\"loading\" :disabled=\"loading\") Register\r\n          v-spacer\r\n      v-card-text\r\n        .error(v-html=\"error\") {{ error }}\r\n</template>\r\n\r\n<script>\r\nimport AuthenticationService from \"@/services/AuthenticationService\";\r\nimport Panel from \"@/components/Panel\";\r\n\r\nexport default {\r\n  name: \"Register\",\r\n  components: {\r\n    'panel': Panel\r\n  },\r\n  data() {\r\n    return {\r\n      username: \"\",\r\n      nameRules: [\r\n        v => !!v || \"Username is required\",\r\n        v => new RegExp(/^[a-zA-Z ]{2,30}$/).test(v) || \"Name must be alphanumeric characters and of length 8 - 32\"\r\n      ],\r\n      email: \"\",\r\n      emailRules: [\r\n        v => !!v || \"E-mail is required\",\r\n        v => /.+@.+\\..+/.test(v) || \"E-mail must be valid\"\r\n      ],\r\n      password: \"\",\r\n      passwordRules: [\r\n        v => !!v || \"Password is required\",\r\n        v => new RegExp(\"^[a-zA-Z0-9]{8,32}$\").test(v) || \"Password must be alphanumeric characters and of length 8 - 32\",\r\n      ],\r\n      error: null,\r\n      loading: false,\r\n      role: \"\"\r\n    };\r\n  },\r\n  methods: {\r\n    async register() {\r\n      if (!this.$refs.form.validate())\r\n        return;\r\n      this.error = \"\";\r\n      this.loading = true;\r\n      try {\r\n        const response = await AuthenticationService.register({\r\n          username: this.username,\r\n          email: this.email,\r\n          password: this.password,\r\n          role: this.role\r\n        });\r\n        this.loading = false;\r\n        this.$store.dispatch(\"setToken\", response.data.token);\r\n        this.$store.dispatch(\"setUser\", response.data.user);\r\n        this.$router.push(\"/\");\r\n      } catch (err) {\r\n        this.error = err.response.data.error;\r\n        this.loading = false;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Register.vue?vue&type=template&id=f931c8aa&scoped=true&lang=pug&\"\nimport script from \"./Register.vue?vue&type=script&lang=js&\"\nexport * from \"./Register.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f931c8aa\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VRadio } from 'vuetify/lib/components/VRadioGroup';\nimport { VRadioGroup } from 'vuetify/lib/components/VRadioGroup';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCardText,VForm,VRadio,VRadioGroup,VSpacer,VTextField})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"student\"}},[_c('panel',{attrs:{\"title\":\"All Courses\"}},[_c('v-list',_vm._l((_vm.allCourses),function(course){return _c('v-list-item',{key:course.id,on:{\"click\":function($event){return _vm.go_to_course($event, _vm.tutor)}}},[_c('v-list-item-content',[_c('v-list-item-title',{domProps:{\"textContent\":_vm._s(_vm.tutor.username)}})],1),_c('v-list-item-avatar',[_c('v-img',{attrs:{\"src\":_vm.avatar}})],1)],1)}),1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\r\n  #student\r\n    panel(title=\"All Courses\")\r\n      v-list\r\n        v-list-item(v-for='course in allCourses' :key='course.id' @click='go_to_course($event, tutor)')\r\n          //- v-list-item-icon\r\n          //-   v-icon(v-if='rhythm.icon' color='pink') mdi-star\r\n          v-list-item-content\r\n            v-list-item-title(v-text='tutor.username')\r\n          v-list-item-avatar\r\n            v-img(:src='avatar')\r\n</template>\r\n\r\n<script>\r\nimport Panel from '@/components/Panel'\r\nimport { mapState } from 'vuex'\r\n\r\nexport default {\r\n  name: 'Student',\r\n  data () {\r\n    return {\r\n      avatar: 'https://cdn.vuetifyjs.com/images/lists/2.jpg'\r\n    }\r\n  },\r\n  components: {\r\n    'panel': Panel\r\n  },\r\n  computed: {\r\n    ...mapState(['user', 'allCourses'])\r\n  },\r\n  methods: {\r\n    async go_to_lessons (event, tutor) {\r\n      if (tutor.lessons == null) {\r\n        await this.$store.dispatch('getLessonsForStudent', tutor)\r\n      }\r\n      this.$router.push(`/lesson/index/${tutor.id}`)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Student.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Student.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Student.vue?vue&type=template&id=f05a6982&scoped=true&lang=pug&\"\nimport script from \"./Student.vue?vue&type=script&lang=js&\"\nexport * from \"./Student.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f05a6982\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAvatar } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\ninstallComponents(component, {VImg,VList,VListItem,VListItemAvatar,VListItemContent,VListItemTitle})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"login\"}},[_c('panel',{attrs:{\"title\":\"Log In\"}},[_c('v-card-text',[_c('v-form',{ref:\"form\",staticClass:\"text-center\",on:{\"submit\":function($event){$event.preventDefault();return _vm.login($event)}}},[_c('v-text-field',{attrs:{\"label\":\"Email\",\"name\":\"email\",\"prepend-icon\":\"mdi-account\",\"type\":\"text\",\"rules\":_vm.emailRules},model:{value:(_vm.email),callback:function ($$v) {_vm.email=$$v},expression:\"email\"}}),_c('v-text-field',{attrs:{\"id\":\"password\",\"label\":\"Password\",\"name\":\"password\",\"prepend-icon\":\"mdi-lock\",\"type\":\"password\",\"rules\":_vm.passwordRules},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_c('v-spacer'),_c('v-btn',{staticClass:\"mt-5\",attrs:{\"loading\":_vm.loading,\"disabled\":_vm.loading,\"type\":\"submit\"}},[_vm._v(\"Log In\")]),_c('v-spacer')],1)],1),_c('v-card-text',[_c('div',{staticClass:\"error text-center\",domProps:{\"innerHTML\":_vm._s(_vm.error)}},[_vm._v(_vm._s(_vm.error))])])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\r\n  //- div.register\r\n    //- h1 Register an account with us!\r\n    //- input(v-model=\"email\" name=\"email\" type=\"text\" placeholder=\"email\")\r\n    //- br\r\n    //- input(v-model=\"password\" name=\"password\" type=\"text\" placeholder=\"password\")\r\n    //- br\r\n    //- button(@click=\"register\") register\r\n    //- br\r\n    //- .error(v-html=\"error\") {{ error }}\r\n\r\n  #login\r\n    panel(title=\"Log In\")\r\n      //- v-tooltip(bottom)\r\n      //-   template(v-slot:activator='{ on, attrs }')\r\n      //-     v-toolbar-title(dark v-bind='attrs' v-on='on') Login form\r\n      //-   span Log in\r\n      v-card-text\r\n        v-form.text-center(ref=\"form\" v-on:submit.prevent=\"login\")\r\n          v-text-field(\r\n            label='Email' \r\n            name='email' \r\n            prepend-icon='mdi-account' \r\n            type='text' \r\n            v-model='email' \r\n            :rules=\"emailRules\")\r\n          v-text-field#password(\r\n            label='Password' \r\n            name='password' \r\n            prepend-icon='mdi-lock' \r\n            type='password' \r\n            v-model='password' \r\n            :rules=\"passwordRules\")\r\n          v-spacer\r\n          v-btn.mt-5(:loading='loading' :disabled=\"loading\" type=\"submit\") Log In\r\n          v-spacer\r\n      v-card-text\r\n        .error.text-center(v-html=\"error\") {{ error }}\r\n</template>\r\n\r\n<script>\r\nimport AuthenticationService from '@/services/AuthenticationService'\r\nimport Panel from '@/components/Panel'\r\nimport SubscriptionService from '@/services/SubscriptionService'\r\nimport CourseService from '@/services/CourseService'\r\n\r\nexport default {\r\n  name: 'LogIn',\r\n  components: {\r\n    'panel': Panel\r\n  },\r\n  data () {\r\n    return {\r\n      email: '',\r\n      emailRules: [\r\n        v => !!v || 'E-mail is required',\r\n        v => /.+@.+\\..+/.test(v) || 'E-mail must be valid'\r\n      ],\r\n      password: '',\r\n      passwordRules: [\r\n        v => !!v || 'Password is required',\r\n      ],\r\n      error: null,\r\n      loading: false\r\n    }\r\n  },\r\n  methods: {\r\n    async login () {\r\n      if (!this.$refs.form.validate())\r\n        return\r\n      this.error = ''\r\n      this.loading = true\r\n      try {\r\n        const response = await AuthenticationService.login({\r\n          email: this.email,\r\n          password: this.password\r\n        })\r\n\r\n        this.loading = false\r\n        this.$store.dispatch('setToken', response.data.token)\r\n        this.$store.dispatch('setUser', response.data.user)\r\n\r\n        if (response.data.user.isStudent) {\r\n          const studentResponse = await SubscriptionService.getSubscriptionInfoOfStudent(response.data.user.id)\r\n          const userSubscribedCourses = studentResponse.data.courses\r\n          const reducer = (course, init) => course + init.unreadTutorPost\r\n          this.$store.dispatch('setNotifications', userSubscribedCourses.reduce(reducer, 0))\r\n        } else {\r\n          const tutorResponse = await CourseService.list(response.data.user.id);\r\n          const userOwnedCourses = tutorResponse.data.courses\r\n          const reducer = (course, init) => course + init.unreadStudentPost\r\n          this.$store.dispatch('setNotifications', userOwnedCourses.reduce(reducer, 0))\r\n        }\r\n        \r\n        if (response.data.user.isStudent) {\r\n          await this.$store.dispatch('getAllCourses')\r\n          await this.$store.dispatch('getCoursesForStudent', response.data.user)\r\n        } else {\r\n          await this.$store.dispatch('getCoursesForTutor', response.data.user)\r\n        }\r\n        this.$router.push({\r\n          name: 'home'\r\n        })\r\n      } catch (err) {\r\n        // console.log(err)\r\n        this.error = err.response.data.error\r\n        this.loading = false\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LogIn.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LogIn.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LogIn.vue?vue&type=template&id=a4138900&scoped=true&lang=pug&\"\nimport script from \"./LogIn.vue?vue&type=script&lang=js&\"\nexport * from \"./LogIn.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a4138900\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCardText,VForm,VSpacer,VTextField})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.course)?_c('div',{attrs:{\"id\":\"show-course\",\"fluid\":\"\"}},[_c('v-container',{attrs:{\"id\":\"course-info\",\"fluid\":\"\"}},[_c('v-row',{staticClass:\"px-sm-16 mx-md-8 mx-lg-16\"},[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"8\"}},[_c('v-row',[_c('v-col',{staticClass:\"text-left\"},[_c('h1',{staticClass:\"font-weight-bold\",staticStyle:{\"font-size\":\"40px\",\"line-height\":\"1.2\"}},[_vm._v(_vm._s(_vm.course.name))])])],1),_c('v-row',[_c('v-col',{staticClass:\"pt-0\"},[_c('h3',[_vm._v(\"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce aliquam orci sed mi tempus ullamcorper. Quisque vitae lacus ut ipsum ultrices rhoncus quis a arcu. Sed placerat nisl sed tellus malesuada, id ornare augue vulputate. Pellentesque laoreet ipsum quis tempor aliquet.\")])])],1),_c('v-row',[_c('v-col',{staticClass:\"py-0\"},[_c('h4',{staticClass:\"font-weight-bold\"},[_vm._v(\"Created by: \"+_vm._s(_vm.course.TutorId))])])],1),_c('v-row',[_c('v-col',{attrs:{\"sm\":\"4\",\"lg\":\"3\"}},[_c('v-row',[_c('v-col',{staticClass:\"pr-0\",attrs:{\"sm\":\"4\",\"md\":\"3\"}},[_c('v-icon',{attrs:{\"color\":\"white\",\"size\":\"30\"}},[_vm._v(\"mdi-guitar-acoustic\")])],1),_c('v-col',{staticClass:\"my-auto\",attrs:{\"sm\":\"8\",\"md\":\"9\"}},[_c('p',{staticClass:\"ma-0\"},[_vm._v(\"Instrument: Drum\")])])],1)],1),_c('v-col',{attrs:{\"sm\":\"4\",\"lg\":\"3\"}},[_c('v-row',[_c('v-col',{staticClass:\"pr-0\",attrs:{\"sm\":\"4\",\"md\":\"3\"}},[_c('v-icon',{attrs:{\"color\":\"white\",\"size\":\"24\"}},[_vm._v(\"mdi-earth\")])],1),_c('v-col',{staticClass:\"my-auto\",attrs:{\"sm\":\"8\",\"md\":\"9\"}},[_c('p',{staticClass:\"ma-0\"},[_vm._v(\"English\")])])],1)],1),_c('v-col',{attrs:{\"sm\":\"4\",\"lg\":\"3\"}},[_c('v-row',[_c('v-col',{staticClass:\"pr-0\",attrs:{\"sm\":\"4\",\"md\":\"3\"}},[_c('v-icon',{attrs:{\"color\":\"white\",\"size\":\"24\"}},[_vm._v(\"mdi-calendar-clock\")])],1),_c('v-col',{staticClass:\"my-auto\",attrs:{\"sm\":\"8\",\"md\":\"9\"}},[_c('p',{staticClass:\"ma-0\"},[_vm._v(\"Last updated: \"+_vm._s(new Date(_vm.course.updatedAt).toLocaleString([], { year: 'numeric', month: 'numeric', day:'numeric'})))])])],1)],1)],1)],1),(_vm.is_student && !_vm.isSubscribed)?_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"4\"}},[_c('v-card',[_c('v-img',{staticClass:\"white--text align-end\",staticStyle:{\"cursor\":\"pointer\"},attrs:{\"gradient\":\"to top right, rgba(0,0,0,.5), rgba(0,0,0,.5)\",\"height\":\"200px\",\"src\":\"https://images.pexels.com/photos/1246437/pexels-photo-1246437.jpeg?cs=srgb&dl=close-up-photo-of-person-playing-piano-1246437.jpg&fm=jpg\"},on:{\"click\":function($event){return _vm.alert('hey')}}},[_c('div',{staticStyle:{\"position\":\"absolute\",\"left\":\"0\",\"top\":\"0\",\"width\":\"100%\",\"height\":\"100%\"}},[_c('img',{staticStyle:{\"position\":\"absolute\",\"width\":\"60px\",\"left\":\"calc(50% - 30px)\",\"top\":\"calc(50% - 30px)\",\"height\":\"60px\"},attrs:{\"id\":\"play-button\",\"src\":require('../../assets/play_button.png'),\"color\":\"white\",\"size\":\"62\"}}),_c('h3',{staticClass:\"text--white\",staticStyle:{\"bottom\":\"12px\",\"text-align\":\"center\",\"position\":\"absolute\",\"left\":\"0\",\"right\":\"0\"}},[_vm._v(\"Preview this course\")])])]),_c('v-row',[_c('v-col',{staticClass:\"text-left\"},[_c('h1',{staticClass:\"pl-5 font-weight-bold\",staticStyle:{\"font-size\":\"36px\"}},[_vm._v(\"S$\"+_vm._s(_vm.course.price.toFixed(2)))])])],1),_c('v-row',[_c('v-col',{staticClass:\"text-center\"},[(_vm.course.price == 0)?_c('v-btn',{staticStyle:{\"width\":\"90%\"},attrs:{\"color\":\"#ec5252\",\"dark\":\"\",\"x-large\":\"\"},on:{\"click\":_vm.subscribe}},[_vm._v(\"Enroll Now\")]):_c('v-btn',{staticStyle:{\"width\":\"90%\"},attrs:{\"color\":\"#ec5252\",\"dark\":\"\",\"x-large\":\"\"},on:{\"click\":_vm.subscribe}},[_vm._v(\"Buy Now\")])],1)],1)],1)],1):_c('v-col',{staticClass:\"my-auto\",attrs:{\"cols\":\"12\",\"md\":\"4\"}},[_c('v-row',[_c('v-col',{staticClass:\"text-center\"},[_c('v-btn',{staticStyle:{\"width\":\"90%\"},attrs:{\"color\":\"#26A69A\",\"dark\":\"\",\"x-large\":\"\"},on:{\"click\":function($event){return _vm.goToLesson($event, _vm.course.lessons[0])}}},[_vm._v(\"Start Learning!\")])],1)],1)],1)],1)],1),_c('v-container',{attrs:{\"fluid\":\"\"}},[_c('v-row',{staticClass:\"px-sm-16 mx-md-8 mx-lg-16\"},[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-sheet',{staticClass:\"px-16 py-5\",staticStyle:{\"border\":\"1px solid #E0E0E0\"},attrs:{\"color\":\"#fbfbf8\",\"rounded\":\"\"}},[_c('v-row',[_c('v-col',{staticClass:\"py-0 px-0\"},[_c('h2',{staticClass:\"py-3 pl-0\",staticStyle:{\"color\":\"#3c3b37\",\"font-size\":\"30px\"}},[_vm._v(\"What you will learn\")])])],1),_c('v-row',[_c('v-col',{staticClass:\"py-0 px-0\",attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-row',[_c('v-col',{staticClass:\"py-2 pr-0\",attrs:{\"cols\":\"1\"}},[_c('v-icon',{staticClass:\"d-inline mb-2\",attrs:{\"size\":\"16\",\"color\":\"#ec5252\"}},[_vm._v(\"mdi-star\")])],1),_c('v-col',{staticClass:\"py-2 pr-0\",attrs:{\"cols\":\"10\"}},[_c('p',{staticClass:\"d-inline mb-0 text-uppercase\",staticStyle:{\"line-height\":\"1\",\"vertical-align\":\"middle\"}},[_vm._v(\"mdi-star\")])])],1)],1),_c('v-col',{staticClass:\"py-0 px-0\",attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-row',[_c('v-col',{staticClass:\"py-2 pr-0\",attrs:{\"cols\":\"1\"}},[_c('v-icon',{staticClass:\"d-inline mb-2\",attrs:{\"size\":\"16\",\"color\":\"#ec5252\"}},[_vm._v(\"mdi-star\")])],1),_c('v-col',{staticClass:\"py-2 pr-0\",attrs:{\"cols\":\"10\"}},[_c('div',{staticClass:\"d-inline mb-0 text-uppercase\",staticStyle:{\"line-height\":\"1\",\"vertical-align\":\"middle\",\"width\":\"100%\"}},[_vm._v(\" Lorem ipsum dolor sit amet, consectetur adipiscing elit\")])])],1)],1)],1)],1)],1)],1)],1),_c('v-container',{attrs:{\"fluid\":\"\"}},[_c('v-row',{staticClass:\"px-sm-16 mx-md-8 mx-lg-16\"},[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-sheet',{staticClass:\"px-10 py-5\"},[_c('h2',{staticClass:\"py-3\",staticStyle:{\"color\":\"#3c3b37\",\"font-size\":\"30px\"}},[_vm._v(\"About the course\")]),_c('p',[_vm._v(\"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam at urna vitae purus ornare tincidunt vitae nec odio. Quisque dui urna, facilisis a convallis nec, porttitor quis orci. Quisque in condimentum arcu. Sed porta aliquet urna vitae viverra. Curabitur facilisis ullamcorper dapibus. Quisque bibendum, arcu vitae efficitur placerat, est nulla ultricies ligula, ac feugiat ante tellus sed dui. Nunc id lobortis eros. Donec id urna vel ex convallis vehicula. Suspendisse pulvinar non sapien sed aliquet. Morbi dictum condimentum arcu quis auctor. Nulla a nisi purus. In tempor sollicitudin pulvinar. Maecenas cursus sit amet tortor sed mattis. Praesent non lorem nec ipsum cursus vulputate. In at convallis metus. Praesent sit amet condimentum est. Praesent ut dui est. Morbi imperdiet libero vitae massa convallis, sed semper quam facilisis. Vivamus vitae feugiat tortor, eu lacinia sem. Suspendisse aliquam diam non arcu gravida, malesuada mattis elit tempus. Quisque sed arcu enim. Maecenas scelerisque venenatis massa, et vulputate ex tristique sit amet. Etiam eu dolor nec nisi auctor lobortis nec quis neque. Phasellus laoreet eros in placerat aliquet. Duis finibus posuere tortor quis posuere.\")])])],1)],1)],1),_c('v-container',{attrs:{\"fluid\":\"\"}},[_c('v-row',{staticClass:\"px-sm-16 mx-md-8 mx-lg-16\"},[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-sheet',{staticClass:\"px-16 py-5\"},[_c('v-row',[_c('v-col',{staticClass:\"py-0 px-0\"},[_c('h2',{staticClass:\"pl-0\",staticStyle:{\"color\":\"#3c3b37\",\"font-size\":\"30px\"}},[_vm._v(\"Prerequisites for this Course\")])])],1),_c('v-row',{attrs:{\"align\":\"start\"}},[_c('v-col',{staticClass:\"py-0 px-0\",attrs:{\"cols\":\"6\"}},[_c('v-row',[_c('v-col',{staticClass:\"pr-0\",attrs:{\"cols\":\"1\",\"align-self\":\"center\"}},[_c('v-icon',{staticClass:\"d-inline mb-2\",attrs:{\"size\":\"30\",\"color\":\"#ec5252\"}},[_vm._v(\"mdi-square-small\")])],1),_c('v-col',{staticClass:\"pr-0\",attrs:{\"cols\":\"10\",\"align-self\":\"center\"}},[_c('p',{staticClass:\"d-inline mb-0\",staticStyle:{\"line-height\":\"1\"}},[_vm._v(\"mdi-star\")])])],1)],1),_c('v-col',{staticClass:\"py-0 px-0\",attrs:{\"cols\":\"6\"}}),_c('v-col',{staticClass:\"py-0 px-0\",attrs:{\"cols\":\"6\"}},[_c('v-row',[_c('v-col',{staticClass:\"py-2 pr-0\",attrs:{\"cols\":\"1\"}},[_c('v-icon',{staticClass:\"d-inline mb-2\",attrs:{\"size\":\"30\",\"color\":\"#ec5252\"}},[_vm._v(\"mdi-square-small\")])],1),_c('v-col',{staticClass:\"py-2 pr-0\",attrs:{\"cols\":\"10\",\"align-self\":\"center\"}},[_c('p',{staticClass:\"d-inline mb-0\",staticStyle:{\"line-height\":\"1\",\"vertical-align\":\"middle\"}},[_vm._v(\" Lorem ipsum dolor sit amet, consectetur adipiscing elit\")])])],1)],1)],1)],1)],1)],1)],1),_c('v-container',{attrs:{\"fluid\":\"\"}},[_c('v-row',{staticClass:\"px-sm-16 mx-md-8 mx-lg-16\"},[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-sheet',{staticClass:\"px-16 py-5\"},[_c('v-row',[_c('v-col',{staticClass:\"py-0 px-0\"},[_c('h2',{staticClass:\"pl-0\",staticStyle:{\"color\":\"#3c3b37\",\"font-size\":\"30px\"}},[_vm._v(\"Who's suitable for the course\")])])],1),_c('v-row',{attrs:{\"align\":\"start\"}},[_c('v-col',{staticClass:\"py-0 px-0\",attrs:{\"cols\":\"6\"}},[_c('v-row',[_c('v-col',{staticClass:\"pr-0 py-0\",attrs:{\"cols\":\"1\",\"align-self\":\"center\"}},[_c('v-icon',{staticClass:\"d-inline mb-2\",attrs:{\"size\":\"30\",\"color\":\"#ec5252\"}},[_vm._v(\"mdi-square-small\")])],1),_c('v-col',{staticClass:\"pr-0\",attrs:{\"cols\":\"10\",\"align-self\":\"center\"}},[_c('p',{staticClass:\"d-inline mb-0\",staticStyle:{\"line-height\":\"1\"}},[_vm._v(\"mdi-star\")])])],1)],1),_c('v-col',{staticClass:\"py-0 px-0\",attrs:{\"cols\":\"6\"}}),_c('v-col',{staticClass:\"py-0 px-0\",attrs:{\"cols\":\"6\"}},[_c('v-row',[_c('v-col',{staticClass:\"py-0 pr-0\",attrs:{\"cols\":\"1\"}},[_c('v-icon',{staticClass:\"d-inline mb-2\",attrs:{\"size\":\"30\",\"color\":\"#ec5252\"}},[_vm._v(\"mdi-square-small\")])],1),_c('v-col',{staticClass:\"py-2 pr-0\",attrs:{\"cols\":\"10\",\"align-self\":\"center\"}},[_c('p',{staticClass:\"d-inline mb-0\",staticStyle:{\"line-height\":\"1\",\"vertical-align\":\"middle\"}},[_vm._v(\" Lorem ipsum dolor sit amet, consectetur adipiscing elit\")])])],1)],1)],1)],1)],1)],1)],1),_c('v-container',{attrs:{\"fluid\":\"\"}},[_c('v-row',{staticClass:\"px-sm-16 mx-md-8 mx-lg-16\"},[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-sheet',{staticClass:\"px-16 py-5\"},[_c('v-row',[_c('v-col',{staticClass:\"py-0 px-0\"},[_c('h2',{staticClass:\"pl-0 pb-2\",staticStyle:{\"color\":\"#3c3b37\",\"font-size\":\"30px\"}},[_vm._v(\"Course Content\")]),_c('div',{staticStyle:{\"color\":\"#9E9E9E\",\"font-size\":\"16px\"}},[_vm._v(_vm._s(_vm.course.lessons.length)+\" Lessons • \"+_vm._s(_vm.timeConverted)+\" of video content\")])])],1),_c('v-row',{attrs:{\"align\":\"start\"}},[_c('v-col',{staticClass:\"px-0\",attrs:{\"cols\":\"12\"}},[_c('v-card',[_c('v-toolbar',{attrs:{\"color\":\"grey lighten-2\",\"light\":\"\",\"flat\":\"\"}},[_c('v-toolbar-title',[_vm._v(_vm._s(_vm.course.name))]),_c('v-spacer'),_c('v-btn',{attrs:{\"icon\":\"\"}},[_c('v-icon',[_vm._v(\"mdi-unfold-more-horizontal\")])],1)],1),_c('v-list',_vm._l((_vm.course.lessons),function(lesson,idx){return _c('v-list-item',{key:lesson.id,attrs:{\"shaped\":\"\",\"disabled\":idx != 0},on:{\"click\":function($event){return _vm.goToLesson($event, lesson)}}},[(idx == 0)?_c('v-list-item-icon',[_c('v-icon',{attrs:{\"color\":\"#ec5252\"}},[_vm._v(\"mdi-play\")])],1):_c('v-list-item-icon',[_c('v-icon',{attrs:{\"color\":\"rgba(0, 0, 0, 0.38)\"}},[_vm._v(\"mdi-play\")])],1),_c('v-list-item-content',[_c('v-list-item-title',{domProps:{\"textContent\":_vm._s(lesson.name)}})],1),_c('v-spacer'),_c('v-list-item-icon',[_c('div',[_vm._v(_vm._s(lesson.duration)+\" mins\")])])],1)}),1)],1)],1)],1)],1)],1)],1)],1),_c('v-container',{attrs:{\"fluid\":\"\"}},[_c('v-row',{staticClass:\"justify-center\",attrs:{\"no-gutters\":\"\"}},[_c('v-col',{staticClass:\"pa-0\",attrs:{\"cols\":\"12\",\"md\":\"9\"}},[_c('lesson',{attrs:{\"lesson\":_vm.course.lessons[0]}})],1),_c('v-col',{staticClass:\"pa-0\",attrs:{\"cols\":\"12\",\"md\":\"3\"}})],1)],1)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.course && _vm.lesson)?_c('div',[_c('v-container',{staticClass:\"pa-0\",attrs:{\"fluid\":\"\"}},[_c('v-row',{attrs:{\"no-gutters\":\"\"}},[_c('v-col',{staticClass:\"text-left pa-0\",attrs:{\"cols\":\"9\"}},[_c('v-row',{staticClass:\"ma-0\",staticStyle:{\"width\":\"100%\"}},[_c('v-col',{staticClass:\"pa-0\",attrs:{\"id\":\"title\"}},[_c('h1',{staticClass:\"font-weight-bold pl-8 py-2\"},[_vm._v(_vm._s(_vm.course.name))])])],1),_c('v-row',{staticClass:\"ma-0\",staticStyle:{\"width\":\"100%\"}},[_c('v-col',{staticClass:\"pa-0\"},[_c('video-player',{attrs:{\"exercise\":this.lesson.exercises[0],\"videoSrc\":_vm.src}})],1)],1),(_vm.user.isStudent)?_c('v-container',{attrs:{\"id\":\"dicussion\"}},[_c('v-row',{staticClass:\"justify-center\"},[_c('v-col',{staticClass:\"text-left pb-0\",attrs:{\"cols\":\"11\"}},[_c('h1',{staticClass:\"font-weight-bold pt-2 pl-4\"},[_vm._v(\"Ask your tutor!\")])]),(_vm.lesson.thread)?_c('v-col',{staticClass:\"pb-0\",attrs:{\"cols\":\"11\"}},[(_vm.lesson.thread.posts)?_c('v-list',_vm._l((_vm.lesson.thread.posts),function(post,idx){return _c('v-list-item',{key:post.id},[_c('v-list-item-content',{staticClass:\"pb-0\"},[_c('v-container',{staticClass:\"pt-0 pb-4 px-0\",attrs:{\"fluid\":\"\"}},[(idx == 0 || post.updatedAt.substring(0, 10) != _vm.lesson.thread.posts[idx - 1].updatedAt.substring(0, 10))?_c('v-row',{staticClass:\"py-0\"},[_c('v-col',{staticClass:\"py-0\"},[_c('v-chip',{staticStyle:{\"font-size\":\"12px\"},attrs:{\"label\":\"\",\"color\":\"indigo darken-3\",\"dark\":\"\"}},[_vm._v(_vm._s(new Date(post.updatedAt).toLocaleString([], { year: 'numeric', month: 'numeric', day:'numeric'})))])],1)],1):_vm._e(),_c('v-row',{staticClass:\"mt-5\"},[_c('v-col',{staticClass:\"pb-0\",staticStyle:{\"margin-bottom\":\"-3px\"}},[_c('video',{attrs:{\"width\":\"100%\",\"height\":\"audo\",\"controls\":\"\"}},[_c('source',{attrs:{\"src\":post.videoUrl,\"type\":\"video/mp4\"}}),_vm._v(\"Your browser does not support HTML video.\")])])],1),(post.UserId != _vm.user.id)?_c('v-row',{staticClass:\"justify-end bottom-border mx-0 py-3\"},[_c('v-col',{staticClass:\"pr-8 py-0\",attrs:{\"cols\":\"6\"}},[_c('div',{staticClass:\"speech-bubble-other\"},[_c('v-row',{staticClass:\"ma-0\",staticStyle:{\"width\":\"100%\"}},[_c('v-col',{staticClass:\"text-left\"},[_c('div',[_vm._v(_vm._s(post.message))])])],1),_c('div',{staticClass:\"timestamp\"},[_vm._v(_vm._s(new Date(post.updatedAt).toLocaleString([], { hour: '2-digit', minute:'2-digit'})))])],1)]),_c('v-col',{staticClass:\"text-center pa-0\",attrs:{\"cols\":\"1\"}},[_c('v-avatar',{attrs:{\"color\":\"grey\",\"size\":\"40\"}},[_c('v-icon',[_vm._v(\"mdi-account\")])],1)],1)],1):_c('v-row',{staticClass:\"justify-start bottom-border mx-0 py-3\"},[_c('v-col',{staticClass:\"text-center pa-0\",attrs:{\"cols\":\"1\"}},[_c('v-avatar',{attrs:{\"color\":\"grey\",\"size\":\"40\"}},[_c('v-icon',[_vm._v(\"mdi-account\")])],1)],1),_c('v-col',{staticClass:\"pl-8 py-0\",attrs:{\"cols\":\"6\"}},[_c('div',{staticClass:\"speech-bubble-self\"},[_c('v-row',{staticClass:\"ma-0\",staticStyle:{\"width\":\"100%\"}},[_c('v-col',{staticClass:\"text-left\"},[_c('div',[_vm._v(_vm._s(post.message))])])],1),_c('div',{staticClass:\"timestamp\"},[_vm._v(_vm._s(new Date(post.updatedAt).toLocaleString([], { hour: '2-digit', minute:'2-digit'})))])],1)])],1)],1)],1)],1)}),1):_vm._e()],1):_vm._e()],1),_c('v-row',{staticClass:\"justify-center\"},[_c('v-col',{staticClass:\"pt-0\",attrs:{\"cols\":\"11\"}},[_c('v-form',{ref:\"form\",staticClass:\"px-4\"},[_c('v-row',[_c('v-col',{staticClass:\"pt-0\",attrs:{\"cols\":\"12\"}},[_c('v-textarea',{attrs:{\"outlined\":\"\",\"name\":\"input-7-4\",\"label\":\"Type your thoughts here...\"},model:{value:(_vm.message),callback:function ($$v) {_vm.message=$$v},expression:\"message\"}})],1),_c('v-col',{attrs:{\"cols\":\"6\"}},[_c('v-file-input',{attrs:{\"accept\":\"video/mp4, video/ogg\",\"placeholder\":\"Upload\",\"prepend-icon\":\"mdi-video\",\"label\":\"Upload Video\"},model:{value:(_vm.file),callback:function ($$v) {_vm.file=$$v},expression:\"file\"}})],1)],1),_c('v-row',[_c('v-col',[_c('v-btn',{attrs:{\"large\":\"\",\"color\":\"#ec5252\",\"dark\":\"\"},on:{\"click\":_vm.create_post}},[_vm._v(\"Submit practice video\")])],1)],1)],1)],1)],1)],1):_vm._e()],1),_c('v-col',{staticClass:\"pa-0\",class:{ 'full-height': _vm.fullHeight, 'partial-height': !_vm.fullHeight },staticStyle:{\"border-bottom\":\"1px solid #BDBDBD\",\"border-left\":\"1px solid #BDBDBD\",\"position\":\"fixed\",\"right\":\"0\"},attrs:{\"cols\":\"3\"}},[_c('h1',{staticClass:\"font-weight-bold pl-4 py-2\",staticStyle:{\"background-color\":\"#EEEEEE\"}},[_vm._v(\"Lessons\")]),_c('v-list',{staticClass:\"py-0\"},_vm._l((_vm.course.lessons),function(currLesson,i){return _c('v-list-item',{key:i,staticClass:\"px-0\"},[(currLesson == _vm.lesson)?_c('v-expansion-panels',{staticClass:\"px-0\",attrs:{\"accordion\":\"\",\"flat\":\"\",\"hover\":\"\",\"tile\":\"\",\"dense\":\"\",\"multiple\":\"\"},model:{value:(_vm.opened),callback:function ($$v) {_vm.opened=$$v},expression:\"opened\"}},[_c('v-expansion-panel',[_c('v-expansion-panel-header',{staticClass:\"py-0 pl-4 pr-2\",staticStyle:{\"font-size\":\"16px\",\"background-color\":\"#B2DFDB\"}},[_vm._v(_vm._s(i + 1)+\". \"+_vm._s(currLesson.name))]),_c('v-expansion-panel-content',{staticClass:\"pa-0\"},[_c('v-list',{staticClass:\"py-0\"},[_c('v-list-item-group',{staticClass:\"py-0\"},[(currLesson.exercises[0].videoUrl)?_c('v-list-item',{staticClass:\"px-0\",on:{\"click\":function($event){_vm.src = 'video'}}},[_c('v-list-item-content',[_c('div',{staticClass:\"pl-4 text-decoration-underline\",staticStyle:{\"font-size\":\"14px\",\"color\":\"#00897B\"}},[_vm._v(\"Explanation\")])])],1):_vm._e(),(currLesson.exercises[0].demoUrl)?_c('v-list-item',{staticClass:\"px-0\",on:{\"click\":function($event){_vm.src = 'demo'}}},[_c('v-list-item-content',[_c('div',{staticClass:\"pl-4 text-decoration-underline\",staticStyle:{\"font-size\":\"14px\",\"color\":\"#00897B\"}},[_vm._v(\"Demonstration\")])])],1):_vm._e()],1)],1)],1)],1)],1):_c('v-list-item-content',{staticClass:\"py-0 link\"},[_c('a',{staticClass:\"link pl-4 py-5\",staticStyle:{\"font-size\":\"16px\"},on:{\"click\":function($event){return _vm.goToLesson($event, currLesson)}}},[_vm._v(_vm._s(i + 1)+\". \"+_vm._s(currLesson.name))])])],1)}),1)],1)],1),_c('v-row',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.useScore),expression:\"useScore\"}],staticClass:\"justify-center\"},[(!_vm.useXml)?_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('div',{attrs:{\"id\":'vexflow-wrapper-' + _vm.lesson.id}})]):_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('div',{attrs:{\"id\":'osmd-wrapper-' + _vm.lesson.id}})])],1)],1)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"," /* eslint-disable */ \r\n\r\nimport Tone from 'tone'\r\n\r\nexport default {\r\n  lowPass: new Tone.Filter({\r\n    frequency: 11000,\r\n  }),\r\n\r\n  noise: new Tone.NoiseSynth({\r\n    volume: -12,\r\n    noise: {\r\n      type: 'pink',\r\n      playbackRate: 3,\r\n    },\r\n    envelope: {\r\n      attack: 0.001,\r\n      decay: 0.13,\r\n      sustain: 0,\r\n      release: 0.03,\r\n    },\r\n  }),\r\n\r\n  poly: new Tone.PolySynth(6, Tone.Synth, {\r\n    volume: -10,\r\n    oscillator: {\r\n      partials: [0, 2, 3, 4],\r\n    },\r\n    envelope: {\r\n      attack: 0.001,\r\n      decay: 0.17,\r\n      sustain: 0,\r\n      release: 0.05,\r\n    },\r\n  }),\r\n\r\n  freqEnv: [],\r\n  started: false,\r\n  player: null,\r\n  started: false,\r\n  initiated: false,\r\n  idx : 0,\r\n\r\n  notesToEvents(notes) {\r\n    var result = [];\r\n    var time = 0;\r\n    notes.forEach(element => {\r\n      var temp = element.split(\"/\")[2];\r\n      var isRest = false;\r\n      var isDot = false;\r\n      if (temp.includes(\"d\") || temp.includes(\"r\")) {\r\n        if (temp.includes(\"r\")) {\r\n          temp = temp.replace(\"r\", \"\");\r\n          isRest = true;\r\n        }\r\n        if (temp.includes(\"d\")) {\r\n          temp = temp.replace(\"d\", \"\");\r\n          isDot = true;\r\n        }\r\n      }\r\n      temp += 'n';\r\n      if (isDot) temp += \".\"\r\n      if (!isRest) {\r\n        result.push(time);\r\n      }\r\n      time += Tone.Time(temp);\r\n    });\r\n    return result;\r\n  },\r\n\r\n  async init() {\r\n    if (this.initiated) \r\n      return\r\n    this.initiated = true;\r\n    this.poly.voices.forEach((v, i) => {\r\n      const env = new Tone.FrequencyEnvelope({\r\n        attack: 0.001,\r\n        decay: 0.08,\r\n        release: 0.08,\r\n        baseFrequency: Tone.Frequency(\"A4\"),\r\n        octaves: Math.log2(13),\r\n        releaseCurve: 'exponential',\r\n        exponent: 3.5,\r\n      });\r\n      env.connect(v.oscillator.frequency);\r\n      this.freqEnv[i] = env;\r\n    });\r\n    this.noise.connect(this.lowPass);\r\n    this.lowPass.toMaster();\r\n    this.poly.toMaster();\r\n    if (this.player == null) {\r\n      this.player = new Tone.Player()\r\n      await this.player.load('https://cdn.jsdelivr.net/gh/R-D-D-D/Ground-Zero/web_frontend/src/resources/metronome_click.mp3');\r\n      this.player.toMaster();\r\n    }\r\n  },\r\n\r\n  playSequence(timeSignature, bpm, notes, numBars, handler) {\r\n    this.createAndRecordSequence(timeSignature, bpm, notes, numBars, undefined, true, handler);\r\n  },\r\n\r\n  createAndRecordSequence(timeSignature, bpm, notes, numBars, audio, noRecord, handler) {\r\n    // simple check to avoid double play\r\n    if (this.started || numBars == 0) return;\r\n    this.started = true;\r\n\r\n    Tone.Transport.bpm.value = parseInt(bpm);\r\n    this.notesToEvents([])\r\n\r\n    var timeSigArr = timeSignature.split('/')\r\n    Tone.Transport.timeSignature = [parseInt(timeSigArr[0]), parseInt(timeSigArr[1])];\r\n\r\n    Tone.Context.latencyHint = 'fastest';\r\n    const part = new Tone.Part((time) => {\r\n        //the events will be given to the callback with the time they occur\r\n        this.poly.voices.forEach((v, i) => {\r\n          this.freqEnv[i].triggerAttackRelease('16n', time);\r\n          v.envelope.triggerAttackRelease('16n', time);\r\n        });\r\n        this.noise.triggerAttackRelease('16n', time);\r\n        //handler.highlightNote(this.idx);\r\n        // this.idx ++;\r\n        // console.log(\"idx\", this.idx)\r\n      }, this.notesToEvents(notes)\r\n    );\r\n    // console.log(numBars)\r\n    // console.log(this.notesToEvents(notes))\r\n\r\n    part.start('1m');\r\n\r\n    //part.loop = numBars;\r\n    var totalNumBars = numBars + \"m\";\r\n    \r\n    Tone.Transport.scheduleRepeat(() => {\r\n      this.player.restart();\r\n    }, \"4n\", \"0m\");\r\n\r\n    // var seq = new Tone.Sequence((time, note) => {\r\n    //   this.player.get(\"click\").start();\r\n    // //straight quater notes\r\n    // }, [1, 2, 3, 4, 5, 6, 7, 8], \"8n\");\r\n    //start the Transport for the events to start\r\n\r\n    if (!noRecord) {\r\n      const actx  = Tone.context;\r\n      const dest  = actx.createMediaStreamDestination();\r\n      const recorder = new MediaRecorder(dest.stream);\r\n  \r\n      this.lowPass.connect(dest);\r\n      this.poly.connect(dest);\r\n      this.player.connect(dest);\r\n    \r\n      const chunks = [];\r\n  \r\n      recorder.ondataavailable = evt => chunks.push(evt.data);\r\n      recorder.onstop = evt => {\r\n        let blob = new Blob(chunks, { type: 'audio/ogg; codecs=opus' });\r\n        audio.src = URL.createObjectURL(blob);\r\n      };\r\n\r\n      Tone.Transport.schedule((time) => {\r\n        recorder.stop();\r\n        console.log('stopped')\r\n        Tone.Transport.stop();  \r\n        Tone.Transport.cancel(0);\r\n        this.started = false;\r\n        this.idx = 0;\r\n      }, totalNumBars);\r\n  \r\n      recorder.start();\r\n      Tone.Transport.start();\r\n    } else {\r\n      Tone.Transport.schedule((time) => {\r\n        console.log('stopped')\r\n        Tone.Transport.stop();  \r\n        Tone.Transport.cancel(0);\r\n        this.started = false;\r\n        this.idx = 0;\r\n      }, totalNumBars);\r\n\r\n      Tone.Transport.start();\r\n    }\r\n  }\r\n}\r\n","export default {\r\n  // storing rhythm as a string\r\n  generateRhythmString (rhythm) {\r\n    if (rhythm != undefined)\r\n      return rhythm.id.toString() + '&' + rhythm.title + '&' + rhythm.timeSignature + '&' + rhythm.noOfBars.toString() + '&' + rhythm.bpm.toString() + '&' + rhythm.rhythm.join('-')\r\n    else\r\n      return ''\r\n    },\r\n\r\n  generateRhythmsString (rhythms) {\r\n    var result = ''\r\n    for (var i = 0; i < rhythms.length; i++) {\r\n      if (i == rhythms.length - 1) {\r\n        result += this.generateRhythmString(rhythms[i])\r\n      } else {\r\n        result += this.generateRhythmString(rhythms[i]) + '$'\r\n      }\r\n    }\r\n    return result;\r\n  },\r\n\r\n  parseRhythmString (str) {\r\n    //console.log(str)\r\n    var strArr = str.split('&')\r\n    const obj = {\r\n      id: parseInt(strArr[0]),\r\n      title: strArr[1],\r\n      timeSignature: strArr[2],\r\n      noOfBars: strArr[3],\r\n      bpm: strArr[4],\r\n      rhythm: strArr[5] ? strArr[5].split('-') : []\r\n    }\r\n    return obj\r\n  },\r\n\r\n  parseRhythmsString (str) {\r\n    if (str.length == 0)\r\n      return []\r\n    var rhythms = str.split('$').map(rhythm => this.parseRhythmString(rhythm))\r\n    return rhythms\r\n  },\r\n\r\n  cloneRhythms (rhythms) {\r\n    const result = []\r\n    for (var i = 0; i < rhythms.length; i++) {\r\n      const newRhythm = {}\r\n      newRhythm.id = rhythms[i].id\r\n      newRhythm.title = rhythms[i].title\r\n      newRhythm.timeSignature = rhythms[i].timeSignature\r\n      newRhythm.noOfBars = rhythms[i].noOfBars\r\n      newRhythm.bpm = rhythms[i].bpm\r\n      newRhythm.rhythm = [...(rhythms[i].rhythm)]\r\n      result.push(newRhythm)\r\n    }\r\n    return result\r\n  },\r\n\r\n  cloneLesson (lesson) {\r\n    return {\r\n      id: lesson.id,\r\n      name: lesson.name,\r\n      TutorId: lesson.TutorId,\r\n      rhythms: this.cloneRhythms(lesson.rhythms),\r\n      date: lesson.date\r\n    }\r\n  }\r\n}\r\n","import Api from '@/services/Api'\r\n\r\nexport default {\r\n  create (postInfo) {\r\n    const instance = Api()\r\n    instance.defaults.headers.post['Content-Type'] = 'multipart/form-data'\r\n    return instance.post('post/new', postInfo)\r\n  },\r\n\r\n  list (threadId) {\r\n    return Api().get(`post/list?tid=${threadId}`)\r\n  },\r\n\r\n  edit (postInfo) {\r\n    const instance = Api()\r\n    instance.defaults.headers.post['Content-Type'] = 'multipart/form-data'\r\n    return instance.post('post/edit', postInfo)\r\n  },\r\n\r\n  delete (postId) {\r\n    return Api().delete(`post/del?pid=${postId}`)\r\n  }\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('video',{ref:\"videoPlayer\",staticClass:\"vjs-big-play-centered video-js\",attrs:{\"id\":\"video\"}}),_c('v-row',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.hide),expression:\"!hide\"}],staticClass:\"bpm-control pt-2\",attrs:{\"id\":\"slider\"}},[_c('v-icon',{attrs:{\"color\":\"white\",\"large\":\"\"}},[_vm._v(\"$vuetify.icons.custom_bpm\")]),_c('v-slider',{staticClass:\"pb-2\",attrs:{\"min\":\"20\",\"max\":\"180\",\"vertical\":\"\",\"color\":\"white\",\"track-color\":\"rgba(115, 133, 159, 0.5)\",\"thumb-label\":\"always\"},model:{value:(_vm.playbackBpm),callback:function ($$v) {_vm.playbackBpm=$$v},expression:\"playbackBpm\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\r\n  div\r\n    video.vjs-big-play-centered(ref=\"videoPlayer\" class=\"video-js\" :id=\"`video`\")\r\n\r\n    v-row.bpm-control.pt-2(:id=\"`slider`\" v-show=\"!hide\")\r\n      v-icon(color=\"white\" large) $vuetify.icons.custom_bpm\r\n      v-slider.pb-2(min=\"20\" max=\"180\" vertical color=\"white\" track-color=\"rgba(115, 133, 159, 0.5)\" thumb-label=\"always\" v-model=\"playbackBpm\")\r\n</template>\r\n\r\n<script>\r\n/* eslint-disable */\r\nimport vexUI from \"@/plugins/vex\";\r\nimport videojs from \"video.js\";\r\nimport \"videojs-hotkeys\"\r\nimport { OpenSheetMusicDisplay } from \"opensheetmusicdisplay\"\r\nimport axios from \"axios\"\r\n\r\nexport default {\r\n  name: 'VideoPlayer',\r\n  props: ['exercise', 'videoSrc'],\r\n  data () {\r\n    return {\r\n      // exercise info\r\n      numberOfBars: null,\r\n      bpm: null,\r\n      timeSignature: null,\r\n      description: '',\r\n      melody: [],\r\n      useScore: false,\r\n      useXml: false,\r\n      notesInBars: null,\r\n      playbackBpm: 0,\r\n      videoHandler: null,\r\n\r\n      // video events\r\n      player: null,\r\n      hide: true,\r\n      timePerTwoBars: 0,\r\n      timePerBar: 0,\r\n      demoStartTime: 0,\r\n      demoEndTime: null,\r\n      currentDisplayedBar: 0,\r\n\r\n      // osmd renderer\r\n      videoOsmd: null,\r\n      from: 1,\r\n      to: 2,\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    timeUpdated () {\r\n      let currTime = this.player.currentTime()\r\n      let offset = currTime - this.demoStartTime\r\n      let currBar = Math.floor(offset / this.timePerTwoBars)\r\n      if (currBar != this.currentDisplayedBar) {\r\n        if (currBar >= 0 && currBar < Math.floor(this.numberOfBars / 2)) {\r\n          this.currentDisplayedBar = currBar\r\n          this.videoHandler.importNotes(this.notesInBars[currBar * 2].concat(this.notesInBars[currBar * 2 + 1]), this.timeSignature)\r\n        } else if (currBar < 0 && this.currentDisplayedBar != 0) {\r\n          this.currentDisplayedBar = 0\r\n          this.videoHandler.importNotes(this.notesInBars[0].concat(this.notesInBars[1]), this.timeSignature)\r\n        } else if (currBar > Math.floor(this.numberOfBars / 2)) {\r\n          if (this.numberOfBars < 2) {\r\n            this.currentDisplayedBar = 0\r\n            this.videoHandler.importNotes(this.notesInBars[0].concat(this.notesInBars[1]), this.timeSignature)\r\n          } else {\r\n            this.currentDisplayedBar = Math.floor(this.numberOfBars / 2)\r\n            this.videoHandler.importNotes(this.notesInBars[this.numberOfBars - 1].concat(this.notesInBars[this.numberOfBars - 1]), this.timeSignature)\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    async timeUpdatedOsmd () {\r\n      let currTime = this.player.currentTime()\r\n      let offset = currTime - this.demoStartTime\r\n      let currBar = Math.floor(offset / this.timePerTwoBars)\r\n      if (currBar != this.currentDisplayedBar) {\r\n        if (currBar >= 0 && currBar < Math.floor(this.numberOfBars / 2)) {\r\n          console.log(currBar)\r\n          this.videoOsmd.setOptions({\r\n            drawFromMeasureNumber: (currBar * 2) + 1,\r\n            drawUpToMeasureNumber: (currBar * 2) + 2\r\n          })\r\n          this.currentDisplayedBar = currBar\r\n          await this.videoOsmd.render()\r\n        } else if (currBar < 0 && this.currentDisplayedBar != 0) {\r\n          console.log(currBar)\r\n          this.videoOsmd.setOptions({\r\n            drawFromMeasureNumber: 1,\r\n            drawUpToMeasureNumber: 2\r\n          })\r\n          this.currentDisplayedBar = 0\r\n          await this.videoOsmd.render()\r\n        } else if (currBar > Math.floor(this.numberOfBars / 2)) {\r\n          console.log(currBar, 'from third clause')\r\n          if (this.numberOfBars < 2) {\r\n            this.videoOsmd.setOptions({\r\n              drawFromMeasureNumber: 0,\r\n              drawUpToMeasureNumber: 0\r\n            })\r\n            this.currentDisplayedBar = 0\r\n          } else {\r\n            this.videoOsmd.setOptions({\r\n              drawFromMeasureNumber: this.numberOfBars - 1,\r\n              drawUpToMeasureNumber: this.numberOfBars\r\n            })\r\n            this.currentDisplayedBar = Math.floor((currTime - this.demoStartTime) / this.timePerTwoBars)\r\n          }\r\n          await this.videoOsmd.render()\r\n        }\r\n      }\r\n    },\r\n\r\n    async drawOsmdScores () {\r\n      // video osmd\r\n      var background = document.createElement(\"div\")\r\n      background.setAttribute('id', `video-overlay-background`)\r\n      background.style.position = \"absolute\";\r\n      background.style.background = \"#FAFAFA\";\r\n      background.style.top = \"0\";\r\n      background.style.left = \"0\";\r\n      background.style.right = \"0\";\r\n      background.style.height = \"130px\";\r\n      background.style.overflow = \"hidden\"\r\n\r\n      var scoreWrapper = document.createElement(\"div\")\r\n      scoreWrapper.setAttribute('id', `video-osmd-wrapper`)\r\n      scoreWrapper.style.position = \"absolute\";\r\n      scoreWrapper.style.background = \"#FAFAFA\";\r\n      scoreWrapper.style.top = \"0\";\r\n      scoreWrapper.style.left = \"0\";\r\n      scoreWrapper.style.right = \"0\";\r\n\r\n      var score = document.createElement('div')\r\n      background.appendChild(scoreWrapper)\r\n      scoreWrapper.appendChild(score)\r\n      document.getElementById(`video`).appendChild(background)\r\n\r\n      this.videoOsmd = new OpenSheetMusicDisplay(\r\n        score, \r\n        {\r\n          drawFromMeasureNumber: this.from,\r\n          drawUpToMeasureNumber: this.to,\r\n          drawComposer: false,\r\n          drawTitle: false,\r\n          renderSingleHorizontalStaffline: true,\r\n          drawPartNames: false,\r\n          autoResize: false,\r\n          drawMetronomeMarks: false,\r\n          backend: 'Canvas',\r\n          drawingParameters: 'compacttight'\r\n        }\r\n      )\r\n      let scoreXml = await axios.get(this.exercise.musicXmlUrl);    \r\n\r\n      await this.videoOsmd.load(scoreXml.data);\r\n      await this.$nextTick()\r\n      this.videoOsmd.zoom = 1.2\r\n      // this.videoOsmd.setCustomPageFormat(1, .3)\r\n      // await this.videoOsmd.preCalculate() \r\n      // score.style.top = `${(this.videoOsmd.graphic.musicPages[0].boundingBox.borderMarginTop + this.videoOsmd.graphic.musicPages[0].boundingBox.absolutePosition.y) * 10 * -1}px`\r\n      // console.log('top', score.style.top)\r\n      await this.videoOsmd.render()\r\n      console.log(this.videoOsmd.graphic)\r\n      console.log(this.videoOsmd.graphic.music)\r\n      // console.log(this.videoOsmd.graphic.musicPages[0].musicSystems)\r\n      // console.log(this.videoOsmd)\r\n    },\r\n\r\n    drawScores () {\r\n      var wrapper = document.createElement(\"div\")\r\n      wrapper.setAttribute('id', `video-vexflow-wrapper`)\r\n      wrapper.style.position = \"absolute\";\r\n      wrapper.style.background = \"#FAFAFA\";\r\n      wrapper.style.top = \"0\";\r\n      wrapper.style.left = \"0\";\r\n      wrapper.style.right = \"0\";\r\n      this.videoHandler = new vexUI.Handler(`video-vexflow-wrapper`, {\r\n        canEdit: false,\r\n        numberOfStaves: 2,\r\n        lessStaveHeight: true,\r\n        canvasProperties: {\r\n          id: `video-vexflow-wrapper` + \"-canvas\",\r\n          width: this.$refs.videoPlayer.offsetWidth,\r\n          height: 80 * vexUI.scale,\r\n          tabindex: 1\r\n        }\r\n      }, wrapper).init();\r\n      \r\n      this.notesInBars = this.videoHandler.notesToBars(this.melody, this.timeSignature)\r\n      this.videoHandler.importNotes(this.notesInBars[0].concat(this.notesInBars[1])  , this.timeSignature)\r\n\r\n      document.getElementById(`video`).appendChild(wrapper)\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    playbackBpm: function (val) {\r\n      if (this.bpm) {\r\n        this.player.playbackRate(val / this.bpm)\r\n      }\r\n    },\r\n\r\n    videoSrc: function (val) {\r\n      if (val == 'video' && this.exercise.videoUrl) {\r\n        if (this.player.src() != this.exercise.videoUrl) {\r\n          this.player.src(this.exercise.videoUrl)\r\n        }\r\n      } else if (val == 'demo' && this.exercise.demoUrl) {\r\n        if (this.player.src() != this.exercise.demoUrl) {\r\n          this.player.src(this.exercise.demoUrl)\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  mounted: async function() {\r\n    const player = videojs(this.$refs.videoPlayer, {\r\n        controls: true,\r\n        fluid: true,\r\n        sources: [\r\n          {\r\n            src: this.exercise.demoUrl,\r\n            type: \"video/mp4\"\r\n          }\r\n        ],\r\n        playbackRates: [0.8, 0.9, 1, 1.1, 1.2],\r\n        poster: this.exercise.demoPosterUrl ? this.exercise.demoPosterUrl : null\r\n      }, () => {\r\n        // console.log('onPlayerReady', this)\r\n        player.hotkeys({\r\n          volumeStep: 0.1,\r\n          seekStep: 2,\r\n          enableModifiersForNumbers: false,\r\n          enableHoverScroll: true\r\n        })\r\n\r\n        if (this.exercise.useScore) {\r\n          player.on('userinactive', () => {\r\n            if (player.paused()) {\r\n              this.hide = false\r\n            } else {\r\n              this.hide = true\r\n            }\r\n          })\r\n          player.on('useractive', () => {\r\n            this.hide = false\r\n          })\r\n          player.on('play', () => {\r\n            this.hide = false\r\n          })\r\n          player.on('firstplay', () => {\r\n            this.hide = false\r\n          })\r\n          player.on('ratechange', () => {\r\n            this.playbackBpm = this.bpm * this.player.playbackRate()\r\n          })\r\n          if (this.exercise.useXml) {\r\n            player.on('timeupdate', (e) => {\r\n              this.timeUpdatedOsmd(e)\r\n            })\r\n          } else {\r\n            player.on('timeupdate', (e) => {\r\n              this.timeUpdated(e)\r\n            })\r\n          }\r\n        }\r\n    })\r\n\r\n    this.player = player\r\n    let exercise = this.exercise\r\n\r\n    if (exercise.useScore) {\r\n      this.useScore = exercise.useScore\r\n      this.useXml = exercise.useXml\r\n      this.bpm = parseInt(exercise.bpm)\r\n      this.playbackBpm = this.bpm\r\n      this.demoStartTime = exercise.demoStartTime\r\n      if (exercise.useXml) {\r\n        await this.drawOsmdScores()\r\n        let timeSignature = this.videoOsmd.sheet.sourceMeasures[0].activeTimeSignature\r\n        this.timeSignature = `${timeSignature.numerator}/${timeSignature.denominator}`\r\n        this.numberOfBars = this.videoOsmd.sheet.sourceMeasures.length\r\n      } else {\r\n        this.melody = exercise.melody.split('-')\r\n        this.timeSignature = exercise.timeSignature\r\n        this.numberOfBars = parseInt(exercise.numberOfBars)\r\n        this.drawScores()\r\n      }\r\n      this.timePerBar = ((parseInt(this.timeSignature.split('/')[0]) / this.bpm) * 60)\r\n      this.timePerTwoBars = this.timePerBar * 2\r\n      this.demoEndTime = this.demoStartTime + (this.timePerBar * this.numberOfBars)\r\n\r\n      // attach slider\r\n      document.getElementById(`video`).appendChild(document.getElementById(`slider`))\r\n      document.getElementsByClassName(\"v-slider__track-container\")[0].style.width = \"5px\"\r\n      document.getElementsByClassName(\"v-slider__thumb-label\")[0].style.color = \"black\"\r\n      document.getElementsByClassName(\"v-slider__thumb-label\")[0].style.boxShadow = \"0px 0px 5px black\"\r\n      this.hide = false\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.hide {\r\n  opacity: 0 !important;\r\n  visibility: hidden !important;\r\n}\r\n\r\n.bpm-control {\r\n  background-color: rgba(43, 51, 63, 0.7); \r\n  position: absolute; \r\n  bottom: 30px; \r\n  left: 12px; \r\n  width: 30px;\r\n  visibility: visible;\r\n  opacity: 1;\r\n  transition: visibility 1000ms, opacity 1000ms;\r\n}\r\n\r\nvideo:focus {\r\n  outline: none;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoPlayer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoPlayer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VideoPlayer.vue?vue&type=template&id=593b3adb&scoped=true&lang=pug&\"\nimport script from \"./VideoPlayer.vue?vue&type=script&lang=js&\"\nexport * from \"./VideoPlayer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./VideoPlayer.vue?vue&type=style&index=0&id=593b3adb&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"593b3adb\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSlider } from 'vuetify/lib/components/VSlider';\ninstallComponents(component, {VIcon,VRow,VSlider})\n","import Api from '@/services/Api'\r\n\r\nexport default {\r\n  create (threadInfo) {\r\n    return Api().post('thread/new', threadInfo)\r\n  },\r\n\r\n  list (lessonId) {\r\n    return Api().get(`thread/list?lid=${lessonId}`)\r\n  },\r\n\r\n  show (lid, uid) {\r\n    return Api().get(`thread/show?lid=${lid}&uid=${uid}`)\r\n  },\r\n\r\n  delete (threadId) {\r\n    return Api().delete(`thread/del?tid=${threadId}`)\r\n  },\r\n\r\n  getUnread (courseId, studentId) {\r\n    return Api().get(`thread/unread?cid=${courseId}&uid=${studentId}`)\r\n  }\r\n}\r\n","<template lang=\"pug\">\r\n  div(v-if=\"course && lesson\")\r\n    v-container.pa-0(fluid)\r\n      v-row(no-gutters)\r\n        v-col(cols=\"9\").text-left.pa-0\r\n          v-row.ma-0(style=\"width: 100%;\")\r\n            v-col.pa-0#title\r\n              h1.font-weight-bold.pl-8.py-2 {{ course.name }}\r\n          v-row.ma-0(style=\"width: 100%;\")\r\n            v-col.pa-0\r\n              video-player(:exercise=\"this.lesson.exercises[0]\" :videoSrc=\"src\")\r\n          \r\n          v-container#dicussion(v-if=\"user.isStudent\")\r\n            v-row.justify-center\r\n              v-col.text-left.pb-0(cols=\"11\")\r\n                h1.font-weight-bold.pt-2.pl-4 Ask your tutor!\r\n              v-col.pb-0(cols=\"11\" v-if=\"lesson.thread\")\r\n                v-list(v-if=\"lesson.thread.posts\")\r\n                  v-list-item(v-for='(post, idx) in lesson.thread.posts' :key='post.id')\r\n                    v-list-item-content.pb-0\r\n                      v-container.pt-0.pb-4.px-0(fluid)\r\n                        v-row.py-0(v-if=\"idx == 0 || post.updatedAt.substring(0, 10) != lesson.thread.posts[idx - 1].updatedAt.substring(0, 10)\")\r\n                          v-col.py-0\r\n                            v-chip(label color=\"indigo darken-3\" dark style=\"font-size: 12px;\") {{ new Date(post.updatedAt).toLocaleString([], { year: 'numeric', month: 'numeric', day:'numeric'}) }}\r\n                        v-row.mt-5\r\n                          v-col.pb-0(style=\"margin-bottom: -3px;\")\r\n                            video(width=\"100%\" height=\"audo\" controls)\r\n                              source(:src=\"post.videoUrl\" type=\"video/mp4\")\r\n                              | Your browser does not support HTML video.\r\n\r\n                        v-row.justify-end.bottom-border.mx-0.py-3(v-if=\"post.UserId != user.id\")\r\n                          v-col.pr-8.py-0(cols=\"6\") \r\n                            .speech-bubble-other\r\n                              v-row.ma-0(style=\"width: 100%;\")\r\n                                v-col.text-left\r\n                                  div {{ post.message }}\r\n                              .timestamp {{ new Date(post.updatedAt).toLocaleString([], { hour: '2-digit', minute:'2-digit'}) }}\r\n                          v-col.text-center.pa-0(cols=\"1\")\r\n                            v-avatar(color='grey' size=\"40\")\r\n                              v-icon mdi-account\r\n                        v-row.justify-start.bottom-border.mx-0.py-3(v-else)\r\n                          v-col.text-center.pa-0(cols=\"1\")\r\n                            v-avatar(color='grey' size=\"40\")\r\n                              v-icon mdi-account\r\n                          v-col.pl-8.py-0(cols=\"6\") \r\n                            .speech-bubble-self\r\n                              v-row.ma-0(style=\"width: 100%;\")\r\n                                v-col.text-left\r\n                                  div {{ post.message }}\r\n                              .timestamp {{ new Date(post.updatedAt).toLocaleString([], { hour: '2-digit', minute:'2-digit'}) }}\r\n            \r\n            v-row.justify-center\r\n              v-col.pt-0(cols=\"11\")\r\n                v-form.px-4(:ref=\"`form`\")\r\n                  v-row\r\n                    v-col.pt-0(cols=\"12\")\r\n                      v-textarea(outlined name='input-7-4' label='Type your thoughts here...' v-model=\"message\")\r\n                    v-col(cols=\"6\")\r\n                      v-file-input(\r\n                        accept=\"video/mp4, video/ogg\" \r\n                        placeholder=\"Upload\" \r\n                        prepend-icon=\"mdi-video\"\r\n                        label=\"Upload Video\"\r\n                        v-model=\"file\")\r\n\r\n                  v-row\r\n                    v-col\r\n                      v-btn(large color=\"#ec5252\" dark @click=\"create_post\") Submit practice video\r\n\r\n        v-col.pa-0(cols=\"3\" style=\"border-bottom: 1px solid #BDBDBD; border-left: 1px solid #BDBDBD; position: fixed; right:0;\" :class=\"{ 'full-height': fullHeight, 'partial-height': !fullHeight }\")\r\n          h1.font-weight-bold.pl-4.py-2(style=\"background-color:#EEEEEE;\") Lessons\r\n\r\n          //- v-list\r\n          //-   v-row(v-for='(lesson, idx) in course.lessons' :key='lesson.id' shaped :disabled=\"idx != 0\" @click=\"goToLesson($event, lesson)\")\r\n          //-     v-col(cols=\"12\")\r\n          //-       div.pl-4 {{idx}}. {{ lesson.name }}\r\n          v-list.py-0\r\n            v-list-item.px-0(v-for='(currLesson, i) in course.lessons' :key='i')\r\n              v-expansion-panels.px-0(accordion flat hover tile dense v-if=\"currLesson == lesson\" v-model=\"opened\" multiple)\r\n                v-expansion-panel\r\n                  v-expansion-panel-header.py-0.pl-4.pr-2(style=\"font-size: 16px; background-color:#B2DFDB;\") {{ i + 1 }}. {{currLesson.name}}\r\n                  v-expansion-panel-content.pa-0\r\n                    v-list.py-0\r\n                      v-list-item-group.py-0\r\n                        v-list-item.px-0(v-if=\"currLesson.exercises[0].videoUrl\" @click=\"src = 'video'\")\r\n                          v-list-item-content\r\n                            div.pl-4.text-decoration-underline(style=\"font-size: 14px; color:#00897B;\") Explanation\r\n                        v-list-item.px-0(v-if=\"currLesson.exercises[0].demoUrl\" @click=\"src = 'demo'\")\r\n                          v-list-item-content\r\n                            div.pl-4.text-decoration-underline(style=\"font-size: 14px; color:#00897B;\") Demonstration\r\n              v-list-item-content.py-0.link(v-else)\r\n                a.link.pl-4.py-5(style=\"font-size: 16px;\" @click=\"goToLesson($event, currLesson)\") {{ i + 1 }}. {{ currLesson.name }}\r\n\r\n      \r\n      v-row.justify-center(v-show=\"useScore\")\r\n        v-col(cols=\"12\" v-if=\"!useXml\")\r\n          div(:id=\"'vexflow-wrapper-' + lesson.id\")\r\n        v-col(cols=\"12\" v-else)\r\n          div(:id=\"'osmd-wrapper-' + lesson.id\")\r\n\r\n      \r\n    //- v-row(justify='center')\r\n      v-dialog(v-model='dialog' persistent max-width='600px')\r\n        template(v-slot:activator='{ on, attrs }')\r\n        v-card\r\n          v-card-title\r\n            span.headline Message\r\n          v-card-text.py-0\r\n            v-form(ref=\"studentform\" v-if=\"is_student\")\r\n              v-container\r\n                v-row\r\n                  v-col(cols='12')\r\n                    v-text-field(v-model=\"message\" type=\"text\" label='Message*' required)\r\n                  v-col(cols=\"12\")                          \r\n                    v-file-input(\r\n                      accept=\"video/mp4, video/ogg\" \r\n                      placeholder=\"Upload\" \r\n                      prepend-icon=\"mdi-video\"\r\n                      label=\"Practice Video\"\r\n                      v-model=\"file\")\r\n            v-form(ref=\"tutorform\" v-else)\r\n              v-container\r\n                v-row\r\n                  v-col(cols='12')\r\n                    v-text-field(v-model=\"message\" type=\"text\" label='Message*' required)\r\n                  v-col(cols='12')\r\n                    v-subheader.pl-0 Grade\r\n                    v-slider(v-model=\"grade\" min='0' max='100' thumb-label :thumb-size=\"24\")\r\n                  v-col(cols=\"12\")                          \r\n                    v-file-input(\r\n                      accept=\"video/mp4, video/ogg\" \r\n                      placeholder=\"Feedback\" \r\n                      prepend-icon=\"mdi-video\"\r\n                      label=\"Feedback Video\"\r\n                      v-model=\"file\")\r\n          v-card-actions\r\n            v-spacer\r\n            v-btn(color='indigo' text @click='dialog = false') Close\r\n            v-btn(color='indigo' text @click=\"student_create_post\") Save\r\n          v-card-text(v-if=\"error\")\r\n            p {{ error }}  \r\n</template>\r\n\r\n<script>\r\n/* eslint-disable */\r\nimport tone from \"@/plugins/tone\";\r\nimport vexUI from \"@/plugins/vex\";\r\nimport { mapState } from \"vuex\";\r\nimport utils from \"@/utils\";\r\nimport videojs from \"video.js\";\r\nimport PostService from \"@/services/PostService\"\r\nimport \"videojs-hotkeys\"\r\nimport axios from \"axios\"\r\nimport { OpenSheetMusicDisplay } from \"opensheetmusicdisplay\"\r\nimport CourseService from \"@/services/CourseService\"\r\nimport VideoPlayer from \"@/components/Course/VideoPlayer\"\r\nimport ThreadService from \"@/services/ThreadService\"\r\nimport _ from 'lodash'\r\n\r\nexport default {\r\n  name: 'ShowLesson',\r\n  components: {\r\n    'video-player': VideoPlayer\r\n  },\r\n  // props: ['lesson', 'course'],\r\n  data () {\r\n    return {\r\n      // exercise info\r\n      numberOfBars: null,\r\n      bpm: null,\r\n      timeSignature: null,\r\n      disable: true,\r\n      save_btn_loading: false,\r\n      add_btn_loading: false,\r\n      description: '',\r\n      melody: [],\r\n      useScore: false,\r\n      useXml: false,\r\n      notesInBars: null,\r\n      playbackBpm: 0,\r\n      handler: {},\r\n      videoHandler: null,\r\n\r\n      // thread info\r\n      thread: null,\r\n      dialog: false,\r\n      requiredRules: [\r\n        v => !!v || \"This field is required\"\r\n      ],\r\n      message: '',\r\n      file: null,\r\n      grade: '',\r\n      avatar: 'https://cdn.vuetifyjs.com/images/lists/2.jpg',\r\n      error: null,\r\n\r\n      // video events\r\n      hide: true,\r\n      timePerTwoBars: 0,\r\n      timePerBar: 0,\r\n      demoStartTime: 0,\r\n      demoEndTime: null,\r\n      currentDisplayedBar: 0,\r\n\r\n      // osmd renderer\r\n      osmd: null,\r\n      videoOsmd: null,\r\n      from: 1,\r\n      to: 2,\r\n\r\n      // page design\r\n      selected: null,\r\n      course: null,\r\n      lesson: null,\r\n      fullHeight: false,\r\n      opened: [0],\r\n      src: 'video'\r\n    }\r\n  },\r\n  watch: {\r\n    bpm: function (val) {\r\n      this.bpm_label = \"BPM: \" + val;\r\n    },\r\n    no_bars: function (val) {\r\n      this.bars_label = \"No. Bars: \" + val;\r\n    },\r\n    // playbackBpm: function (val) {\r\n    //   this.player.playbackRate(val / this.bpm)\r\n    // }\r\n    '$route.params.lesson_id': function (val) {\r\n      this.$router.go()\r\n    }\r\n  },\r\n  computed: {\r\n    tutor () {\r\n      if (this.user.isStudent)\r\n        return this.$store.getters.tutorFromSubscribedTutors;\r\n      else \r\n        return null;\r\n    },\r\n\r\n    is_student () {\r\n      return this.user.isStudent;\r\n    },\r\n\r\n    ...mapState([\"user\", \"students\", \"subscribedTutors\"])\r\n  },\r\n  methods: {\r\n    timeUpdated (event) {\r\n      let currTime = this.player.currentTime()\r\n      let offset = currTime - this.demoStartTime\r\n      let currBar = Math.floor(offset / this.timePerTwoBars)\r\n      if (currBar != this.currentDisplayedBar) {\r\n        if (currBar >= 0 && currBar < Math.floor(this.numberOfBars / 2)) {\r\n          this.currentDisplayedBar = currBar\r\n          this.videoHandler.importNotes(this.notesInBars[currBar * 2].concat(this.notesInBars[currBar * 2 + 1]), this.timeSignature)\r\n        } else if (currBar < 0 && this.currentDisplayedBar != 0) {\r\n          this.currentDisplayedBar = 0\r\n          this.videoHandler.importNotes(this.notesInBars[0].concat(this.notesInBars[1]), this.timeSignature)\r\n        } else if (currBar > Math.floor(this.numberOfBars / 2)) {\r\n          if (this.numberOfBars < 2) {\r\n            this.currentDisplayedBar = 0\r\n            this.videoHandler.importNotes(this.notesInBars[0].concat(this.notesInBars[1]), this.timeSignature)\r\n          } else {\r\n            this.currentDisplayedBar = Math.floor(this.numberOfBars / 2)\r\n            this.videoHandler.importNotes(this.notesInBars[this.numberOfBars - 1].concat(this.notesInBars[this.numberOfBars - 1]), this.timeSignature)\r\n          }\r\n        }\r\n      }\r\n      // if (this.notesInBars) {\r\n      //   console.log('here')\r\n      //   if (this.currentDisplayedBar == 0) {\r\n      //     if ((event.target.currentTime - this.demoStartTime) / this.timePerTwoBars >= 0) {\r\n      //       console.log('here')\r\n      //       this.currentDisplayedBar = 0\r\n      //       this.videoHandler.importNotes(this.notesInBars[0].concat(this.notesInBars[1]), this.timeSignature)\r\n      //     } else {\r\n      //       return\r\n      //     }\r\n      //   }\r\n\r\n      //   if ((event.target.currentTime - this.demoStartTime) / this.timePerTwoBars - this.currentDisplayedBar >= 1) {\r\n      //     var currBar = Math.floor((event.target.currentTime - this.demoStartTime) / this.timePerTwoBars)\r\n      //     if (currBar >= this.notesInBars.length / 2)\r\n      //       return\r\n      //     this.currentDisplayedBar = currBar\r\n      //     this.videoHandler.importNotes(this.notesInBars[currBar * 2].concat(this.notesInBars[currBar * 2 + 1]), this.timeSignature)\r\n      //     return\r\n      //   }\r\n      //   if ((event.target.currentTime - this.demoStartTime) / this.timePerTwoBars < this.currentDisplayedBar) {\r\n      //     var currBar1 = Math.floor((event.target.currentTime - this.demoStartTime) / this.timePerTwoBars)\r\n      //     if (currBar1 < 0)\r\n      //       return\r\n      //     this.currentDisplayedBar = currBar1\r\n      //     this.videoHandler.importNotes(this.notesInBars[currBar1 * 2].concat(this.notesInBars[currBar1 * 2 + 1]), this.timeSignature)\r\n      //   }\r\n      // }\r\n    },\r\n\r\n    async timeUpdatedOsmd (event) {\r\n      let currTime = this.player.currentTime()\r\n      let offset = currTime - this.demoStartTime\r\n      let currBar = Math.floor(offset / this.timePerTwoBars)\r\n      if (currBar != this.currentDisplayedBar) {\r\n        if (currBar >= 0 && currBar < Math.floor(this.numberOfBars / 2)) {\r\n          console.log(currBar)\r\n          this.videoOsmd.setOptions({\r\n            drawFromMeasureNumber: (currBar * 2) + 1,\r\n            drawUpToMeasureNumber: (currBar * 2) + 2\r\n          })\r\n          this.currentDisplayedBar = currBar\r\n          await this.videoOsmd.render()\r\n        } else if (currBar < 0 && this.currentDisplayedBar != 0) {\r\n          console.log(currBar)\r\n          this.videoOsmd.setOptions({\r\n            drawFromMeasureNumber: 1,\r\n            drawUpToMeasureNumber: 2\r\n          })\r\n          this.currentDisplayedBar = 0\r\n          await this.videoOsmd.render()\r\n        } else if (currBar > Math.floor(this.numberOfBars / 2)) {\r\n          console.log(currBar, 'from third clause')\r\n          if (this.numberOfBars < 2) {\r\n            this.videoOsmd.setOptions({\r\n              drawFromMeasureNumber: 0,\r\n              drawUpToMeasureNumber: 0\r\n            })\r\n            this.currentDisplayedBar = 0\r\n          } else {\r\n            this.videoOsmd.setOptions({\r\n              drawFromMeasureNumber: this.numberOfBars - 1,\r\n              drawUpToMeasureNumber: this.numberOfBars\r\n            })\r\n            this.currentDisplayedBar = Math.floor((currTime - this.demoStartTime) / this.timePerTwoBars)\r\n          }\r\n          await this.videoOsmd.render()\r\n        }\r\n      }\r\n    },\r\n\r\n    async update_rhythms () {\r\n      this.save_btn_loading = true;\r\n      var oldRhythmIdx = this.lesson.rhythms.indexOf(this.active_rhythm);\r\n      // console.log(\"oldRhythmIdx\", oldRhythmIdx)\r\n      var newRhythm = {\r\n        id: this.active_rhythm.id,\r\n        title: this.active_rhythm_title,\r\n        timeSignature: this.time_signature,\r\n        noOfBars: this.no_bars,\r\n        bpm: this.bpm,\r\n        rhythm: this.handler.exportNotes()\r\n      }\r\n\r\n      var newLesson = utils.cloneLesson(this.lesson);\r\n      newLesson.rhythms[oldRhythmIdx] = newRhythm;\r\n      newLesson.rhythms = utils.generateRhythmsString(newLesson.rhythms);\r\n      await this.$store.dispatch(\"editRhythm\", {\r\n        lesson: this.lesson,\r\n        newLesson: newLesson\r\n      });\r\n      this.save_btn_loading = false;\r\n      this.display_rhythm({}, this.lesson.rhythms[oldRhythmIdx]);\r\n    },\r\n\r\n    enable_save_btn () {\r\n      this.disable = false;\r\n    },\r\n\r\n    async create_post () {\r\n      if (this.$refs.form.validate()) {\r\n        var formData = new FormData()\r\n        formData.set('tid', this.lesson.thread.id)\r\n        formData.set('message', this.message)\r\n        formData.set('grade', this.grade)\r\n        formData.append('video', this.file)\r\n        const response = await PostService.create(formData)\r\n        this.lesson.thread.posts.splice(this.lesson.thread.posts.length, 0, response.data.post)\r\n        this.message = ''\r\n        this.file = null\r\n      } else {\r\n        return\r\n      }\r\n    },\r\n\r\n    async drawOsmdScores () {\r\n      // video osmd\r\n      var background = document.createElement(\"div\")\r\n      background.setAttribute('id', `video-overlay-background-${this.lesson.id}`)\r\n      background.style.position = \"absolute\";\r\n      background.style.background = \"#FAFAFA\";\r\n      background.style.top = \"0\";\r\n      background.style.left = \"0\";\r\n      background.style.right = \"0\";\r\n      background.style.height = \"130px\";\r\n      background.style.overflow = \"hidden\"\r\n\r\n      var scoreWrapper = document.createElement(\"div\")\r\n      scoreWrapper.setAttribute('id', `video-osmd-wrapper-${this.lesson.id}`)\r\n      scoreWrapper.style.position = \"absolute\";\r\n      scoreWrapper.style.background = \"#FAFAFA\";\r\n      scoreWrapper.style.top = \"0\";\r\n      scoreWrapper.style.left = \"0\";\r\n      scoreWrapper.style.right = \"0\";\r\n\r\n      var score = document.createElement('div')\r\n      background.appendChild(scoreWrapper)\r\n      scoreWrapper.appendChild(score)\r\n      document.getElementById(`video-${this.lesson.id}`).appendChild(background)\r\n\r\n      this.videoOsmd = new OpenSheetMusicDisplay(\r\n        score, \r\n        {\r\n          drawFromMeasureNumber: this.from,\r\n          drawUpToMeasureNumber: this.to,\r\n          drawComposer: false,\r\n          drawTitle: false,\r\n          renderSingleHorizontalStaffline: true,\r\n          drawPartNames: false,\r\n          autoResize: false,\r\n          drawMetronomeMarks: false,\r\n          backend: 'Canvas',\r\n          drawingParameters: 'compacttight'\r\n        }\r\n      )\r\n      let scoreXml = await axios.get(this.lesson.exercises[0].musicXmlUrl);    \r\n\r\n      await this.videoOsmd.load(scoreXml.data);\r\n      await this.$nextTick()\r\n      this.videoOsmd.zoom = 1.2\r\n      // this.videoOsmd.setCustomPageFormat(1, .3)\r\n      // await this.videoOsmd.preCalculate() \r\n      // score.style.top = `${(this.videoOsmd.graphic.musicPages[0].boundingBox.borderMarginTop + this.videoOsmd.graphic.musicPages[0].boundingBox.absolutePosition.y) * 10 * -1}px`\r\n      // console.log('top', score.style.top)\r\n      await this.videoOsmd.render()\r\n      console.log(this.videoOsmd.graphic)\r\n      console.log(this.videoOsmd.graphic.music)\r\n      // console.log(this.videoOsmd.graphic.musicPages[0].musicSystems)\r\n      // console.log(this.videoOsmd)\r\n\r\n\r\n      this.osmd = new OpenSheetMusicDisplay(\r\n        `osmd-wrapper-${this.lesson.id}`, \r\n        {\r\n          drawPartNames: false,\r\n          drawComposer: false\r\n        }\r\n      )\r\n      await this.osmd.load(scoreXml.data)\r\n      await this.$nextTick()\r\n      this.osmd.zoom = 1.2\r\n      await this.osmd.render()\r\n\r\n    },\r\n\r\n    drawScores (isRedraw) {\r\n      // TODO implement this\r\n      // if (isRedraw) {\r\n      //   const score = document.getElementById(`video-vexflow-wrapper${this.lesson.id}`)\r\n      //   while (score.firstChild) {\r\n      //     score.removeChild(score.lastChild);\r\n      //   }\r\n      //   const videoScore = document.getElementById(`vexflow-wrapper-${this.lesson.id}`)\r\n      //   while (videoScore.firstChild) {\r\n      //     videoScore.removeChild(videoScore.lastChild);\r\n      //   }\r\n      // }\r\n      if (this.user.isStudent) {\r\n        this.handler = new vexUI.Handler(`vexflow-wrapper-${this.lesson.id}`, {\r\n          numberOfStaves: parseInt(this.lesson.exercises[0].numberOfBars),\r\n          canEdit: false\r\n        }).init();\r\n      } else {\r\n        console.log(`vexflow-wrapper-${this.lesson.id}`)\r\n        console.log(document.getElementById(`vexflow-wrapper-${this.lesson.id}`))\r\n        this.handler = new vexUI.Handler(`vexflow-wrapper-${this.lesson.id}`, {\r\n          numberOfStaves: parseInt(this.lesson.exercises[0].numberOfBars)\r\n        }).init();\r\n      }\r\n      this.handler.importNotes(this.melody, this.timeSignature)\r\n      this.notesInBars = this.handler.notesToBars(this.melody, this.timeSignature)\r\n\r\n      var wrapper = document.createElement(\"div\")\r\n      wrapper.setAttribute('id', `video-vexflow-wrapper-${this.lesson.id}`)\r\n      wrapper.style.position = \"absolute\";\r\n      wrapper.style.background = \"#FAFAFA\";\r\n      wrapper.style.top = \"0\";\r\n      wrapper.style.left = \"0\";\r\n      wrapper.style.right = \"0\";\r\n      this.videoHandler = new vexUI.Handler(`video-vexflow-wrapper-${this.lesson.id}`, {\r\n        canEdit: false,\r\n        numberOfStaves: 2,\r\n        lessStaveHeight: true,\r\n        canvasProperties: {\r\n          id: `video-vexflow-wrapper-${this.lesson.id}` + \"-canvas\",\r\n          width: this.$refs.videoPlayer.offsetWidth,\r\n          height: 80 * vexUI.scale,\r\n          tabindex: 1\r\n        }\r\n      }, wrapper).init();\r\n\r\n      this.videoHandler.importNotes(this.notesInBars[0].concat(this.notesInBars[1])  , this.timeSignature)\r\n\r\n      document.getElementById(`video-${this.lesson.id}`).appendChild(wrapper)\r\n    },\r\n\r\n    goToLesson (event, lesson) {\r\n      this.$router.push({\r\n        name: `showlesson`,\r\n        params: {\r\n          course_id: this.course.id,\r\n          lesson_id: lesson.id,\r\n          course: this.course,\r\n          lesson: lesson\r\n        }\r\n      })\r\n    }\r\n  },\r\n\r\n  mounted: async function () {\r\n    if (!this.course || !this.lesson) {\r\n      let response = await CourseService.show(this.$route.params.course_id)\r\n      try {\r\n        response.data.course.lessons = await Promise.all(response.data.course.lessons.map(async (lesson) => {\r\n          var threadResponse = null\r\n          this.$store.dispatch('setNotifications', this.$store.state.notifications - response.data.course.unreadTutorPost)\r\n          threadResponse = await ThreadService.show(lesson.id, this.user.id)\r\n          lesson.thread = threadResponse.data.thread\r\n          return lesson\r\n        }))\r\n        this.course = response.data.course\r\n      } catch (err) {\r\n        console.log(err)\r\n      }\r\n      this.lesson = this.course.lessons.find(lesson => lesson.id == this.$route.params.lesson_id)\r\n    }\r\n\r\n    this.selected = this.course.lessons.indexOf(this.lesson)\r\n\r\n    window.addEventListener('scroll', _.debounce(() => {\r\n      if (window.pageYOffset == 0) {\r\n        this.fullHeight = false\r\n      } else if (window.pageYOffset > 64) {\r\n        this.fullHeight = true\r\n      }\r\n    }, 200))\r\n\r\n    // OpenSheetMusicDisplay.prototype.preCalculate = function () {\r\n    //   if (!this.graphic) {\r\n    //       throw new Error(\"OpenSheetMusicDisplay: Before rendering a music sheet, please load a MusicXML file\");\r\n    //   }\r\n    //   if (this.drawer) {\r\n    //       this.drawer.clear(); // clear canvas before setting width\r\n    //   }\r\n\r\n    //   let width = this.container.offsetWidth;\r\n    //   if (this.rules.RenderSingleHorizontalStaffline) {\r\n    //       width = 32767; // set safe maximum (browser limit), will be reduced later\r\n    //   }\r\n    //   console.log(\"[OSMD] render width: \" + width);\r\n\r\n    //   this.sheet.pageWidth = width / this.zoom / 10.0;\r\n    //   if (this.rules.PageFormat && !this.rules.PageFormat.IsUndefined) {\r\n    //       this.rules.PageHeight = this.sheet.pageWidth / this.rules.PageFormat.aspectRatio;\r\n    //       console.log(\"[OSMD] PageHeight: \" + this.rules.PageHeight);\r\n    //   } else {\r\n    //       console.log(\"[OSMD] endless/undefined pageformat, id: \" + this.rules.PageFormat.idString);\r\n    //       this.rules.PageHeight = 100001; // infinite page height // TODO maybe Number.MAX_VALUE or Math.pow(10, 20)?\r\n    //   }\r\n\r\n    //   // Before introducing the following optimization (maybe irrelevant), tests\r\n    //   // have to be modified to ensure that width is > 0 when executed\r\n    //   //if (isNaN(width) || width === 0) {\r\n    //   //    return;\r\n    //   //}\r\n\r\n    //   // Calculate again\r\n    //   this.graphic.reCalculate();\r\n    // }\r\n\r\n    // const player = videojs(this.$refs.videoPlayer, {\r\n    //     controls: true,\r\n    //     fluid: true,\r\n    //     sources: [\r\n    //       {\r\n    //         src: this.lesson.exercises[0].demoUrl,\r\n    //         type: \"video/mp4\"\r\n    //       }\r\n    //     ],\r\n    //     playbackRates: [0.8, 0.9, 1, 1.1, 1.2],\r\n    //     poster: this.lesson.exercises[0].demoPosterUrl ? this.lesson.exercises[0].demoPosterUrl : null\r\n    //   }, () => {\r\n    //     // console.log('onPlayerReady', this)\r\n    //     player.hotkeys({\r\n    //       volumeStep: 0.1,\r\n    //       seekStep: 2,\r\n    //       enableModifiersForNumbers: false,\r\n    //       enableHoverScroll: true\r\n    //     })\r\n    //     player.on('userinactive', () => {\r\n    //       if (player.paused()) {\r\n    //         this.hide = false\r\n    //       } else {\r\n    //         this.hide = true\r\n    //       }\r\n    //     })\r\n    //     player.on('useractive', () => {\r\n    //       this.hide = false\r\n    //     })\r\n    //     player.on('play', () => {\r\n    //       this.hide = false\r\n    //     })\r\n    //     player.on('firstplay', () => {\r\n    //       this.hide = false\r\n    //     })\r\n    //     player.on('ratechange', () => {\r\n    //       this.playbackBpm = this.bpm * this.player.playbackRate()\r\n    //     })\r\n    //     if (this.useScore && this.useXml) {\r\n    //       player.on('timeupdate', (e) => {\r\n    //         this.timeUpdatedOsmd(e)\r\n    //       })\r\n    //     } else if (this.useScore && !this.useXml) {\r\n    //       player.on('timeupdate', (e) => {\r\n    //         this.timeUpdated(e)\r\n    //       })\r\n    //     }\r\n    // });\r\n\r\n\r\n    // this.player = player\r\n    // let exercise = this.lesson.exercises[0]\r\n\r\n    // if (exercise.useScore) {\r\n    //   this.useScore = exercise.useScore\r\n    //   this.useXml = exercise.useXml\r\n    //   this.bpm = parseInt(exercise.bpm)\r\n    //   this.playbackBpm = this.bpm\r\n    //   this.demoStartTime = exercise.demoStartTime\r\n    //   if (exercise.useXml) {\r\n    //     await this.drawOsmdScores()\r\n    //     let timeSignature = this.osmd.sheet.sourceMeasures[0].activeTimeSignature\r\n    //     this.timeSignature = `${timeSignature.numerator}/${timeSignature.denominator}`\r\n    //     this.numberOfBars = this.osmd.sheet.sourceMeasures.length\r\n    //   } else {\r\n    //     this.melody = exercise.melody.split('-')\r\n    //     this.timeSignature = exercise.timeSignature\r\n    //     this.numberOfBars = parseInt(exercise.numberOfBars)\r\n    //     this.drawScores()\r\n    //   }\r\n    //   this.timePerBar = ((parseInt(this.timeSignature.split('/')[0]) / this.bpm) * 60)\r\n    //   this.timePerTwoBars = this.timePerBar * 2\r\n    //   this.demoEndTime = this.demoStartTime + (this.timePerBar * this.numberOfBars)\r\n    // }\r\n\r\n    // this.description = this.lesson.description\r\n\r\n    // document.getElementById(`video-${this.lesson.id}`).appendChild(document.getElementById(`slider-${this.lesson.id}`))\r\n    // document.getElementsByClassName(\"v-slider__track-container\")[0].style.width = \"5px\"\r\n    // document.getElementsByClassName(\"v-slider__thumb-label\")[0].style.color = \"black\"\r\n    // document.getElementsByClassName(\"v-slider__thumb-label\")[0].style.boxShadow = \"0px 0px 5px black\"\r\n\r\n    // var doit;\r\n    // window.onresize = () => {\r\n    //   clearTimeout(doit)\r\n    //   doit = setTimeout(() => {\r\n    //     this.drawScores(true)\r\n    //   }, 200)\r\n    // }\r\n  },\r\n\r\n  beforeDestroy() {\r\n    if (this.player) {\r\n        this.player.dispose()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n \r\n/* \r\nbg: #5d646e\r\nslider-bg: #72839d\r\n */\r\n.hide {\r\n  opacity: 0 !important;\r\n  visibility: hidden !important;\r\n}\r\n\r\n.bpm-control {\r\n  background-color: rgba(43, 51, 63, 0.7); \r\n  position: absolute; \r\n  bottom: 30px; \r\n  left: 12px; \r\n  width: 30px;\r\n  visibility: visible;\r\n  opacity: 1;\r\n  transition: visibility 1000ms, opacity 1000ms;\r\n}\r\n\r\n#title {\r\n  background-color: #1e1e1c;\r\n  color: white;\r\n}\r\n\r\n.selected-border {\r\n  background-color: #E8EAF6;\r\n}\r\n\r\n.full-height {\r\n  height: 100vh;\r\n  top: 0;\r\n}\r\n\r\n.partial-height {\r\n  height: calc(100vh - 64px);\r\n}\r\n\r\n.link:hover {\r\n  background-color: #FAFAFA;\r\n}\r\n\r\n.link, .link:link, .link:visited, .link:active, .link:hover {\r\n  text-decoration: none;\r\n  color: #1e1e1c;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShowLesson.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShowLesson.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ShowLesson.vue?vue&type=template&id=71e804a6&scoped=true&lang=pug&\"\nimport script from \"./ShowLesson.vue?vue&type=script&lang=js&\"\nexport * from \"./ShowLesson.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ShowLesson.vue?vue&type=style&index=0&id=71e804a6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"71e804a6\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VChip } from 'vuetify/lib/components/VChip';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VExpansionPanel } from 'vuetify/lib/components/VExpansionPanel';\nimport { VExpansionPanelContent } from 'vuetify/lib/components/VExpansionPanel';\nimport { VExpansionPanelHeader } from 'vuetify/lib/components/VExpansionPanel';\nimport { VExpansionPanels } from 'vuetify/lib/components/VExpansionPanel';\nimport { VFileInput } from 'vuetify/lib/components/VFileInput';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemGroup } from 'vuetify/lib/components/VList';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VTextarea } from 'vuetify/lib/components/VTextarea';\ninstallComponents(component, {VAvatar,VBtn,VChip,VCol,VContainer,VExpansionPanel,VExpansionPanelContent,VExpansionPanelHeader,VExpansionPanels,VFileInput,VForm,VIcon,VList,VListItem,VListItemContent,VListItemGroup,VRow,VTextarea})\n","<template lang=\"pug\">\r\n  div#show-course(v-if=\"course\" fluid)\r\n    v-container#course-info(fluid)\r\n      v-row.px-sm-16.mx-md-8.mx-lg-16\r\n        v-col(cols=\"12\" md=\"8\")\r\n          v-row\r\n            v-col.text-left\r\n              h1(style=\"font-size: 40px; line-height: 1.2;\").font-weight-bold {{ course.name }}\r\n          v-row\r\n            v-col.pt-0\r\n              h3 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce aliquam orci sed mi tempus ullamcorper. Quisque vitae lacus ut ipsum ultrices rhoncus quis a arcu. Sed placerat nisl sed tellus malesuada, id ornare augue vulputate. Pellentesque laoreet ipsum quis tempor aliquet.\r\n      \r\n          v-row\r\n            v-col.py-0\r\n              h4.font-weight-bold Created by: {{ course.TutorId }}\r\n            \r\n          v-row\r\n            v-col(sm=\"4\" lg=\"3\")\r\n              v-row\r\n                v-col.pr-0(sm=\"4\" md=\"3\")\r\n                  v-icon(color=\"white\" size=\"30\") mdi-guitar-acoustic\r\n                v-col.my-auto(sm=\"8\" md=\"9\")\r\n                  p.ma-0 Instrument: Drum\r\n            v-col(sm=\"4\" lg=\"3\")\r\n              v-row\r\n                v-col.pr-0(sm=\"4\" md=\"3\")\r\n                  v-icon(color=\"white\" size=\"24\") mdi-earth\r\n                v-col.my-auto(sm=\"8\" md=\"9\")\r\n                  p.ma-0 English\r\n            v-col(sm=\"4\" lg=\"3\")\r\n              v-row\r\n                v-col.pr-0(sm=\"4\" md=\"3\")\r\n                  v-icon(color=\"white\" size=\"24\") mdi-calendar-clock\r\n                v-col.my-auto(sm=\"8\" md=\"9\")\r\n                  p.ma-0 Last updated: {{ new Date(course.updatedAt).toLocaleString([], { year: 'numeric', month: 'numeric', day:'numeric'}) }}\r\n\r\n        v-col(cols=\"12\" md=\"4\" v-if=\"is_student && !isSubscribed\")\r\n          v-card\r\n            v-img.white--text.align-end(gradient=\"to top right, rgba(0,0,0,.5), rgba(0,0,0,.5)\" height=\"200px\" src='https://images.pexels.com/photos/1246437/pexels-photo-1246437.jpeg?cs=srgb&dl=close-up-photo-of-person-playing-piano-1246437.jpg&fm=jpg' @click=\"alert('hey')\" style=\"cursor: pointer;\")\r\n              div(style=\"position: absolute; left: 0; top: 0; width: 100%; height: 100%;\")\r\n               img#play-button(:src=\"require('../../assets/play_button.png')\" style=\"position: absolute; width: 60px; left: calc(50% - 30px); top: calc(50% - 30px); height: 60px;\" color=\"white\" size=\"62\" )\r\n               h3.text--white(style=\"bottom: 12px; text-align: center; position: absolute; left:0; right:0;\") Preview this course\r\n            v-row\r\n              v-col.text-left\r\n                h1.pl-5.font-weight-bold(style=\"font-size: 36px;\") S${{ course.price.toFixed(2) }}\r\n            v-row\r\n              v-col.text-center\r\n                v-btn(color=\"#ec5252\" dark @click=\"subscribe\" style=\"width:90%\" x-large v-if=\"course.price == 0\") Enroll Now\r\n                v-btn(color=\"#ec5252\" dark @click=\"subscribe\" style=\"width:90%\" x-large v-else) Buy Now\r\n        v-col.my-auto(cols=\"12\" md=\"4\" v-else)\r\n          v-row\r\n            v-col.text-center\r\n              v-btn(color=\"#26A69A\" dark style=\"width:90%\" x-large @click=\"goToLesson($event, course.lessons[0])\") Start Learning!\r\n\r\n    v-container(fluid)\r\n      v-row.px-sm-16.mx-md-8.mx-lg-16\r\n        v-col(cols=\"12\")\r\n          v-sheet.px-16.py-5(color=\"#fbfbf8\" rounded style=\"border: 1px solid #E0E0E0\")\r\n            v-row\r\n              v-col.py-0.px-0\r\n                h2.py-3.pl-0(style=\"color: #3c3b37; font-size: 30px;\") What you will learn\r\n            v-row\r\n              v-col.py-0.px-0(cols=\"12\" md=\"6\")\r\n                v-row\r\n                  v-col.py-2.pr-0(cols=\"1\")\r\n                    v-icon.d-inline.mb-2(size=\"16\" color=\"#ec5252\") mdi-star\r\n                  v-col.py-2.pr-0(cols=\"10\")\r\n                    p.d-inline.mb-0.text-uppercase(style=\"line-height:1; vertical-align: middle;\") mdi-star\r\n              v-col.py-0.px-0(cols=\"12\" md=\"6\")\r\n                v-row\r\n                  v-col.py-2.pr-0(cols=\"1\")\r\n                    v-icon.d-inline.mb-2(size=\"16\" color=\"#ec5252\") mdi-star\r\n                  v-col.py-2.pr-0(cols=\"10\")\r\n                    .d-inline.mb-0.text-uppercase(style=\"line-height:1; vertical-align: middle; width: 100%;\")  Lorem ipsum dolor sit amet, consectetur adipiscing elit\r\n    \r\n    v-container(fluid)\r\n      v-row.px-sm-16.mx-md-8.mx-lg-16\r\n        v-col(cols=\"12\")\r\n          v-sheet.px-10.py-5\r\n            h2.py-3(style=\"color: #3c3b37; font-size: 30px; font-size: 30px;\") About the course\r\n            p Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam at urna vitae purus ornare tincidunt vitae nec odio. Quisque dui urna, facilisis a convallis nec, porttitor quis orci. Quisque in condimentum arcu. Sed porta aliquet urna vitae viverra. Curabitur facilisis ullamcorper dapibus. Quisque bibendum, arcu vitae efficitur placerat, est nulla ultricies ligula, ac feugiat ante tellus sed dui. Nunc id lobortis eros. Donec id urna vel ex convallis vehicula. Suspendisse pulvinar non sapien sed aliquet. Morbi dictum condimentum arcu quis auctor. Nulla a nisi purus. In tempor sollicitudin pulvinar. Maecenas cursus sit amet tortor sed mattis. Praesent non lorem nec ipsum cursus vulputate. In at convallis metus. Praesent sit amet condimentum est. Praesent ut dui est. Morbi imperdiet libero vitae massa convallis, sed semper quam facilisis. Vivamus vitae feugiat tortor, eu lacinia sem. Suspendisse aliquam diam non arcu gravida, malesuada mattis elit tempus. Quisque sed arcu enim. Maecenas scelerisque venenatis massa, et vulputate ex tristique sit amet. Etiam eu dolor nec nisi auctor lobortis nec quis neque. Phasellus laoreet eros in placerat aliquet. Duis finibus posuere tortor quis posuere.\r\n\r\n    v-container(fluid)\r\n      v-row.px-sm-16.mx-md-8.mx-lg-16\r\n        v-col(cols=\"12\")\r\n          v-sheet.px-16.py-5\r\n            v-row\r\n              v-col.py-0.px-0\r\n                h2.pl-0(style=\"color: #3c3b37; font-size: 30px;\") Prerequisites for this Course\r\n            v-row(align=\"start\")\r\n              v-col.py-0.px-0(cols=\"6\")\r\n                v-row\r\n                  v-col.pr-0(cols=\"1\" align-self=\"center\")\r\n                    v-icon.d-inline.mb-2(size=\"30\" color=\"#ec5252\") mdi-square-small\r\n                  v-col.pr-0(cols=\"10\" align-self=\"center\")\r\n                    p.d-inline.mb-0(style=\"line-height:1;\") mdi-star\r\n              v-col.py-0.px-0(cols=\"6\")\r\n              v-col.py-0.px-0(cols=\"6\")\r\n                v-row\r\n                  v-col.py-2.pr-0(cols=\"1\")\r\n                    v-icon.d-inline.mb-2(size=\"30\" color=\"#ec5252\") mdi-square-small\r\n                  v-col.py-2.pr-0(cols=\"10\" align-self=\"center\")\r\n                    p.d-inline.mb-0(style=\"line-height:1; vertical-align: middle;\")  Lorem ipsum dolor sit amet, consectetur adipiscing elit\r\n\r\n    v-container(fluid)\r\n      v-row.px-sm-16.mx-md-8.mx-lg-16\r\n        v-col(cols=\"12\")\r\n          v-sheet.px-16.py-5\r\n            v-row\r\n              v-col.py-0.px-0\r\n                h2.pl-0(style=\"color: #3c3b37; font-size: 30px;\") Who's suitable for the course\r\n            v-row(align=\"start\")\r\n              v-col.py-0.px-0(cols=\"6\")\r\n                v-row\r\n                  v-col.pr-0.py-0(cols=\"1\" align-self=\"center\")\r\n                    v-icon.d-inline.mb-2(size=\"30\" color=\"#ec5252\") mdi-square-small\r\n                  v-col.pr-0(cols=\"10\" align-self=\"center\")\r\n                    p.d-inline.mb-0(style=\"line-height:1;\") mdi-star\r\n              v-col.py-0.px-0(cols=\"6\")\r\n              v-col.py-0.px-0(cols=\"6\")\r\n                v-row\r\n                  v-col.py-0.pr-0(cols=\"1\")\r\n                    v-icon.d-inline.mb-2(size=\"30\" color=\"#ec5252\") mdi-square-small\r\n                  v-col.py-2.pr-0(cols=\"10\" align-self=\"center\")\r\n                    p.d-inline.mb-0(style=\"line-height:1; vertical-align: middle;\")  Lorem ipsum dolor sit amet, consectetur adipiscing elit\r\n\r\n    v-container(fluid)\r\n      v-row.px-sm-16.mx-md-8.mx-lg-16\r\n        v-col(cols=\"12\")\r\n          v-sheet.px-16.py-5\r\n            v-row\r\n              v-col.py-0.px-0\r\n                h2.pl-0.pb-2(style=\"color: #3c3b37; font-size: 30px;\") Course Content\r\n                div(style=\"color: #9E9E9E; font-size: 16px;\") {{ course.lessons.length }} Lessons &#8226; {{ timeConverted }} of video content\r\n            v-row(align=\"start\")\r\n              v-col.px-0(cols=\"12\")\r\n                v-card \r\n                  v-toolbar(color='grey lighten-2' light flat)\r\n                    v-toolbar-title {{ course.name }}\r\n                    v-spacer\r\n                    v-btn(icon)\r\n                      v-icon mdi-unfold-more-horizontal\r\n\r\n                  v-list\r\n                    v-list-item(v-for='(lesson, idx) in course.lessons' :key='lesson.id' shaped :disabled=\"idx != 0\" @click=\"goToLesson($event, lesson)\")\r\n                      v-list-item-icon(v-if=\"idx == 0\")\r\n                        v-icon(color='#ec5252') mdi-play\r\n                      v-list-item-icon(v-else)\r\n                        v-icon(color='rgba(0, 0, 0, 0.38)') mdi-play\r\n                      v-list-item-content\r\n                        v-list-item-title(v-text='lesson.name')\r\n                      v-spacer\r\n                      //- v-list-item-icon(v-if=\"idx == 0\")\r\n                      //-   div(to=\"/\") Preview\r\n                      v-list-item-icon\r\n                        div {{ lesson.duration }} mins\r\n\r\n                 \r\n\r\n    v-container(fluid)\r\n      v-row.justify-center(no-gutters)\r\n        v-col.pa-0(cols=\"12\" md=\"9\")\r\n          lesson(:lesson=\"course.lessons[0]\")\r\n        //-   v-tabs.rounded(v-model=\"tab\" background-color=\"indigo lighten-5\" color=\"indigo\" height=\"64\" fixed-tabs)\r\n        //-     v-tab.text-h5(v-for=\"lesson in course.lessons\" :key=\"lesson.id\") {{ lesson.name }}\r\n        //-   v-tabs-items(v-model=\"tab\" v-if=\"!isSubscribed\")\r\n        //-     v-tab-item(v-for=\"(lesson, idx) in course.lessons\" :key=\"lesson.id\")\r\n        //-       lesson(:lesson=\"lesson\")\r\n        //-   v-tabs-items(v-model=\"tab\" v-else)\r\n        //-     v-tab-item(v-for=\"(lesson, idx) in course.lessons\" :key=\"lesson.id\" :disabled=\"idx != 0\")\r\n          //- lesson(:lesson=\"lesson\")\r\n        v-col.pa-0(cols=\"12\" md=\"3\")\r\n          \r\n        \r\n          //- v-tabs.rounded(v-model=\"tab\" background-color=\"indigo lighten-5\" color=\"indigo\" height=\"64\" fixed-tabs)\r\n          //-   v-tab.text-h4(v-for=\"lesson in course.lessons\" :key=\"lesson.id\") {{ lesson.name }}\r\n          //-   v-tab.text-h4(:key=\"'+'\")\r\n          //-     v-icon(left) mdi-plus\r\n          //-     | New Lesson\r\n          //- v-tabs-items(v-model=\"tab\")\r\n            v-tab-item(v-for=\"lesson in course.lessons\" :key=\"lesson.id\")\r\n              lesson(:lesson=\"lesson\")\r\n            v-tab-item(:key=\"'+'\")\r\n              v-card\r\n                v-row.justify-center\r\n                  v-col(cols=\"6\")\r\n                    v-card-title\r\n                      span.headline.text-h3 Lesson Details\r\n                    v-card-text.py-0\r\n                      v-form(ref=\"form\")\r\n                        v-text-field(v-model=\"new_name\" type=\"text\" label='Lesson name*' required :rules=\"nameRules\")\r\n                        v-text-field(v-model=\"new_duration\" type=\"text\" label='Estimated lesson duration in minutes*' required :rules=\"durationRules\")\r\n                            \r\n                          //- v-col(cols='12')\r\n                          //-   v-autocomplete(:items=\"['Skiing', 'Ice hockey', 'Soccer', 'Basketball', 'Hockey', 'Reading', 'Writing', 'Coding', 'Basejump']\" label='Interests' multiple='')\r\n                    v-card-actions\r\n                      v-spacer\r\n                      v-btn(color='indigo' text='' @click=\"add_lesson\" :loading=\"add_btn_loading\" x-large block) Save\r\n                      v-spacer\r\n                    v-card-text(v-if=\"error\")\r\n                      p {{ error }}\r\n    //- v-row(justify='center')\r\n    //-   v-dialog(v-model='dialog' persistent='' max-width='600px')\r\n    //-     template(v-slot:activator='{ on, attrs }')\r\n    //-     v-card\r\n    //-       v-card-name\r\n    //-         span.headline Rhythm Details\r\n    //-       v-card-text.py-0\r\n    //-         v-form(ref=\"form\")\r\n    //-           v-container\r\n    //-             v-row\r\n    //-               v-col(cols='12')\r\n    //-                 v-text-field(v-model=\"new_name\" type=\"text\" label='Rhythm name*' required :rules=\"nameRules\")\r\n    //-             //- v-col(cols='12')\r\n    //-             //-   v-autocomplete(:items=\"['Skiing', 'Ice hockey', 'Soccer', 'Basketball', 'Hockey', 'Reading', 'Writing', 'Coding', 'Basejump']\" label='Interests' multiple='')\r\n    //-       v-card-actions\r\n    //-         v-spacer\r\n    //-         v-btn(color='blue darken-1' text='' @click='dialog = false') Close\r\n    //-         v-btn(color='blue darken-1' text='' @click=\"add_rhythm\" :loading=\"add_btn_loading\") Save\r\n    //-       v-card-text(v-if=\"error\")\r\n    //-         p {{ error }}  \r\n</template>\r\n \r\n<script>\r\nimport Panel from \"@/components/Panel\";\r\nimport { mapState } from \"vuex\";\r\nimport ShowLesson from \"@/components/Course/ShowLesson\";\r\nimport CourseService from \"@/services/CourseService\";\r\nimport ThreadService from \"@/services/ThreadService\";\r\n\r\nexport default {\r\n  name: \"ShowCourse\",\r\n  data () {\r\n    return {\r\n      course: null,\r\n      dialog: false,\r\n      error: null,\r\n      recording: false,\r\n      tab: null,\r\n      new_name: '',\r\n      new_duration: '',\r\n      new_melody: [],\r\n      nameRules: [\r\n        v => !!v || \"Title is required\"\r\n      ],\r\n      durationRules: [\r\n        v => !!v || \"Duration is required\",\r\n        v => new RegExp(/^\\d+$/).test(v) || \"Please input numbers only\"\r\n      ],\r\n      add_btn_loading: false,\r\n    }\r\n  },\r\n  components: {\r\n    \"panel\": Panel,\r\n    \"lesson\": ShowLesson\r\n  },\r\n  computed: {\r\n    is_student () {\r\n      return this.user.isStudent;\r\n    },\r\n\r\n    isSubscribed () {\r\n      if (this.is_student) {\r\n        return this.$store.getters.isSubscribed(this.course.id)\r\n      } else {\r\n        return null\r\n      }\r\n    },\r\n\r\n    isOwned () {\r\n      if (!this.is_student) {\r\n        return this.$store.getters.isOwned(this.course.id)\r\n      } else {\r\n        return null\r\n      }\r\n    },\r\n\r\n    timeConverted () {\r\n      var num = this.course.duration;\r\n      var hours = (num / 60);\r\n      var rhours = Math.floor(hours);\r\n      var minutes = (hours - rhours) * 60;\r\n      var rminutes = Math.round(minutes);\r\n      if (rhours == 0) {\r\n        return rminutes + \" minute(s)\";\r\n      } else {\r\n        return rhours + \" hour(s) and \" + rminutes + \" minute(s)\";\r\n      }\r\n    },\r\n\r\n    ...mapState([\"user\", \"userSubscribedCourses\", \"userOwnedCourses\"])\r\n  },\r\n  methods: {\r\n    goToLesson (event, lesson) {\r\n      this.$router.push({\r\n        name: `showlesson`,\r\n        params: {\r\n          course_id: this.course.id,\r\n          lesson_id: lesson.id,\r\n          course: this.course,\r\n          lesson: lesson\r\n        }\r\n      })\r\n    },\r\n\r\n    edit_rhythm_name () {\r\n      this.name_editable = true;\r\n    },\r\n\r\n    async add_lesson () {\r\n      if (this.$refs.form.validate()) {\r\n        this.add_btn_loading = true;\r\n        var newLesson = {\r\n          name: this.new_name,\r\n          duration: parseInt(this.new_duration),\r\n          cid: this.course.id\r\n        };\r\n\r\n        await this.$store.dispatch(\"addLesson\", newLesson);\r\n        this.add_btn_loading = false;\r\n      }\r\n    },\r\n\r\n    open_dialogue () {\r\n      this.dialog = true;\r\n    },\r\n\r\n    async subscribe () {\r\n      if (this.course.price == 0) {\r\n        await Promise.all(this.course.lessons.map(async lesson => {\r\n          var response = await ThreadService.create({\r\n            lid: lesson.id\r\n          })\r\n          response.data.thread.posts = []\r\n          lesson.thread = response.data.thread\r\n          return lesson\r\n        })) \r\n\r\n        await this.$store.dispatch('subscribe', {\r\n          studentId: this.$store.state.user.id,\r\n          courseId: this.course.id\r\n        })\r\n\r\n        this.$router.push({\r\n          name: `showlesson`,\r\n          params: {\r\n            course_id: this.course.id,\r\n            lesson_id: this.course.lessons[0].id\r\n          }\r\n        })\r\n\r\n      } else {\r\n        this.$router.push(`/payment/${this.course.id}`)\r\n      }\r\n    }\r\n  },\r\n\r\n  created: async function() {\r\n    var response = await CourseService.show(this.$route.params.course_id)\r\n    try {\r\n      response.data.course.lessons = await Promise.all(response.data.course.lessons.map(async (lesson) => {\r\n        var threadResponse = null\r\n        this.$store.dispatch('setNotifications', this.$store.state.notifications - response.data.course.unreadTutorPost)\r\n        threadResponse = await ThreadService.show(lesson.id, this.user.id)\r\n        lesson.thread = threadResponse.data.thread\r\n        return lesson\r\n      }))\r\n      this.course = response.data.course\r\n    } catch (err) {\r\n      console.log(err)\r\n    }\r\n  },\r\n\r\n  mounted: function () {\r\n    // var stripe = window.Stripe('pk_test_51H4T51AAfWaljxm1ClFL60860vpMI5QDkhWYBEu4BKU39CVAUlTNo0fdnR6CDCv3puPd8ZRxdf5z7OiCztEEZ0rk00P5a6SI0s');\r\n    // var elements = stripe.elements();\r\n    // var card = elements.create(\"card\", { \r\n    //   style: {\r\n    //     base: {\r\n    //       color: \"#32325d\",\r\n    //     }\r\n    //   } \r\n    // });\r\n    // console.log(document.getElementById('payment-form'))\r\n    // console.log(document.getElementById('card-element'))\r\n    // card.mount(document.getElementById('card-element'));\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#setting {\r\n  width: 100%;\r\n}\r\n\r\n#rhythms-list-half {\r\n  overflow: scroll;\r\n  height: 50vh;\r\n}\r\n\r\n#rhythms-list-full {\r\n  overflow: scroll;\r\n  height: 100vh;\r\n}\r\n\r\n#add_btn {\r\n  width: 70%;\r\n}\r\n\r\n#vexflow-wrapper {\r\n  width: 100%;\r\n}\r\n\r\n#course-info {\r\n  background-color: #1e1e1c;\r\n  color: white;\r\n}\r\n\r\n#play-button:hover {\r\n  opacity: 0.95;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShowCourse.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShowCourse.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ShowCourse.vue?vue&type=template&id=58d3c073&scoped=true&lang=pug&\"\nimport script from \"./ShowCourse.vue?vue&type=script&lang=js&\"\nexport * from \"./ShowCourse.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ShowCourse.vue?vue&type=style&index=0&id=58d3c073&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"58d3c073\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemIcon } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSheet } from 'vuetify/lib/components/VSheet';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VBtn,VCard,VCol,VContainer,VIcon,VImg,VList,VListItem,VListItemContent,VListItemIcon,VListItemTitle,VRow,VSheet,VSpacer,VToolbar,VToolbarTitle})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mt-5\",attrs:{\"id\":\"courses\"}},[_c('panel',{attrs:{\"title\":\"All Courses\",\"md\":\"9\"}},[(!_vm.is_student)?_c('v-list',_vm._l((_vm.userOwnedCourses),function(course){return _c('v-list-item',{key:course.id},[_c('v-list-item-content',[_c('v-list-item-title',{staticClass:\"text-h5 py-0\",domProps:{\"textContent\":_vm._s(course.name)}})],1),_c('v-list-item-icon',[_c('v-btn',{attrs:{\"outlined\":\"\",\"color\":\"indigo\"},on:{\"click\":function($event){return _vm.showCourse($event, course.id)}}},[_c('v-icon',[_vm._v(\"mdi-pencil\")])],1)],1),_c('v-list-item-icon',[_c('v-btn',{attrs:{\"outlined\":\"\",\"color\":\"indigo\"},on:{\"click\":function($event){return _vm.deleteCourse($event, course)}}},[_c('v-icon',[_vm._v(\"mdi-trash-can-outline\")])],1)],1)],1)}),1):_c('v-list',_vm._l((_vm.userSubscribedCourses),function(course){return _c('v-list-item',{key:course.id,on:{\"click\":function($event){return _vm.showCourse($event, course.id, course.lessons[0].id)}}},[_c('v-list-item-content',[_c('v-list-item-title',{staticClass:\"text-h5 py-0\",domProps:{\"textContent\":_vm._s(course.name)}})],1),_c('v-list-item-content',[_c('v-list-item-title',{domProps:{\"textContent\":_vm._s(course.date)}})],1)],1)}),1)],1),(!_vm.is_student)?_c('v-row',{attrs:{\"justify\":\"center\"}},[_c('v-btn',{staticClass:\"mt-5\",attrs:{\"x-large\":\"\",\"to\":\"/course/new\"}},[_c('v-icon',{attrs:{\"left\":\"\",\"dark\":\"\"}},[_vm._v(\"mdi-plus-thick\")]),_vm._v(\"New Course\")],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\r\n  #courses.mt-5\r\n    panel(title=\"All Courses\" md=\"9\")\r\n      v-list(v-if=\"!is_student\")\r\n        v-list-item(v-for=\"course in userOwnedCourses\" :key=\"course.id\")\r\n          v-list-item-content\r\n            v-list-item-title.text-h5.py-0(v-text=\"course.name\")\r\n          v-list-item-icon\r\n            v-btn(outlined color='indigo' @click=\"showCourse($event, course.id)\")\r\n              v-icon mdi-pencil\r\n          v-list-item-icon\r\n            v-btn(outlined color='indigo' @click=\"deleteCourse($event, course)\")\r\n              v-icon mdi-trash-can-outline\r\n      v-list(v-else)\r\n        v-list-item(v-for=\"course in userSubscribedCourses\" :key=\"course.id\" @click=\"showCourse($event, course.id, course.lessons[0].id)\")\r\n          v-list-item-content\r\n            v-list-item-title.text-h5.py-0(v-text=\"course.name\")\r\n          v-list-item-content\r\n            v-list-item-title(v-text='course.date')\r\n    v-row(justify='center' v-if=\"!is_student\")\r\n          v-btn.mt-5(x-large to=\"/course/new\")\r\n            v-icon(left dark) mdi-plus-thick\r\n            | New Course\r\n\r\n</template>\r\n\r\n<script>\r\nimport Panel from '@/components/Panel'\r\nimport { mapState } from 'vuex'\r\n\r\nexport default {\r\n  data () {\r\n    return {  \r\n      dialog: false,\r\n      name: '',\r\n      nameRules: [\r\n        v => !!v || 'Name is required',\r\n      ],\r\n      validation: {\r\n        namePassed: false,\r\n      },\r\n      error: null,\r\n      loading: false,\r\n      price: '0.0',\r\n      priceRules: [\r\n        v => !!v || \"Price is required\",\r\n        v => new RegExp(/^\\d+(?:\\.\\d{0,2})$/).test(v) || \"Price must be a number with maximum 2 decimal places\"\r\n      ]\r\n    }\r\n  },\r\n  computed: {\r\n    is_student () {\r\n      return this.user.isStudent\r\n    },\r\n\r\n    ...mapState(['user', 'userOwnedCourses', 'userSubscribedCourses'])\r\n  },\r\n  components: {\r\n    'panel': Panel\r\n  },\r\n  methods: {\r\n    showCourse (event, id, lid) {\r\n      this.$router.push({\r\n        name: `showlesson`,\r\n        params: {\r\n          course_id: id,\r\n          lesson_id: lid\r\n        }\r\n      })\r\n    },\r\n\r\n    async deleteCourse (event, course) {\r\n      if (confirm('Are you sure?')) {\r\n        await this.$store.dispatch('deleteCourse', course)\r\n      }\r\n    }\r\n  },\r\n  mounted: async function () {\r\n    // const response = await CourseService.list()\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CourseIndex.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CourseIndex.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CourseIndex.vue?vue&type=template&id=584d05f4&lang=pug&\"\nimport script from \"./CourseIndex.vue?vue&type=script&lang=js&\"\nexport * from \"./CourseIndex.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemIcon } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VIcon,VList,VListItem,VListItemContent,VListItemIcon,VListItemTitle,VRow})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"new-course\"}},[_c('v-stepper',{model:{value:(_vm.e1),callback:function ($$v) {_vm.e1=$$v},expression:\"e1\"}},[_c('v-stepper-header',[_c('v-stepper-step',{attrs:{\"complete\":_vm.e1 > 1,\"step\":\"1\",\"color\":\"indigo\"}},[_vm._v(\"Course Details\")]),_c('v-divider'),_c('v-stepper-step',{attrs:{\"complete\":_vm.e1 > 2,\"step\":\"2\",\"color\":\"indigo\"}},[_vm._v(\"Plan the Lessons\")]),_c('v-divider'),_c('v-stepper-step',{attrs:{\"step\":\"3\",\"color\":\"indigo\"}},[_vm._v(\"Review and Confirm\")])],1),_c('v-stepper-items',[_c('v-stepper-content',{attrs:{\"step\":\"1\"}},[_c('panel',{staticClass:\"mb-5\",attrs:{\"title\":\"Basic Info\",\"md\":\"10\"}},[_c('v-card-text',[_c('v-form',{ref:\"courseForm\"},[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"4\"}},[_c('v-text-field',{attrs:{\"label\":\"Title*\",\"name\":\"title\",\"type\":\"text\",\"rules\":_vm.nameRules,\"solo\":\"\",\"clearable\":\"\",\"color\":\"indigo\"},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"4\"}},[_c('v-text-field',{attrs:{\"label\":\"Price*\",\"name\":\"price\",\"prepend-icon\":\"mdi-currency-usd\",\"rules\":_vm.priceRules,\"solo\":\"\",\"clearable\":\"\",\"color\":\"indigo\"},model:{value:(_vm.price),callback:function ($$v) {_vm.price=$$v},expression:\"price\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"4\"}},[_c('v-select',{attrs:{\"label\":\"Language\",\"items\":_vm.languages,\"solo\":\"\"},model:{value:(_vm.language),callback:function ($$v) {_vm.language=$$v},expression:\"language\"}})],1)],1),_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-textarea',{attrs:{\"label\":\"Description\",\"auto-grow\":\"\",\"solo\":\"\"},model:{value:(_vm.description),callback:function ($$v) {_vm.description=$$v},expression:\"description\"}})],1)],1),_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"4\"}},[_c('v-select',{attrs:{\"label\":\"Level\",\"items\":_vm.levels,\"solo\":\"\"},model:{value:(_vm.level),callback:function ($$v) {_vm.level=$$v},expression:\"level\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"4\"}},[_c('v-select',{attrs:{\"label\":\"Instrument\",\"items\":_vm.instruments,\"solo\":\"\"},model:{value:(_vm.instrument),callback:function ($$v) {_vm.instrument=$$v},expression:\"instrument\"}})],1)],1)],1)],1)],1),_c('v-row',{staticClass:\"justify-center\"},[_c('v-col',[_c('v-btn',{attrs:{\"color\":\"indigo\",\"dark\":\"\"},on:{\"click\":_vm.goStepTwo}},[_vm._v(\"Continue\")]),_c('v-btn',{attrs:{\"to\":\"/course/index\"}},[_vm._v(\"Cancel\")])],1)],1)],1),_c('v-stepper-content',{attrs:{\"step\":\"2\"}},[_c('v-row',{staticClass:\"justify-center\"},[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"11\"}},[_c('v-expansion-panels',{staticClass:\"mb-5\",attrs:{\"multiple\":\"\",\"focusable\":\"\"},model:{value:(_vm.lesson),callback:function ($$v) {_vm.lesson=$$v},expression:\"lesson\"}},[_vm._l((_vm.lessons),function(lesson,idx){return _c('v-expansion-panel',{key:idx,on:{\"click\":function($event){}}},[_c('v-expansion-panel-header',{staticClass:\"text-h4\"},[_vm._v(\"Lesson \"+_vm._s(idx + 1)+\": \"+_vm._s(lesson.name))]),_c('v-expansion-panel-content',{staticClass:\"px-6\"},[_c('v-form',{ref:(\"lessonForm\" + idx),refInFor:true,staticClass:\"mt-5\"},[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"4\"}},[_c('v-text-field',{attrs:{\"label\":\"Name\",\"name\":\"name\",\"type\":\"text\",\"rules\":_vm.requiredRules,\"solo\":\"\",\"clearable\":\"\",\"color\":\"indigo\"},model:{value:(_vm.lessons[idx].name),callback:function ($$v) {_vm.$set(_vm.lessons[idx], \"name\", $$v)},expression:\"lessons[idx].name\"}},[_vm._v(\"Title*\")])],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"4\"}},[_c('v-text-field',{attrs:{\"label\":\"Duration in minutes\",\"name\":\"duration\",\"rules\":_vm.durationRules,\"solo\":\"\",\"clearable\":\"\",\"color\":\"indigo\"},model:{value:(_vm.lessons[idx].duration),callback:function ($$v) {_vm.$set(_vm.lessons[idx], \"duration\", $$v)},expression:\"lessons[idx].duration\"}})],1)],1),_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-textarea',{attrs:{\"label\":\"Description\",\"auto-grow\":\"\"},model:{value:(_vm.lessons[idx].description),callback:function ($$v) {_vm.$set(_vm.lessons[idx], \"description\", $$v)},expression:\"lessons[idx].description\"}})],1)],1),_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-file-input',{attrs:{\"accept\":\"video/mp4, video/ogg\",\"placeholder\":\"Choose Explanation Video\",\"prepend-icon\":\"mdi-video\",\"label\":\"Explanation Video\"},model:{value:(_vm.lessons[idx].video),callback:function ($$v) {_vm.$set(_vm.lessons[idx], \"video\", $$v)},expression:\"lessons[idx].video\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-file-input',{attrs:{\"accept\":\"image/*\",\"placeholder\":\"Choose coverpage for video\",\"prepend-icon\":\"mdi-image\",\"label\":\"Explanation Video Poster\"},model:{value:(_vm.lessons[idx].videoPoster),callback:function ($$v) {_vm.$set(_vm.lessons[idx], \"videoPoster\", $$v)},expression:\"lessons[idx].videoPoster\"}})],1)],1),_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-file-input',{attrs:{\"accept\":\"video/mp4, video/ogg\",\"placeholder\":\"Choose Explanation Video\",\"prepend-icon\":\"mdi-video\",\"label\":\"Demo Video\"},model:{value:(_vm.lessons[idx].demo),callback:function ($$v) {_vm.$set(_vm.lessons[idx], \"demo\", $$v)},expression:\"lessons[idx].demo\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-file-input',{attrs:{\"accept\":\"image/*\",\"placeholder\":\"Choose coverpage for demo video\",\"prepend-icon\":\"mdi-image\",\"label\":\"Demo Video Poster\"},model:{value:(_vm.lessons[idx].demoPoster),callback:function ($$v) {_vm.$set(_vm.lessons[idx], \"demoPoster\", $$v)},expression:\"lessons[idx].demoPoster\"}})],1)],1),_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-switch',{attrs:{\"label\":\"Overlay score on your demo video\"},on:{\"change\":function($event){return _vm.showVex($event, idx)}},model:{value:(_vm.lessons[idx].useScore),callback:function ($$v) {_vm.$set(_vm.lessons[idx], \"useScore\", $$v)},expression:\"lessons[idx].useScore\"}})],1)],1),_c('v-row',[(_vm.lessons[idx].useScore)?_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-radio-group',{attrs:{\"mandatory\":true},model:{value:(_vm.lessons[idx].scoreOption),callback:function ($$v) {_vm.$set(_vm.lessons[idx], \"scoreOption\", $$v)},expression:\"lessons[idx].scoreOption\"}},[_c('v-radio',{attrs:{\"label\":\"Upload musicXML file\",\"value\":\"xml\"}}),_c('v-radio',{attrs:{\"label\":\"Design your own score\",\"value\":\"vex\"}})],1)],1):_vm._e(),(_vm.lessons[idx].useScore)?_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-text-field',{attrs:{\"label\":\"Demo Start Time\",\"clearable\":\"\",\"color\":\"indigo\",\"prepend-icon\":\"mdi-alarm\",\"persistent-hint\":\"\",\"hint\":\"At roughly which second did you start playing in demo video\",\"rules\":_vm.demoStartTimeRules},model:{value:(_vm.lessons[idx].demoStartTime),callback:function ($$v) {_vm.$set(_vm.lessons[idx], \"demoStartTime\", $$v)},expression:\"lessons[idx].demoStartTime\"}})],1):_vm._e()],1)],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:((_vm.lessons[idx].scoreOption == 'vex' && _vm.lessons[idx].useScore)),expression:\"(lessons[idx].scoreOption == 'vex' && lessons[idx].useScore)\"}],attrs:{\"id\":\"optionvex\"}},[_c('v-row',[_c('v-col',{attrs:{\"id\":(\"pannel-content-\" + idx)},on:{\"click\":function($event){return _vm.changeMelody($event, idx)}}})],1),_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-subheader',{staticClass:\"pl-0\"},[_vm._v(\"No. Bars\")]),_c('v-slider',{attrs:{\"min\":\"0\",\"max\":\"16\",\"thumb-label\":\"\",\"thumb-size\":24},on:{\"change\":function($event){return _vm.changeBars($event, idx)}},model:{value:(_vm.lessons[idx].numberOfBars),callback:function ($$v) {_vm.$set(_vm.lessons[idx], \"numberOfBars\", $$v)},expression:\"lessons[idx].numberOfBars\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-subheader',{staticClass:\"pl-0\"},[_vm._v(\"BPM\")]),_c('v-slider',{attrs:{\"min\":\"60\",\"max\":\"120\",\"thumb-label\":\"\",\"thumb-size\":24},model:{value:(_vm.lessons[idx].bpm),callback:function ($$v) {_vm.$set(_vm.lessons[idx], \"bpm\", $$v)},expression:\"lessons[idx].bpm\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-select',{attrs:{\"items\":_vm.time_signatures,\"label\":\"Time Signature\"},on:{\"change\":function($event){return _vm.changeTimeSignature($event, idx)}},model:{value:(_vm.lessons[idx].timeSignature),callback:function ($$v) {_vm.$set(_vm.lessons[idx], \"timeSignature\", $$v)},expression:\"lessons[idx].timeSignature\"}})],1)],1)],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:((_vm.lessons[idx].scoreOption == 'xml' && _vm.lessons[idx].useScore)),expression:\"(lessons[idx].scoreOption == 'xml' && lessons[idx].useScore)\"}],attrs:{\"id\":\"optionxml\"}},[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-file-input',{attrs:{\"accept\":\"text/xml, .musicxml\",\"placeholder\":\"Music XML file\",\"prepend-icon\":\"mdi-file-document-outline\",\"label\":\"Upload musicxml file\"},model:{value:(_vm.lessons[idx].musicXml),callback:function ($$v) {_vm.$set(_vm.lessons[idx], \"musicXml\", $$v)},expression:\"lessons[idx].musicXml\"}})],1)],1),_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-subheader',{staticClass:\"pl-0\"},[_vm._v(\"BPM\")]),_c('v-slider',{attrs:{\"min\":\"60\",\"max\":\"120\",\"thumb-label\":\"\",\"thumb-size\":24},model:{value:(_vm.lessons[idx].bpm),callback:function ($$v) {_vm.$set(_vm.lessons[idx], \"bpm\", $$v)},expression:\"lessons[idx].bpm\"}})],1)],1)],1)],1)],1)}),_c('v-expansion-panel',{attrs:{\"readonly\":\"\"},on:{\"click\":_vm.newLesson}},[_c('v-expansion-panel-header',{staticClass:\"text-h5\",attrs:{\"disable-icon-rotate\":\"\"},scopedSlots:_vm._u([{key:\"actions\",fn:function(){return [_c('v-icon',[_vm._v(\"mdi-plus\")])]},proxy:true}])},[_vm._v(\"Add Lesson \")])],1)],2)],1)],1),_c('v-row',{staticClass:\"justify-center\"},[_c('v-col',{staticClass:\"text-center\"},[_c('v-btn',{attrs:{\"color\":\"indigo\",\"dark\":\"\"},on:{\"click\":_vm.goStepThree}},[_vm._v(\"Continue\")]),_c('v-btn',{attrs:{\"to\":\"/course/index\"}},[_vm._v(\"Cancel\")])],1)],1)],1),_c('v-stepper-content',{attrs:{\"step\":\"3\"}},[_c('v-row',{staticClass:\"justify-center\"},[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"11\"}},[_c('v-card',{staticClass:\"text-left mb-12\",attrs:{\"outlined\":\"\"}},[_c('v-card-title',{staticClass:\"display-1\"},[_vm._v(\"Course Info\"),_c('v-spacer'),_c('v-btn',{attrs:{\"outlined\":\"\",\"color\":\"indigo\",\"right\":\"\"},on:{\"click\":function($event){_vm.e1 = 1}}},[_c('v-icon',{attrs:{\"color\":\"indigo\"}},[_vm._v(\"mdi-pencil\")])],1)],1),_c('v-card-text',[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"4\"}},[_c('p',{staticClass:\"text-h6\"},[_vm._v(\"Title: \"+_vm._s(_vm.name))])]),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"4\"}},[_c('p',{staticClass:\"text-h6\"},[_vm._v(\"Price: \"+_vm._s(_vm.price))])]),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"4\"}},[_c('p',{staticClass:\"text-h6\"},[_vm._v(\"Language: \"+_vm._s(_vm.language))])])],1),_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('p',{staticClass:\"text-h6\"},[_vm._v(\"Description: \"+_vm._s(_vm.description))])])],1),_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"4\"}},[_c('p',{staticClass:\"text-h6\"},[_vm._v(\"Level: \"+_vm._s(_vm.level))])]),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"4\"}},[_c('p',{staticClass:\"text-h6\"},[_vm._v(\"Instrument: \"+_vm._s(_vm.instrument))])])],1)],1)],1)],1)],1),_c('v-row',{staticClass:\"justify-center mt-5\"},[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"11\"}},[_c('v-card',{staticClass:\"text-left mb-12\",attrs:{\"outlined\":\"\"}},[_c('v-card-title',{staticClass:\"display-1\"},[_vm._v(\"Lessons\"),_c('v-spacer'),_c('v-btn',{attrs:{\"outlined\":\"\",\"color\":\"indigo\",\"right\":\"\"},on:{\"click\":function($event){_vm.e1 = 2}}},[_c('v-icon',{attrs:{\"color\":\"indigo\"}},[_vm._v(\"mdi-pencil\")])],1)],1),_c('v-divider'),_vm._l((_vm.lessons),function(lesson,idx){return _c('v-card-text',[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"4\"}},[_c('p',{staticClass:\"text-h6\"},[_vm._v(\"Name: \"+_vm._s(lesson.name))])]),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"4\"}},[_c('p',{staticClass:\"text-h6\"},[_vm._v(\"Duration: \"+_vm._s(lesson.duration))])])],1),_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('p',{staticClass:\"text-h6\"},[_vm._v(\"Description: \"+_vm._s(lesson.description))])])],1),(lesson.video && lesson.videoPoster)?_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('p',{staticClass:\"text-h6\"},[_vm._v(\"Explanation Video: \"+_vm._s(lesson.video.name))])]),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('p',{staticClass:\"text-h6\"},[_vm._v(\"Video Poster: \"+_vm._s(lesson.videoPoster.name))])])],1):_vm._e(),(lesson.demo && lesson.demoPoster)?_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('p',{staticClass:\"text-h6\"},[_vm._v(\"Demo Video: \"+_vm._s(lesson.demo.name))])]),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('p',{staticClass:\"text-h6\"},[_vm._v(\"Demo Poster: \"+_vm._s(lesson.demoPoster.name))])])],1):_vm._e(),_c('v-row',{directives:[{name:\"show\",rawName:\"v-show\",value:(lesson.useScore && !lesson.useXml),expression:\"lesson.useScore && !lesson.useXml\"}]},[_c('v-col',[_c('div',{attrs:{\"id\":(\"vexflow-review-wrapper-\" + idx)}})])],1),_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"4\"}},[_c('p',{staticClass:\"text-h6\"},[_vm._v(\"BPM: \"+_vm._s(lesson.bpm))])]),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"4\"}},[_c('p',{staticClass:\"text-h6\"},[_vm._v(\"Number of Bars: \"+_vm._s(lesson.numberOfBars))])])],1)],1)})],2)],1)],1),_c('v-row',{staticClass:\"justify-center\"},[_c('v-col',[_c('v-btn',{attrs:{\"color\":\"indigo\",\"dark\":\"\",\"loading\":_vm.loading,\"disabled\":_vm.loading},on:{\"click\":_vm.submit}},[_vm._v(\"Confirm\")]),_c('v-btn',{attrs:{\"to\":\"/course/index\"}},[_vm._v(\"Cancel\")])],1)],1),_c('v-row',[_c('v-col',[_c('p',{staticClass:\"error\"},[_vm._v(_vm._s(_vm.error))])])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Api from '@/services/Api'\r\n\r\nexport default {\r\n  create (exerciseInfo) {\r\n    const instance = Api()\r\n    instance.defaults.headers.post['Content-Type'] = 'multipart/form-data'\r\n    return instance.post('exercise/new', exerciseInfo)\r\n  },\r\n\r\n  list (lessonId) {\r\n    return Api().get(`exercise/list?lid=${lessonId}`)\r\n  },\r\n\r\n  edit (exerciseInfo) {\r\n    const instance = Api()\r\n    instance.defaults.headers.post['Content-Type'] = 'multipart/form-data'\r\n    return instance.put('exercise/edit', exerciseInfo)\r\n  },\r\n\r\n  delete (exerciseId) {\r\n    return Api().delete(`exercise/del?eid=${exerciseId}`)\r\n  }\r\n}\r\n","<template lang=\"pug\">\r\n  #new-course\r\n    v-stepper(v-model='e1')\r\n      v-stepper-header\r\n        v-stepper-step(:complete='e1 > 1' step='1' color=\"indigo\") Course Details\r\n        v-divider\r\n        v-stepper-step(:complete='e1 > 2' step='2' color=\"indigo\") Plan the Lessons\r\n        v-divider\r\n        v-stepper-step(step='3' color=\"indigo\") Review and Confirm\r\n      v-stepper-items\r\n        v-stepper-content(step='1')\r\n          panel.mb-5(title=\"Basic Info\" md=\"10\")\r\n            v-card-text\r\n              v-form(ref=\"courseForm\")\r\n                v-row\r\n                  v-col(cols=\"12\" md=\"4\")\r\n                    v-text-field(label='Title*' name='title' type='text' v-model='name' :rules=\"nameRules\" solo clearable color=\"indigo\")\r\n                  v-col(cols=\"12\" md=\"4\")\r\n                    v-text-field(label='Price*' name='price' prepend-icon='mdi-currency-usd' v-model='price' :rules=\"priceRules\" solo clearable color=\"indigo\")\r\n                  v-col(cols=\"12\" md=\"4\")\r\n                    v-select(label='Language' :items=\"languages\" v-model=\"language\" solo)\r\n                v-row\r\n                  v-col(cols=\"12\")\r\n                    v-textarea(label=\"Description\" auto-grow solo v-model=\"description\")\r\n                v-row\r\n                  v-col(cols=\"12\" md=\"4\")\r\n                    v-select(label='Level' :items=\"levels\" v-model=\"level\" solo)\r\n                  v-col(cols=\"12\" md=\"4\")\r\n                    v-select(label='Instrument' :items=\"instruments\" v-model=\"instrument\" solo)\r\n          \r\n          v-row.justify-center\r\n            v-col\r\n              v-btn(color=\"indigo\" @click='goStepTwo' dark)\r\n                | Continue\r\n              v-btn(to=\"/course/index\") Cancel\r\n        v-stepper-content(step='2')\r\n          v-row.justify-center\r\n            v-col(cols=\"12\" md=\"11\")\r\n              v-expansion-panels.mb-5(multiple focusable v-model=\"lesson\")\r\n                v-expansion-panel(v-for='(lesson, idx) in lessons' :key='idx' @click=\"\")\r\n                  v-expansion-panel-header.text-h4 Lesson {{ idx + 1}}: {{ lesson.name }}\r\n                  v-expansion-panel-content.px-6\r\n                    v-form.mt-5(:ref=\"`lessonForm${idx}`\")\r\n                      v-row\r\n                        v-col(cols=\"12\" md=\"4\")\r\n                          v-text-field(label='Name' name='name' type='text' v-model='lessons[idx].name' :rules=\"requiredRules\" solo clearable color=\"indigo\" ) Title*\r\n                        v-col(cols=\"12\" md=\"4\")\r\n                          v-text-field(label='Duration in minutes' name='duration' v-model='lessons[idx].duration' :rules=\"durationRules\" solo clearable color=\"indigo\")\r\n                      v-row\r\n                        v-col(cols=\"12\")\r\n                          v-textarea(label=\"Description\" auto-grow v-model='lessons[idx].description')\r\n                      v-row\r\n                        v-col(cols=\"12\" md=\"6\")\r\n                          v-file-input(\r\n                            accept=\"video/mp4, video/ogg\" \r\n                            placeholder=\"Choose Explanation Video\" \r\n                            prepend-icon=\"mdi-video\" \r\n                            label=\"Explanation Video\"\r\n                            v-model=\"lessons[idx].video\")\r\n                        v-col(cols=\"12\" md=\"6\")\r\n                          v-file-input(\r\n                            accept=\"image/*\" \r\n                            placeholder=\"Choose coverpage for video\" \r\n                            prepend-icon=\"mdi-image\" \r\n                            label=\"Explanation Video Poster\"\r\n                            v-model=\"lessons[idx].videoPoster\")\r\n                      v-row\r\n                        v-col(cols=\"12\" md=\"6\")\r\n                          v-file-input(\r\n                            accept=\"video/mp4, video/ogg\" \r\n                            placeholder=\"Choose Explanation Video\" \r\n                            prepend-icon=\"mdi-video\"\r\n                            label=\"Demo Video\"\r\n                            v-model=\"lessons[idx].demo\")\r\n                        v-col(cols=\"12\" md=\"6\")\r\n                          v-file-input(\r\n                            accept=\"image/*\" \r\n                            placeholder=\"Choose coverpage for demo video\" \r\n                            prepend-icon=\"mdi-image\"\r\n                            label=\"Demo Video Poster\"\r\n                            v-model=\"lessons[idx].demoPoster\")\r\n                      v-row\r\n                        v-col(cols=\"12\" md=\"6\")\r\n                          v-switch(v-model=\"lessons[idx].useScore\" :label=\"`Overlay score on your demo video`\" @change=\"showVex($event, idx)\")\r\n                      v-row  \r\n                        v-col(cols=\"12\" md=\"6\" v-if=\"lessons[idx].useScore\")\r\n                          v-radio-group(v-model=\"lessons[idx].scoreOption\" :mandatory=\"true\")\r\n                            v-radio(label=\"Upload musicXML file\" value=\"xml\")\r\n                            v-radio(label=\"Design your own score\" value=\"vex\")\r\n                        v-col(cols=\"12\" md=\"6\" v-if=\"lessons[idx].useScore\")\r\n                          v-text-field(label='Demo Start Time' v-model='lessons[idx].demoStartTime' clearable color=\"indigo\" prepend-icon=\"mdi-alarm\" persistent-hint hint=\"At roughly which second did you start playing in demo video\" :rules=\"demoStartTimeRules\")\r\n                    \r\n                    div#optionvex(v-show=\"(lessons[idx].scoreOption == 'vex' && lessons[idx].useScore)\")\r\n                      v-row\r\n                        v-col(:id=\"`pannel-content-${idx}`\" @click=\"changeMelody($event, idx)\")\r\n                      v-row\r\n                        v-col(cols=\"12\" md=\"6\")\r\n                          v-subheader.pl-0 No. Bars\r\n                          v-slider(v-model='lessons[idx].numberOfBars' min='0' max='16' thumb-label :thumb-size=\"24\" @change=\"changeBars($event, idx)\")\r\n                        v-col(cols=\"12\" md=\"6\")\r\n                          v-subheader.pl-0 BPM\r\n                          v-slider(v-model='lessons[idx].bpm' min='60' max='120' thumb-label :thumb-size=\"24\")\r\n                        v-col(cols=\"12\" md=\"6\")\r\n                          v-select(:items=\"time_signatures\" v-model=\"lessons[idx].timeSignature\" label='Time Signature' @change=\"changeTimeSignature($event, idx)\")\r\n                    div#optionxml(v-show=\"(lessons[idx].scoreOption == 'xml' && lessons[idx].useScore)\")\r\n                      v-row\r\n                        v-col(cols=\"12\" md=\"6\")\r\n                          v-file-input(\r\n                            accept=\"text/xml, .musicxml\" \r\n                            placeholder=\"Music XML file\" \r\n                            prepend-icon=\"mdi-file-document-outline\"\r\n                            label=\"Upload musicxml file\"\r\n                            v-model=\"lessons[idx].musicXml\")\r\n                      v-row\r\n                        v-col(cols=\"12\" md=\"6\")\r\n                          v-subheader.pl-0 BPM\r\n                          v-slider(v-model='lessons[idx].bpm' min='60' max='120' thumb-label :thumb-size=\"24\")\r\n\r\n\r\n                v-expansion-panel(@click=\"newLesson\" readonly)\r\n                  v-expansion-panel-header.text-h5(disable-icon-rotate) Add Lesson \r\n                    template(v-slot:actions)\r\n                      v-icon mdi-plus\r\n\r\n          v-row.justify-center\r\n            v-col.text-center\r\n              v-btn(color=\"indigo\" @click='goStepThree' dark)\r\n                | Continue\r\n              v-btn(to=\"/course/index\") Cancel\r\n        v-stepper-content(step='3')\r\n          v-row.justify-center\r\n            v-col(cols=\"12\" md=\"11\")\r\n              v-card.text-left(outlined).mb-12\r\n                v-card-title.display-1 Course Info\r\n                  v-spacer\r\n                  v-btn(outlined color='indigo' right @click='e1 = 1')\r\n                    v-icon(color=\"indigo\") mdi-pencil\r\n                v-card-text\r\n                  v-row\r\n                    v-col(cols=\"12\" md=\"4\")\r\n                      p.text-h6 Title: {{ name }}\r\n                    v-col(cols=\"12\" md=\"4\")\r\n                      p.text-h6 Price: {{ price}}\r\n                    v-col(cols=\"12\" md=\"4\")\r\n                      p.text-h6 Language: {{ language }}\r\n                  v-row\r\n                    v-col(cols=\"12\")\r\n                      p.text-h6 Description: {{ description }}\r\n                  v-row\r\n                    v-col(cols=\"12\" md=\"4\")\r\n                      p.text-h6 Level: {{ level }}\r\n                    v-col(cols=\"12\" md=\"4\")\r\n                      p.text-h6 Instrument: {{ instrument }}\r\n          \r\n          v-row.justify-center.mt-5\r\n            v-col(cols=\"12\" md=\"11\")\r\n              v-card.text-left(outlined).mb-12\r\n                v-card-title.display-1 Lessons\r\n                  v-spacer\r\n                  v-btn(outlined color='indigo' right @click='e1 = 2')\r\n                    v-icon(color=\"indigo\") mdi-pencil\r\n                v-divider\r\n                v-card-text(v-for=\"(lesson, idx) in lessons\")\r\n                  v-row\r\n                    v-col(cols=\"12\" md=\"4\")\r\n                      p.text-h6 Name: {{ lesson.name }}\r\n                    v-col(cols=\"12\" md=\"4\")\r\n                      p.text-h6 Duration: {{ lesson.duration }}\r\n                  v-row\r\n                    v-col(cols=\"12\")\r\n                      p.text-h6 Description: {{ lesson.description }}\r\n                  v-row(v-if=\"lesson.video && lesson.videoPoster\")\r\n                    v-col(cols=\"12\" md=\"6\")\r\n                      p.text-h6 Explanation Video: {{ lesson.video.name }}\r\n                    v-col(cols=\"12\" md=\"6\")\r\n                      p.text-h6 Video Poster: {{ lesson.videoPoster.name }}\r\n                  v-row(v-if=\"lesson.demo && lesson.demoPoster\")\r\n                    v-col(cols=\"12\" md=\"6\")\r\n                      p.text-h6 Demo Video: {{ lesson.demo.name }}\r\n                    v-col(cols=\"12\" md=\"6\")\r\n                      p.text-h6 Demo Poster: {{ lesson.demoPoster.name }}\r\n                  v-row(v-show=\"lesson.useScore && !lesson.useXml\")\r\n                    v-col\r\n                      div(:id=\"`vexflow-review-wrapper-${idx}`\")\r\n                  v-row\r\n                    v-col(cols=\"12\" md=\"4\")\r\n                      p.text-h6 BPM: {{ lesson.bpm }}\r\n                    v-col(cols=\"12\" md=\"4\")\r\n                      p.text-h6 Number of Bars: {{ lesson.numberOfBars }}\r\n\r\n          v-row.justify-center\r\n            v-col\r\n              v-btn(color=\"indigo\" @click=\"submit\" dark :loading=\"loading\" :disabled=\"loading\")\r\n                | Confirm\r\n              v-btn(to=\"/course/index\") Cancel\r\n          v-row\r\n            v-col\r\n              p.error {{ error }}\r\n\r\n</template>\r\n\r\n<script>\r\nimport Panel from '@/components/Panel'\r\nimport CourseService from '@/services/CourseService'\r\nimport LessonService from '@/services/LessonService'\r\nimport ExerciseService from '@/services/ExerciseService'\r\nimport vexUI from \"@/plugins/vex\"\r\nimport {mapState} from \"vuex\"\r\n\r\nexport default {\r\n  name: 'NewCourse',\r\n  components: {\r\n    'panel': Panel\r\n  },\r\n  data () {\r\n    return {\r\n      e1: 1,\r\n      name: '',\r\n      nameRules: [\r\n        v => !!v || 'Title is required',\r\n      ],\r\n      error: null,\r\n      loading: false,\r\n      price: '',\r\n      priceRules: [\r\n        v => !!v || \"Price is required\",\r\n        v => new RegExp(/^\\d+(?:\\.\\d{0,2})$/).test(v) || \"Price must be a number with maximum 2 decimal places\"\r\n      ],\r\n      description: '',\r\n      language: '',\r\n      languages: ['English', 'Chinese'],\r\n      level: '',\r\n      levels: ['Beginner', 'Intermediate', 'Advanced'],\r\n      instrument: '',\r\n      instruments: ['Piano', 'Guitar', 'Drum Set', 'Er Hu', 'Yang Qin', 'French Horn'],\r\n      lesson: [0],\r\n      lessons: [{\r\n        name: '',\r\n        duration: '',\r\n        description: '',\r\n        video: null,\r\n        videoPoster: null,\r\n        demo: null,\r\n        demoPoster: null,\r\n        useScore: true,\r\n        handler: null,\r\n        timeSignature: '4/4',\r\n        bpm: 60,\r\n        numberOfBars: 4,\r\n        melody: [],\r\n        demoStartTime: \"0\",\r\n        scoreOption: 'vex',\r\n        musicXml: null\r\n      }],\r\n      durationRules: [\r\n        v => !!v || \"Duration is required\",\r\n        v => new RegExp(/^\\d+$/).test(v) || \"Please input numbers only\"\r\n      ],\r\n      demoStartTimeRules: [\r\n        v => !!v || \"Demo Start Time is required\",\r\n        v => new RegExp(/^\\d+$/).test(v) || \"Please input numbers only\"\r\n      ],\r\n      requiredRules: [\r\n        v => !!v || \"This field is required\"\r\n      ],\r\n      reviewVexHandlers: [],\r\n      time_signatures: [\"4/4\", \"3/4\", \"2/4\", \"3/8\", \"6/8\"]\r\n    }\r\n  },\r\n\r\n  computed: mapState(['user']),\r\n\r\n  watch: {\r\n    e1: function (val) {\r\n      if (val == 2 && this.lessons[0].handler == null) {\r\n        var div = document.createElement(\"div\")\r\n        div.id = `vexflow-wrapper-0`\r\n        var pannel = document.getElementById(`pannel-content-0`)\r\n        pannel.appendChild(div)\r\n        this.lessons[0].handler = new vexUI.Handler(div.id, {\r\n          canvasProperties: {\r\n            id: div.id + '-canvas',\r\n            width: window.innerWidth * 5 / 6,\r\n            tabindex: 1\r\n          }\r\n        }).init();\r\n      } else if (val == 3) {\r\n        if (this.reviewVexHandlers.length == 0) {\r\n          // first time coming\r\n          for (var i = 0; i < this.lessons.length; i++) {\r\n            const handler = new vexUI.Handler(`vexflow-review-wrapper-${i}`, {\r\n              canEdit: false,\r\n              numberOfStaves: this.lessons[i].numberOfBars,\r\n              canvasProperties: {\r\n                id: `vexflow-review-wrapper-${i}` + '-canvas',\r\n                width: window.innerWidth * 5 / 6,\r\n                tabindex: 1\r\n              }\r\n            }).init();\r\n            handler.setTimeSignature(this.lessons[i].timeSignature)\r\n            if (this.lessons[i].melody.length > 0) {\r\n              handler.importNotes(this.lessons[i].melody, this.lessons[i].timeSignature)\r\n            }\r\n            this.reviewVexHandlers.push(handler)\r\n            if (!this.lessons[i].useScore)\r\n              document.getElementById(`vexflow-review-wrapper-${i}`).classList.add(\"hide\")\r\n          }\r\n        } else {\r\n          for (var j = 0; j < this.lessons.length; j++) {\r\n            this.reviewVexHandlers[j].setTimeSignature(this.lessons[j].timeSignature)\r\n            this.reviewVexHandlers[j].importNotes(this.lessons[j].melody, this.lessons[j].timeSignature)\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    goStepTwo () {\r\n      if (this.$refs.courseForm.validate()) {\r\n        this.e1 = 2\r\n      }\r\n    },\r\n\r\n    goStepThree () {\r\n      for (var i = 0; i < this.lessons.length; i++) {\r\n        if (!this.$refs[`lessonForm${i}`][0].validate()) {\r\n          alert('Please fill in name, duration and demo start time for all lessons')\r\n          return\r\n        }\r\n      }\r\n      for (var j = 0; j< this.lessons.length; j++) {\r\n        if (this.lessons[j].useScore && this.lessons[j].scoreOption == 'vex' && this.lessons[j].melody.length == 0 && this.lessons[j].useScore && this.lessons[j].numberOfBars != 0) {\r\n          alert('Please input some notes or choose not to overlay score')\r\n          return\r\n        }\r\n      }\r\n      this.e1 = 3\r\n    },\r\n\r\n    go_to_courses () {\r\n      this.$router.push(`/course/index/${this.$store.state.user.id}`)\r\n    },\r\n\r\n    async submit () {\r\n      this.loading = true\r\n      this.error = ''\r\n      try {  \r\n        // create course\r\n        const courseResponse = await CourseService.create({\r\n          name: this.name,\r\n          description: this.description, \r\n          langauge: this.langauge, \r\n          level: this.level, \r\n          instrument: this.instrument,\r\n          price: Number(this.price),\r\n          TutorId: this.user.id,\r\n        })\r\n\r\n        await this.$store.dispatch('addCourse', courseResponse.data.course)\r\n\r\n        // create lessons\r\n        for (var i = 0; i < this.lessons.length; i++) {\r\n          var lessonResponse = await LessonService.create({\r\n            name: this.lessons[i].name,\r\n            duration: Number(this.lessons[i].duration),\r\n            description: this.lessons[i].description,\r\n            cid: courseResponse.data.course.id\r\n          })\r\n\r\n          await this.$store.dispatch('addLesson', lessonResponse.data.lesson)\r\n\r\n          // create exercise that belongs to lessons\r\n          var tempLesson = this.lessons[i]\r\n          var formData = new FormData()\r\n          formData.set('name', '')\r\n          formData.set('melody', tempLesson.melody.join('-'))\r\n          formData.set('timeSignature', tempLesson.timeSignature)\r\n          formData.set('bpm', tempLesson.bpm)\r\n          formData.set('lid', lessonResponse.data.lesson.id)\r\n          formData.set('numberOfBars', tempLesson.numberOfBars)\r\n          formData.set('demoStartTime', parseInt(tempLesson.demoStartTime))\r\n          formData.set('useScore', tempLesson.useScore)\r\n          if (tempLesson.useScore) {\r\n            if (tempLesson.scoreOption == 'vex') {\r\n              formData.set('useXml', false)\r\n            } else {\r\n              formData.set('useXml', true)\r\n            }\r\n          }\r\n          if (tempLesson.video) {\r\n            formData.append('video', tempLesson.video)\r\n          }\r\n          if (tempLesson.videoPoster) {\r\n            formData.append('videoPoster', tempLesson.videoPoster)\r\n          }\r\n          if (tempLesson.demo) {\r\n            formData.append('demo', tempLesson.demo)\r\n          }\r\n          if (tempLesson.demoPoster) {\r\n            formData.append('demoPoster', tempLesson.demoPoster)\r\n          }\r\n          if (tempLesson.musicXml) {\r\n            formData.append('musicXml', tempLesson.musicXml)\r\n          }\r\n\r\n          var exerciseResponse = await ExerciseService.create(formData)\r\n\r\n          await this.$store.dispatch('addExercise', {\r\n            exercise: exerciseResponse.data.exercise,\r\n            CourseId: courseResponse.data.course.id\r\n          })\r\n        }\r\n\r\n        this.$router.push(`/course/show/${courseResponse.data.course.id}`)\r\n      } catch (err) {\r\n        this.error = err.response.data.error\r\n      }\r\n    },\r\n\r\n    newLesson () {\r\n      this.lessons.push({\r\n        name: '',\r\n        duration: '',\r\n        description: '',\r\n        video: null,\r\n        demoVideo: null,\r\n        useScore: false,\r\n        handler: null,\r\n        timeSignature: '4/4',\r\n        bpm: 60,\r\n        numberOfBars: 4,\r\n        melody: [],\r\n        demoStartTime: \"0\"\r\n      })\r\n      this.lesson.push(this.lessons.length)\r\n    },\r\n\r\n    showVex (event, idx) {\r\n      if (this.lessons[idx].handler == null) {\r\n        var div = document.createElement(\"div\")\r\n        div.id = `vexflow-wrapper-${idx}`\r\n        var pannel = document.getElementById(`pannel-content-${idx}`)\r\n        pannel.appendChild(div)\r\n        this.lessons[idx].handler = new vexUI.Handler(div.id, {\r\n          canvasProperties: {\r\n            id: div.id + '-canvas',\r\n            width: window.innerWidth * 5 / 6,\r\n            tabindex: 1\r\n          }\r\n        }).init();\r\n      }\r\n    },\r\n\r\n    changeTimeSignature (event, idx) {\r\n      this.lessons[idx].handler.setTimeSignature(this.lessons[idx].timeSignature)\r\n    },\r\n\r\n    changeBars (event, idx) {\r\n      this.lessons[idx].handler.changeNumberOfBars(this.lessons[idx].numberOfBars, this.lessons[idx].handler.exportNotes())\r\n    },\r\n\r\n    changeMelody (event, idx) {\r\n      this.lessons[idx].melody = this.lessons[idx].handler.exportNotes()\r\n    }\r\n  },\r\n\r\n  mounted: function () {\r\n  }\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n.hide {\r\n  display: none;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewCourse.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewCourse.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NewCourse.vue?vue&type=template&id=706d71d0&scoped=true&lang=pug&\"\nimport script from \"./NewCourse.vue?vue&type=script&lang=js&\"\nexport * from \"./NewCourse.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NewCourse.vue?vue&type=style&index=0&id=706d71d0&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"706d71d0\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VExpansionPanel } from 'vuetify/lib/components/VExpansionPanel';\nimport { VExpansionPanelContent } from 'vuetify/lib/components/VExpansionPanel';\nimport { VExpansionPanelHeader } from 'vuetify/lib/components/VExpansionPanel';\nimport { VExpansionPanels } from 'vuetify/lib/components/VExpansionPanel';\nimport { VFileInput } from 'vuetify/lib/components/VFileInput';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VRadio } from 'vuetify/lib/components/VRadioGroup';\nimport { VRadioGroup } from 'vuetify/lib/components/VRadioGroup';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VSlider } from 'vuetify/lib/components/VSlider';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VStepper } from 'vuetify/lib/components/VStepper';\nimport { VStepperContent } from 'vuetify/lib/components/VStepper';\nimport { VStepperHeader } from 'vuetify/lib/components/VStepper';\nimport { VStepperItems } from 'vuetify/lib/components/VStepper';\nimport { VStepperStep } from 'vuetify/lib/components/VStepper';\nimport { VSubheader } from 'vuetify/lib/components/VSubheader';\nimport { VSwitch } from 'vuetify/lib/components/VSwitch';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VTextarea } from 'vuetify/lib/components/VTextarea';\ninstallComponents(component, {VBtn,VCard,VCardText,VCardTitle,VCol,VDivider,VExpansionPanel,VExpansionPanelContent,VExpansionPanelHeader,VExpansionPanels,VFileInput,VForm,VIcon,VRadio,VRadioGroup,VRow,VSelect,VSlider,VSpacer,VStepper,VStepperContent,VStepperHeader,VStepperItems,VStepperStep,VSubheader,VSwitch,VTextField,VTextarea})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"student\"}},[_c('panel',{attrs:{\"title\":\"Tutors\"}},[_c('v-list',_vm._l((_vm.allTutors),function(tutor){return _c('v-list-item',{key:tutor.id},[_c('v-list-item-icon',[(!(_vm.subscribedTutorsId.includes(tutor.id)))?_c('v-btn',{attrs:{\"dark\":\"\",\"color\":\"#ec5252\"},on:{\"click\":function($event){return _vm.subscribe($event, tutor)}}},[_vm._v(\"Subscribe\")]):_c('v-btn',{attrs:{\"dark\":\"\",\"color\":\"grey darken-2\",\"disable\":\"\"},on:{\"click\":function($event){}}},[_vm._v(\"Subscribed\")])],1),_c('v-list-item-content',[_c('v-list-item-title',{staticClass:\"mr-5\",domProps:{\"textContent\":_vm._s(tutor.username)}})],1),_c('v-list-item-avatar',[_c('v-img',{attrs:{\"src\":_vm.avatar}})],1)],1)}),1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\r\n  #student\r\n    panel(title=\"Tutors\")\r\n      v-list\r\n        v-list-item(v-for='tutor in allTutors' :key='tutor.id')\r\n          v-list-item-icon\r\n            v-btn(@click=\"subscribe($event, tutor)\" dark color=\"#ec5252\" v-if=\"!(subscribedTutorsId.includes(tutor.id))\") Subscribe\r\n            v-btn(@click=\"\" dark color=\"grey darken-2\" v-else disable) Subscribed\r\n          v-list-item-content\r\n            v-list-item-title.mr-5(v-text='tutor.username')\r\n          v-list-item-avatar\r\n            v-img(:src='avatar')\r\n</template>\r\n\r\n<script>\r\nimport Panel from '@/components/Panel'\r\nimport { mapState } from 'vuex'\r\n\r\nexport default {\r\n  name: 'Student',\r\n  data () {\r\n    return {\r\n      avatar: 'https://cdn.vuetifyjs.com/images/lists/2.jpg'\r\n    }\r\n  },\r\n  components: {\r\n    'panel': Panel\r\n  },\r\n  computed: {\r\n    subscribedTutorsId () {\r\n      return this.allTutors.map(tutor => tutor.id)\r\n    },\r\n\r\n    ...mapState(['user', 'allTutors'])\r\n  },\r\n  methods: {\r\n    async subscribe (event, tutor) {\r\n      await this.$store.dispatch('subscribe', {\r\n        studentId: this.user.id,\r\n        tutorId: tutor.id\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TutorIndex.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TutorIndex.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TutorIndex.vue?vue&type=template&id=aa04a6a6&scoped=true&lang=pug&\"\nimport script from \"./TutorIndex.vue?vue&type=script&lang=js&\"\nexport * from \"./TutorIndex.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"aa04a6a6\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAvatar } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemIcon } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\ninstallComponents(component, {VBtn,VImg,VList,VListItem,VListItemAvatar,VListItemContent,VListItemIcon,VListItemTitle})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-row',{staticClass:\"justify-center\"},[_c('v-col',{staticClass:\"text-center\",attrs:{\"cols\":\"10\"}},[_c('video',{ref:\"videoPlayer\",staticClass:\"video-js\"}),_c('div',{attrs:{\"id\":\"vexflow-wrapper\"}})])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\r\n  div \r\n    v-row.justify-center\r\n      v-col(cols=\"10\").text-center\r\n        video(ref=\"videoPlayer\" class=\"video-js\")\r\n        #vexflow-wrapper\r\n</template>\r\n\r\n<script>\r\nimport videojs from 'video.js';\r\nimport vexUI from \"@/plugins/vex\";\r\n\r\nexport default {\r\nname: \"VideoPlayer\",\r\n    data() {\r\n      return {\r\n        options: {\r\n          controls: true,\r\n          fluid: true,\r\n          sources: [\r\n            {\r\n              src: \"http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4\",\r\n              type: \"video/mp4\"\r\n            }\r\n          ],\r\n          poster: 'https://rhythm-academy.s3-ap-southeast-1.amazonaws.com/demoPoster.JPG'\r\n        },\r\n        handler: null,\r\n        hide: true\r\n      }\r\n    },\r\n    mounted() {\r\n      this.player = videojs(this.$refs.videoPlayer, this.options, function onPlayerReady() {\r\n          console.log('Player ready');\r\n      });\r\n\r\n      this.handler = new vexUI.Handler(\"vexflow-wrapper\", {\r\n        canEdit: false,\r\n        numberOfStaves: 2,\r\n        canvasProperties: {\r\n          id: \"vexflow-wrapper\" + \"-canvas\",\r\n          width: document.getElementById(\"vjs_video_3\").offsetWidth,\r\n          height: 80 * vexUI.scale,\r\n          tabindex: 1\r\n        }\r\n      }).init();\r\n\r\n      this.player.on('fullscreenchange', () => {\r\n        if (this.player.isFullscreen_) {\r\n          this.hide = false;\r\n        } else {\r\n          this.hide = true;\r\n        }\r\n      })\r\n\r\n      document.getElementById(\"vjs_video_3\").appendChild(document.getElementById(\"vexflow-wrapper\"))\r\n    },\r\n\r\n    beforeDestroy() {\r\n      if (this.player) {\r\n          this.player.dispose()\r\n      }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#vexflow-wrapper {\r\n  position: absolute;\r\n  background-color: #FAFAFA;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Video.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Video.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Video.vue?vue&type=template&id=0d1a27ee&scoped=true&lang=pug&\"\nimport script from \"./Video.vue?vue&type=script&lang=js&\"\nexport * from \"./Video.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Video.vue?vue&type=style&index=0&id=0d1a27ee&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0d1a27ee\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VCol,VRow})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mt-5\",attrs:{\"id\":\"student\"}},[(_vm.user.isTutor)?_c('panel',{attrs:{\"title\":\"My Courses\"}},[_c('v-list',_vm._l((_vm.userOwnedCourses),function(course,idx){return _c('v-list-item',{key:course.id,on:{\"click\":function($event){return _vm.goToThread($event, course)}}},[_c('v-list-item-content',[_c('v-list-item-title',{staticClass:\"text-h5 py-0\",domProps:{\"textContent\":_vm._s(course.name)}})],1),_c('v-list-item-icon',[_c('div',{staticClass:\"notification\"},[_c('p',{staticClass:\"pa-0 mx-auto\"},[_vm._v(_vm._s(course.unreadStudentPost))])])])],1)}),1)],1):_c('panel',{attrs:{\"title\":\"Subscribed Courses\"}},[_c('v-list',_vm._l((_vm.userSubscribedCourses),function(course,idx){return _c('v-list-item',{key:course.id,on:{\"click\":function($event){return _vm.showThread($event, course)}}},[_c('v-list-item-content',[_c('v-list-item-title',{staticClass:\"text-h5 py-0\",domProps:{\"textContent\":_vm._s(course.name)}})],1),_c('v-list-item-icon',[_c('div',{staticClass:\"notification\"},[_c('p',{staticClass:\"pa-0 mx-auto\"},[_vm._v(_vm._s(course.unreadTutorPost))])])])],1)}),1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\r\n  #student.mt-5\r\n    panel(title=\"My Courses\" v-if=\"user.isTutor\")\r\n      v-list\r\n        v-list-item(v-for='(course, idx) in userOwnedCourses' :key='course.id' @click=\"goToThread($event, course)\")\r\n          //- v-list-item-icon\r\n          //-   v-icon(v-if='rhythm.icon' color='pink') mdi-star\r\n          v-list-item-content\r\n            v-list-item-title.text-h5.py-0(v-text='course.name')\r\n          v-list-item-icon\r\n            .notification \r\n              p.pa-0.mx-auto {{ course.unreadStudentPost }}\r\n    panel(title=\"Subscribed Courses\" v-else)\r\n      v-list\r\n        v-list-item(v-for='(course, idx) in userSubscribedCourses' :key='course.id' @click=\"showThread($event, course)\")\r\n          v-list-item-content\r\n            v-list-item-title.text-h5.py-0(v-text='course.name')\r\n          v-list-item-icon\r\n            .notification \r\n              p.pa-0.mx-auto {{ course.unreadTutorPost }}\r\n</template>\r\n\r\n<script>\r\nimport Panel from '@/components/Panel'\r\nimport { mapState } from 'vuex'\r\nimport SubscriptionService from '@/services/SubscriptionService'\r\nimport CourseService from '@/services/CourseService'\r\n\r\nexport default {\r\n  name: 'CoursesThreadsIndex',\r\n  data () {\r\n    return {\r\n      avatar: 'https://cdn.vuetifyjs.com/images/lists/2.jpg',\r\n      threads: [],\r\n      userOwnedCourses: [],\r\n      userSubscribedCourses: []\r\n    }\r\n  },\r\n\r\n  components: {\r\n    'panel': Panel\r\n  },\r\n\r\n  computed: mapState(['user']),\r\n\r\n  methods: {\r\n    goToThread (event, course) {\r\n      this.$router.push(`/course/threads/index/${course.id}`)\r\n    },\r\n\r\n    showThread (event, course) {\r\n      this.$router.push({\r\n        name: `showthread`,\r\n        params: {\r\n          course_id: course.id,\r\n          student_id: this.user.id\r\n        }\r\n      })\r\n    }\r\n  },\r\n\r\n  mounted: async function () {\r\n    if (this.user.isStudent) {\r\n      const studentResponse = await SubscriptionService.getSubscriptionInfoOfStudent(this.user.id);\r\n      this.userSubscribedCourses = studentResponse.data.courses\r\n    } else {\r\n      const response = await CourseService.list(this.user.id);\r\n      this.userOwnedCourses = response.data.courses\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n.notification {\r\n  width: 28px;\r\n  height: 28px;\r\n  border-radius: 50%;\r\n  font-size: 16px;\r\n  line-height: 1.8rem;\r\n  color: white;\r\n  background: #C62828;\r\n  text-align: center;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CoursesThreadsIndex.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CoursesThreadsIndex.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CoursesThreadsIndex.vue?vue&type=template&id=6558bc50&scoped=true&lang=pug&\"\nimport script from \"./CoursesThreadsIndex.vue?vue&type=script&lang=js&\"\nexport * from \"./CoursesThreadsIndex.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CoursesThreadsIndex.vue?vue&type=style&index=0&id=6558bc50&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6558bc50\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemIcon } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\ninstallComponents(component, {VList,VListItem,VListItemContent,VListItemIcon,VListItemTitle})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"student\"}},[_c('panel',{attrs:{\"title\":\"All Courses\"}},[_c('v-list',_vm._l((_vm.students),function(student,idx){return _c('v-list-item',{key:student.id,on:{\"click\":function($event){return _vm.showThread($event, student)}}},[_c('v-list-item-avatar',[_c('v-img',{attrs:{\"src\":_vm.avatar}})],1),_c('v-list-item-content',[_c('v-list-item-title',{domProps:{\"textContent\":_vm._s(student.username)}})],1),_c('v-list-item-icon',[_c('div',{staticClass:\"notification\"},[_c('p',{staticClass:\"pa-0 mx-auto\"},[_vm._v(_vm._s(_vm.unreads[idx]))])])])],1)}),1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\r\n  #student\r\n    panel(title=\"All Courses\")\r\n      v-list\r\n        v-list-item(v-for='(student, idx) in students' :key='student.id' @click=\"showThread($event, student)\")\r\n          //- v-list-item-icon\r\n          //-   v-icon(v-if='rhythm.icon' color='pink') mdi-star\r\n          v-list-item-avatar\r\n            v-img(:src='avatar')\r\n          v-list-item-content\r\n            v-list-item-title(v-text='student.username')\r\n          v-list-item-icon\r\n            .notification \r\n              p.pa-0.mx-auto {{ unreads[idx] }}\r\n</template>\r\n\r\n<script>\r\nimport Panel from '@/components/Panel'\r\nimport { mapState } from 'vuex'\r\nimport SubscriptionService from '@/services/SubscriptionService'\r\nimport ThreadService from '@/services/ThreadService'\r\n\r\nexport default {\r\n  name: 'CourseThreadsIndex',\r\n  data () {\r\n    return {\r\n      avatar: 'https://cdn.vuetifyjs.com/images/lists/2.jpg',\r\n      students: [],\r\n      unreads: []\r\n    }\r\n  },\r\n\r\n  components: {\r\n    'panel': Panel\r\n  },\r\n\r\n  computed: {\r\n    ...mapState(['user', 'userOwnedCourses'])\r\n  },\r\n\r\n  methods: {\r\n    showThread (event, student) {\r\n      this.$router.push({\r\n        name: `showthread`,\r\n        params: {\r\n          course_id: this.$route.params.course_id,\r\n          student_id: student.id\r\n        }\r\n      })\r\n    }\r\n  },\r\n\r\n  mounted: async function () {\r\n    const response = await SubscriptionService.getSubscriptionInfoOfCourse(this.$route.params.course_id)\r\n    this.students = response.data.students\r\n    for (var i = 0; i < this.students.length; i++) {\r\n      const unreadResponse = await ThreadService.getUnread(this.$route.params.course_id, this.students[i].id)\r\n      this.unreads.push(unreadResponse.data.unread)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n.notification {\r\n  width: 28px;\r\n  height: 28px;\r\n  border-radius: 50%;\r\n  font-size: 16px;\r\n  line-height: 1.8rem;\r\n  color: white;\r\n  background: #C62828;\r\n  text-align: center;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CourseThreadsIndex.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CourseThreadsIndex.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CourseThreadsIndex.vue?vue&type=template&id=5943e257&scoped=true&lang=pug&\"\nimport script from \"./CourseThreadsIndex.vue?vue&type=script&lang=js&\"\nexport * from \"./CourseThreadsIndex.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CourseThreadsIndex.vue?vue&type=style&index=0&id=5943e257&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5943e257\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAvatar } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemIcon } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\ninstallComponents(component, {VImg,VList,VListItem,VListItemAvatar,VListItemContent,VListItemIcon,VListItemTitle})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.course)?_c('div',{attrs:{\"id\":\"student\"}},[_c('v-container',[_c('h1',[_vm._v(_vm._s(_vm.course.name))]),_c('v-row',[_c('v-col',[_c('v-expansion-panels',{staticClass:\"elevation-2\",attrs:{\"hover\":\"\",\"multiple\":\"\"},model:{value:(_vm.currentThread),callback:function ($$v) {_vm.currentThread=$$v},expression:\"currentThread\"}},_vm._l((_vm.threads),function(thread,i){return _c('v-expansion-panel',{key:thread.id},[_c('v-expansion-panel-header',{staticClass:\"font-weight-bold\",staticStyle:{\"font-size\":\"18px\"}},[_vm._v(_vm._s(_vm.course.lessons[i].name))]),_c('v-expansion-panel-content',{staticClass:\"px-6\"},[(thread.posts)?_c('v-list',_vm._l((thread.posts),function(post,idx){return _c('v-list-item',{key:post.id},[_c('v-list-item-content',{staticClass:\"pb-0\"},[_c('v-container',{staticClass:\"pt-0 pb-4 px-0\",attrs:{\"fluid\":\"\"}},[(idx == 0 || post.updatedAt.substring(0, 10) != thread.posts[idx - 1].updatedAt.substring(0, 10))?_c('v-row',{staticClass:\"py-0\"},[_c('v-col',{staticClass:\"py-0\"},[_c('v-chip',{staticStyle:{\"font-size\":\"12px\"},attrs:{\"label\":\"\",\"color\":\"indigo darken-3\",\"dark\":\"\"}},[_vm._v(_vm._s(new Date(post.updatedAt).toLocaleString([], { year: 'numeric', month: 'numeric', day:'numeric'})))])],1)],1):_vm._e(),_c('v-row',{staticClass:\"mt-5\"},[_c('v-col',{staticClass:\"pb-0\",staticStyle:{\"margin-bottom\":\"-3px\"}},[_c('video',{attrs:{\"width\":\"100%\",\"height\":\"audo\",\"controls\":\"\"}},[_c('source',{attrs:{\"src\":post.videoUrl,\"type\":\"video/mp4\"}}),_vm._v(\"Your browser does not support HTML video.\")])])],1),(post.UserId != _vm.user.id)?_c('v-row',{staticClass:\"justify-end bottom-border mx-0 py-3\"},[_c('v-col',{staticClass:\"pr-8 py-0\",attrs:{\"cols\":\"6\"}},[_c('div',{staticClass:\"speech-bubble-other\"},[_c('v-row',{staticClass:\"ma-0\",staticStyle:{\"width\":\"100%\"}},[_c('v-col',{staticClass:\"text-left\"},[_c('div',[_vm._v(_vm._s(post.message))])])],1),_c('div',{staticClass:\"timestamp\"},[_vm._v(_vm._s(new Date(post.updatedAt).toLocaleString([], { hour: '2-digit', minute:'2-digit'})))])],1)]),_c('v-col',{staticClass:\"pa-0\",attrs:{\"cols\":\"1\"}},[_c('v-avatar',{attrs:{\"color\":\"indigo\",\"size\":\"40\"}},[_c('v-img',{attrs:{\"src\":_vm.avatar}})],1)],1)],1):_c('v-row',{staticClass:\"justify-start bottom-border mx-0 py-3\"},[_c('v-col',{staticClass:\"pa-0\",attrs:{\"cols\":\"1\"}},[_c('v-avatar',{attrs:{\"color\":\"indigo\",\"size\":\"40\"}},[_c('v-img',{attrs:{\"src\":_vm.avatar}})],1)],1),_c('v-col',{staticClass:\"pl-8 py-0\",attrs:{\"cols\":\"6\"}},[_c('div',{staticClass:\"speech-bubble-self\"},[_c('v-row',{staticClass:\"ma-0\",staticStyle:{\"width\":\"100%\"}},[_c('v-col',{staticClass:\"text-left\"},[_c('div',[_vm._v(_vm._s(post.message))])])],1),_c('div',{staticClass:\"timestamp\"},[_vm._v(_vm._s(new Date(post.updatedAt).toLocaleString([], { hour: '2-digit', minute:'2-digit'})))])],1)])],1)],1)],1)],1)}),1):_vm._e(),_c('v-row',{staticClass:\"justify-center\"},[_c('v-col',{attrs:{\"cols\":\"10\"}},[_c('v-form',{ref:(\"form-\" + (thread.id)),refInFor:true},[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-textarea',{attrs:{\"outlined\":\"\",\"name\":\"input-7-4\",\"label\":\"Draft a reply\"},model:{value:(_vm.message),callback:function ($$v) {_vm.message=$$v},expression:\"message\"}})],1),_c('v-col',{attrs:{\"cols\":\"6\"}},[_c('v-file-input',{attrs:{\"accept\":\"video/mp4, video/ogg\",\"placeholder\":\"Upload\",\"prepend-icon\":\"mdi-video\",\"label\":\"Reply Video\"},model:{value:(_vm.file),callback:function ($$v) {_vm.file=$$v},expression:\"file\"}})],1),_c('v-col',{attrs:{\"cols\":\"6\"}})],1)],1)],1)],1),_c('v-row',[_c('v-col',[_c('v-btn',{attrs:{\"large\":\"\",\"color\":\"#ec5252\",\"dark\":\"\"},on:{\"click\":function($event){return _vm.create_post($event, thread, i)}}},[_vm._v(\"Reply your student\")])],1)],1)],1)],1)}),1)],1)],1)],1)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\r\n  #student(v-if=\"course\")\r\n    v-container\r\n      h1 {{ course.name }}\r\n      v-row\r\n        v-col\r\n          v-expansion-panels.elevation-2(hover multiple v-model=\"currentThread\")\r\n            v-expansion-panel(v-for='(thread, i) in threads' :key='thread.id')\r\n              v-expansion-panel-header.font-weight-bold(style=\"font-size: 18px;\") {{ course.lessons[i].name }}\r\n              v-expansion-panel-content.px-6\r\n                v-list(v-if=\"thread.posts\")\r\n                  v-list-item(v-for='(post, idx) in thread.posts' :key='post.id')\r\n                    v-list-item-content.pb-0\r\n                      v-container.pt-0.pb-4.px-0(fluid)\r\n                        v-row.py-0(v-if=\"idx == 0 || post.updatedAt.substring(0, 10) != thread.posts[idx - 1].updatedAt.substring(0, 10)\")\r\n                          v-col.py-0\r\n                            v-chip(label color=\"indigo darken-3\" dark style=\"font-size: 12px;\") {{ new Date(post.updatedAt).toLocaleString([], { year: 'numeric', month: 'numeric', day:'numeric'}) }}\r\n                        v-row.mt-5\r\n                          v-col.pb-0(style=\"margin-bottom: -3px;\")\r\n                            video(width=\"100%\" height=\"audo\" controls)\r\n                              source(:src=\"post.videoUrl\" type=\"video/mp4\")\r\n                              | Your browser does not support HTML video.\r\n\r\n                        v-row.justify-end.bottom-border.mx-0.py-3(v-if=\"post.UserId != user.id\")\r\n                          v-col.pr-8.py-0(cols=\"6\") \r\n                            .speech-bubble-other\r\n                              v-row.ma-0(style=\"width: 100%;\")\r\n                                v-col.text-left\r\n                                  div {{ post.message }}\r\n                              .timestamp {{ new Date(post.updatedAt).toLocaleString([], { hour: '2-digit', minute:'2-digit'}) }}\r\n                          v-col.pa-0(cols=\"1\")\r\n                            v-avatar(color='indigo' size=\"40\")\r\n                              v-img(:src=\"avatar\")\r\n                        v-row.justify-start.bottom-border.mx-0.py-3(v-else)\r\n                          v-col.pa-0(cols=\"1\")\r\n                            v-avatar(color='indigo' size=\"40\")\r\n                              v-img(:src=\"avatar\")\r\n                          v-col.pl-8.py-0(cols=\"6\") \r\n                            .speech-bubble-self\r\n                              v-row.ma-0(style=\"width: 100%;\")\r\n                                v-col.text-left\r\n                                  div {{ post.message }}\r\n                              .timestamp {{ new Date(post.updatedAt).toLocaleString([], { hour: '2-digit', minute:'2-digit'}) }}\r\n                v-row.justify-center\r\n                  v-col(cols=\"10\")\r\n                    v-form(:ref=\"`form-${thread.id}`\")\r\n                      v-row\r\n                        v-col(cols=\"12\")\r\n                          v-textarea(outlined name='input-7-4' label='Draft a reply' v-model=\"message\")\r\n                        v-col(cols=\"6\")\r\n                          v-file-input(\r\n                            accept=\"video/mp4, video/ogg\" \r\n                            placeholder=\"Upload\" \r\n                            prepend-icon=\"mdi-video\"\r\n                            label=\"Reply Video\"\r\n                            v-model=\"file\")\r\n                        v-col(cols=\"6\")\r\n                          //- v-subheader.pl-0 Grade\r\n                          //- v-slider(v-model=\"grade\" min='0' max='100' thumb-label :thumb-size=\"24\")\r\n                v-row\r\n                  v-col\r\n                    v-btn(large color=\"#ec5252\" dark @click=\"create_post($event, thread, i)\") Reply your student\r\n            //- v-expansion-panel-header {{ new Date(thread.updatedAt).toLocaleString() }}\r\n            //- v-expansion-panel-content\r\n            //-   | {{ post.message }}\r\n</template>\r\n\r\n<script>\r\nimport Panel from '@/components/Panel'\r\nimport { mapState } from 'vuex'\r\nimport ThreadService from '@/services/ThreadService'\r\nimport CourseService from '@/services/CourseService'\r\nimport PostService from '@/services/PostService'\r\n\r\nexport default {\r\n  name: 'ShowCourseThread',\r\n  props: ['lesson_pos'],\r\n  data () {\r\n    return {\r\n      avatar: 'https://cdn.vuetifyjs.com/images/lists/2.jpg',\r\n      threads: [],\r\n      course: null,\r\n      message: '',\r\n      file: null,\r\n      grade: 0,\r\n      requiredRules: [\r\n        v => !!v || \"This field is required\"\r\n      ],\r\n      currentThread: [this.lesson_pos]\r\n    }\r\n  },\r\n\r\n  components: {\r\n    'panel': Panel\r\n  },\r\n\r\n  computed: {\r\n    ...mapState(['user'])\r\n  },\r\n\r\n  methods: {\r\n    adjustAspectRatioForFullScreen (width, height) {\r\n      var aspectRatio = this.originalHeight / this.originalWidth;\r\n      var desiredHeight = width * aspectRatio;\r\n      if (desiredHeight > height) {\r\n        this.videoHeight = height;\r\n        this.videoWidth = height / aspectRatio;\r\n      } else if (desiredHeight == height) {\r\n        this.videoHeight = height;\r\n        this.videoWidth = width;\r\n      } else {\r\n        this.videoHeight = desiredHeight;\r\n        this.videoWidth = width;\r\n      }\r\n    },\r\n\r\n    async create_post (event, thread, idx) {\r\n      if (this.$refs[`form-${thread.id}`][0].validate()) {\r\n        var formData = new FormData()\r\n        formData.set('tid', thread.id)\r\n        formData.set('message', this.message)\r\n        formData.set('grade', this.grade)\r\n        formData.append('video', this.file)\r\n        const response = await PostService.create(formData)\r\n        // threadResponse = await ThreadService.show(this.lesson.id, this.user.id)\r\n        this.threads[idx].posts.splice(this.threads[idx].posts.length, 0, response.data.post)\r\n        this.file = null\r\n        this.message = null\r\n      } else {\r\n        return\r\n      }\r\n    }\r\n  },\r\n\r\n  mounted: async function () {\r\n    const courseResponse = await CourseService.show(this.$route.params.course_id)\r\n    this.course = courseResponse.data.course\r\n    for (var i = 0; i < this.course.lessons.length; i++) {\r\n      if (this.user.isStudent) {\r\n        this.$store.dispatch('setNotifications', this.$store.state.notifications - this.course.unreadTutorPost)\r\n      } else {\r\n        this.$store.dispatch('setNotifications', this.$store.state.notifications - this.course.unreadStudentPost)\r\n      }\r\n      const response = await ThreadService.show(this.course.lessons[i].id, this.$route.params.student_id)\r\n      this.threads.push(response.data.thread)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n.v-avartar {\r\n  vertical-align: text-top !important;\r\n  width: 64px !important;\r\n  height: 64px !important;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShowCourseThread.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShowCourseThread.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ShowCourseThread.vue?vue&type=template&id=a5634c80&scoped=true&lang=pug&\"\nimport script from \"./ShowCourseThread.vue?vue&type=script&lang=js&\"\nexport * from \"./ShowCourseThread.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ShowCourseThread.vue?vue&type=style&index=0&id=a5634c80&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a5634c80\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VChip } from 'vuetify/lib/components/VChip';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VExpansionPanel } from 'vuetify/lib/components/VExpansionPanel';\nimport { VExpansionPanelContent } from 'vuetify/lib/components/VExpansionPanel';\nimport { VExpansionPanelHeader } from 'vuetify/lib/components/VExpansionPanel';\nimport { VExpansionPanels } from 'vuetify/lib/components/VExpansionPanel';\nimport { VFileInput } from 'vuetify/lib/components/VFileInput';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VTextarea } from 'vuetify/lib/components/VTextarea';\ninstallComponents(component, {VAvatar,VBtn,VChip,VCol,VContainer,VExpansionPanel,VExpansionPanelContent,VExpansionPanelHeader,VExpansionPanels,VFileInput,VForm,VImg,VList,VListItem,VListItemContent,VRow,VTextarea})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.course)?_c('div',[_c('v-container',[_c('v-row',{staticClass:\"justify-center\"},[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-row',{staticClass:\"justify-center\"},[_c('v-col',{staticClass:\"px-4\"},[_c('h2',{staticClass:\"font-weight-bold\"},[_vm._v(\"Checkout\")])])],1),_c('v-radio-group',{attrs:{\"mandatory\":true},model:{value:(_vm.paymentMethod),callback:function ($$v) {_vm.paymentMethod=$$v},expression:\"paymentMethod\"}},[_c('v-radio',{attrs:{\"label\":\"Paypal\",\"value\":\"paypal\"}}),_c('v-radio',{attrs:{\"label\":\"Credit Card\",\"value\":\"credit card\"}})],1),_c('v-row',{staticClass:\"justify-center\",class:{ hide: _vm.paymentMethod == 'paypal' }},[_c('v-col',{staticClass:\"px-4\"},[_c('div',{attrs:{\"id\":\"dropin-container\"}})])],1),_c('v-row',[_c('v-col',[_c('v-card',{staticClass:\"pa-3 px-10\",attrs:{\"outlined\":\"\"}},[_c('v-row',{staticClass:\"px-3\"},[_c('v-col',[_c('h2',{staticClass:\"font-weight-bold\"},[_vm._v(\"Summary\")])])],1),_c('v-row',{staticClass:\"px-3\"},[_c('v-col',{staticClass:\"px-4\",attrs:{\"cols\":\"12\"}},[_c('p',{staticClass:\"alignleft\"},[_vm._v(_vm._s(_vm.course.name)+\":\")]),_c('p',{staticClass:\"alignright\"},[_vm._v(\"S$ \"+_vm._s(_vm.course.price))])]),_c('v-col',{staticClass:\"px-4\",attrs:{\"cols\":\"12\"}},[_c('p',{staticClass:\"alignleft\"},[_vm._v(\"GST:\")]),_c('p',{staticClass:\"alignright\"},[_vm._v(\"S$ \"+_vm._s((_vm.course.price * 0.07).toFixed(2)))]),_c('div',{staticStyle:{\"clear\":\"both\"}})])],1),_c('v-divider',{staticClass:\"px-3\"}),_c('v-row',{staticClass:\"px-3\"},[_c('v-col',[_c('p',{staticClass:\"alignleft font-weight-bold\"},[_vm._v(\"Total:\")]),_c('p',{staticClass:\"alignright font-weight-bold\"},[_vm._v(\"S$ \"+_vm._s((_vm.course.price + (_vm.course.price * 0.07)).toFixed(2)))]),_c('div',{staticStyle:{\"clear\":\"both\"}})])],1),_c('v-btn',{staticClass:\"mb-5\",class:{ hide: _vm.paymentMethod == 'paypal' },staticStyle:{\"width\":\"50%\"},attrs:{\"large\":\"\",\"color\":\"#ec5252\",\"dark\":\"\"},on:{\"click\":_vm.requestPaymentMethod}},[_vm._v(\"Complete Payment\")]),_c('v-row',{staticClass:\"justify-center\",class:{ hide: _vm.paymentMethod != 'paypal' }},[_c('v-col',[_c('div',{attrs:{\"id\":\"paypal-button-container\"}})])],1),_c('div',{staticClass:\"error\",model:{value:(_vm.error),callback:function ($$v) {_vm.error=$$v},expression:\"error\"}},[_vm._v(_vm._s(_vm.error))])],1)],1)],1)],1)],1)],1)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Api from '@/services/Api'\r\n\r\nexport default {\r\n  // braintree\r\n  getClientToken () {\r\n    return Api().get('braintree-client-token')\r\n  },\r\n\r\n  createTransaction (paymentInfo) {\r\n    return Api().post('braintree-checkout', paymentInfo)\r\n  },\r\n\r\n  createPaypalTransaction (paymentInfo) {\r\n    return Api().post('braintree-paypal-checkout', paymentInfo)\r\n  },\r\n\r\n  // paypal direct\r\n  getPaypalClientToken () {\r\n    return Api().get('paypal-client-token')\r\n  },\r\n\r\n  createOrder (paymentInfo) {\r\n    return Api().post('paypal-create-order', paymentInfo)\r\n  },\r\n\r\n  captureOrder (paymentInfo) {\r\n    return Api().post('paypal-capture-order', paymentInfo)\r\n  }\r\n}\r\n","<template lang=\"pug\">\r\n  div(v-if=\"course\")\r\n    v-container\r\n      v-row.justify-center\r\n        v-col(cols=\"12\" md=\"6\")\r\n          v-row.justify-center\r\n            v-col.px-4\r\n              h2.font-weight-bold Checkout\r\n          \r\n          v-radio-group(v-model=\"paymentMethod\" :mandatory=\"true\")\r\n            v-radio(label=\"Paypal\" value=\"paypal\")\r\n            v-radio(label=\"Credit Card\" value=\"credit card\")\r\n\r\n          v-row.justify-center(:class=\"{ hide: paymentMethod == 'paypal' }\")\r\n            v-col.px-4\r\n              #dropin-container\r\n\r\n          v-row\r\n            v-col\r\n              v-card.pa-3.px-10(outlined)\r\n                v-row.px-3\r\n                  v-col\r\n                    h2.font-weight-bold Summary\r\n                v-row.px-3\r\n                  v-col(cols=\"12\").px-4\r\n                    p.alignleft {{ course.name }}:\r\n                    p.alignright S$ {{ course.price }}\r\n                  v-col(cols=\"12\").px-4\r\n                    p.alignleft GST:\r\n                    p.alignright S$ {{ (course.price * 0.07).toFixed(2) }}\r\n                    div(style=\"clear: both;\")\r\n                v-divider.px-3\r\n                v-row.px-3\r\n                  v-col\r\n                    p.alignleft.font-weight-bold Total:\r\n                    p.alignright.font-weight-bold S$ {{ (course.price + (course.price * 0.07)).toFixed(2) }}\r\n                    div(style=\"clear: both;\")\r\n                v-btn.mb-5(large color=\"#ec5252\" dark @click=\"requestPaymentMethod\" style=\"width: 50%;\" :class=\"{ hide: paymentMethod == 'paypal' }\") Complete Payment\r\n  \r\n                //- v-row.justify-center(:class=\"{ hide: paymentMethod != 'paypal' }\")\r\n                //-   v-col.px-4\r\n                //-     div(id=\"paypal-button\")\r\n\r\n                v-row.justify-center(:class=\"{ hide: paymentMethod != 'paypal' }\")\r\n                  v-col\r\n                    div#paypal-button-container\r\n\r\n                div.error(v-model=\"error\") {{ error }}\r\n</template>\r\n\r\n<script>\r\nimport PaymentService from '@/services/PaymentService'\r\nimport ThreadService from '@/services/ThreadService'\r\nimport CourseService from '@/services/CourseService'\r\n\r\nexport default {\r\n  name: 'Payment',\r\n  data () {\r\n    return {\r\n      course: null,\r\n      clientToken: '',\r\n      dropinInstance: null,\r\n      nonceObj: null,\r\n      deviceData: null,\r\n      transaction: null,\r\n      error: null,\r\n      paymentMethod: 'paypal'\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    togglePaymentMethod () {\r\n      if (this.paymentMethod == 'paypal') {\r\n        this.paymentMethod = 'credit card'\r\n      } else {\r\n        this.paymentMethod = 'paypal'\r\n      }\r\n    },\r\n\r\n    async requestPaymentMethod () {\r\n      this.nonceObj = await this.dropinInstance.requestPaymentMethod()\r\n      this.transaction = (await PaymentService.createTransaction({\r\n        amount: this.course.price,\r\n        nonce: this.nonceObj.nonce,\r\n        deviceData: this.deviceData\r\n      })).data.result\r\n      if (this.transaction.success) {\r\n        this.subscribe()\r\n      } else {\r\n        this.error = this.transaction.message\r\n      }\r\n    },\r\n\r\n    async subscribe () {\r\n      await Promise.all(this.course.lessons.map(async lesson => {\r\n        var response = await ThreadService.create({\r\n          lid: lesson.id\r\n        })\r\n        response.data.thread.posts = []\r\n        lesson.thread = response.data.thread\r\n        return lesson\r\n      }))\r\n\r\n      await this.$store.dispatch('subscribe', {\r\n        studentId: this.$store.state.user.id,\r\n        courseId: this.course.id\r\n      })\r\n\r\n      this.$router.push(`/course/show/${this.course.id}`)\r\n    }\r\n  },\r\n\r\n  mounted: async function () {\r\n    var response = await CourseService.show(this.$route.params.course_id)\r\n    this.course = response.data.course\r\n\r\n    const clientToken = (await PaymentService.getClientToken()).data.clientToken\r\n    this.clientToken = clientToken\r\n\r\n    const dropinInstance = await window.braintree.dropin.create({\r\n      authorization: clientToken,\r\n      container: '#dropin-container'\r\n    })\r\n\r\n    this.dropinInstance = dropinInstance\r\n\r\n    const clientInstance = await window.braintree.client.create({\r\n      authorization: clientToken\r\n    })\r\n\r\n    const dataCollectorInstance = await window.braintree.dataCollector.create({\r\n      client: clientInstance,\r\n      paypal: true\r\n    })\r\n\r\n    this.deviceData = dataCollectorInstance.deviceData\r\n\r\n    // paypal braintree\r\n    // Create a client.\r\n    // const paypalCheckoutInstance = await window.braintree.paypalCheckout.create({\r\n    //     client: clientInstance\r\n    // })\r\n    \r\n    // const paypalButton = await window.paypal.Button.render({\r\n    //   env: 'sandbox', // or 'production'\r\n\r\n    //   payment: async () => {\r\n    //     return await paypalCheckoutInstance.createPayment({\r\n    //       // Your PayPal options here. For available options, see\r\n    //       // http://braintree.github.io/braintree-web/current/PayPalCheckout.html#createPayment\r\n    //       flow: 'checkout',\r\n    //       amount: this.course.price,\r\n    //       currency: 'SGD',\r\n    //       intent: 'capture'\r\n    //     })\r\n    //   },\r\n\r\n    //   onAuthorize: async (data) => {\r\n    //     const response =  await paypalCheckoutInstance.tokenizePayment(data)\r\n    //     this.transaction = (await PaymentService.createPaypalTransaction({\r\n    //       amount: this.course.price,\r\n    //       nonce: response.nonce,\r\n    //       deviceData: this.deviceData\r\n    //     })).data.result\r\n    //     if (this.transaction.success) {\r\n    //       this.subscribe()\r\n    //     } else {\r\n    //       this.error = this.transaction.message\r\n    //     }\r\n    //   },\r\n\r\n    //   onCancel: function (data) {\r\n    //     console.log('checkout.js payment cancelled', JSON.stringify(data, 0, 2))\r\n    //   },\r\n\r\n    //   onError: function (err) {\r\n    //     console.error('checkout.js error', err)\r\n    //   }\r\n    // }, '#paypal-button')\r\n\r\n    // console.log(paypalButton)\r\n\r\n    // pure paypal api\r\n    let paypalScript = document.createElement('script')\r\n    paypalScript.src = 'https://www.paypal.com/sdk/js?client-id=AepgsiQK_rhw-m-bTjjuZ5lRxPWadsmSzn9dH_Lsn8o5uzSsTHsIRuxfaCfyg0odhrZFxq6_qpsmu-P7&currency=SGD'\r\n    paypalScript.addEventListener('load', () => {\r\n      \r\n      window.paypal.Buttons({\r\n        locale: 'en_US',\r\n\r\n        createOrder: async () => {\r\n          const orderId = (await PaymentService.createOrder({\r\n            amount: (this.course.price + (this.course.price * 0.07)).toFixed(2)\r\n          })).data.order.id\r\n          this.orderId = orderId\r\n          return orderId\r\n        },\r\n        onApprove: async () => {\r\n          const result = (await PaymentService.captureOrder({\r\n            orderId: this.orderId\r\n          })).data.result\r\n          this.result = result\r\n          if (this.result.status == \"COMPLETED\") {\r\n            alert('Success!')\r\n            this.subscribe()\r\n          }\r\n        },\r\n        onError: err => {\r\n          console.log(err)\r\n        }\r\n      }).render('#paypal-button-container');\r\n\r\n      let connectScript = document.createElement('script')  \r\n      connectScript.src = 'https://www.paypalobjects.com/js/external/connect/api.js'\r\n      connectScript.addEventListener(\"load\", () => {\r\n        window.paypal.use(['login'], function (login) {\r\n          login.render ({\r\n            \"appid\":\"AepgsiQK_rhw-m-bTjjuZ5lRxPWadsmSzn9dH_Lsn8o5uzSsTHsIRuxfaCfyg0odhrZFxq6_qpsmu-P7\",\r\n            \"authend\":\"sandbox\",\r\n            \"scopes\":\"openid\",\r\n            \"containerid\":\"connect-button\",\r\n            \"responseType\":\"code\",\r\n            \"locale\":\"en-us\",\r\n            \"buttonShape\":\"rectangle\",\r\n            \"buttonSize\":\"lg\",\r\n            \"returnurl\":\"https://example.com\"\r\n          })\r\n        })\r\n      })\r\n      document.body.appendChild(connectScript)\r\n    })\r\n    document.body.appendChild(paypalScript)\r\n  }\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n.alignleft {\r\n  float: left;\r\n}\r\n\r\n.alignright {\r\n  float: right;\r\n}\r\n\r\np {\r\n  margin: 0 !important;\r\n  font-size: 18px;\r\n}\r\n\r\n.hide {\r\n  display: none;\r\n}\r\n\r\n.error {\r\n  color: white;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Payment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Payment.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Payment.vue?vue&type=template&id=6a23dff3&scoped=true&lang=pug&\"\nimport script from \"./Payment.vue?vue&type=script&lang=js&\"\nexport * from \"./Payment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Payment.vue?vue&type=style&index=0&id=6a23dff3&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6a23dff3\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VRadio } from 'vuetify/lib/components/VRadioGroup';\nimport { VRadioGroup } from 'vuetify/lib/components/VRadioGroup';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCard,VCol,VContainer,VDivider,VRadio,VRadioGroup,VRow})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',[_c('v-row',{staticClass:\"justify-center\"},[_c('v-col',{attrs:{\"cols\":\"6\"}},[_c('span',{attrs:{\"id\":\"connect-button\"}})])],1),_c('v-row',{staticClass:\"justify-center\"},[_c('v-col',{attrs:{\"cols\":\"6\"}},[_c('div',{attrs:{\"id\":\"paypal-button-container\"}})])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\r\n  v-container\r\n    //- div(ref='paypal')\r\n    v-row.justify-center\r\n      v-col(cols=6)\r\n        span#connect-button\r\n\r\n    v-row.justify-center\r\n      v-col(cols=6)\r\n        div#paypal-button-container\r\n\r\n        //- div#or  or \r\n    //- // Advanced credit and debit card payments form\r\n    //- v-row\r\n    //-   v-col\r\n    //-     .card_container\r\n    //-       form#my-sample-form(v-if=\"isEligible\")\r\n    //-         label(for='card-number') Card Number\r\n    //-         #card-number.card_field\r\n    //-         div\r\n    //-           label(for='expiration-date') Expiration Date\r\n    //-           #expiration-date.card_field\r\n    //-         div\r\n    //-           label(for='cvv') CVV\r\n    //-           #cvv.card_field\r\n    //-         label(for='card-holder-name') Name on Card\r\n    //-         input#card-holder-name(type='text' name='card-holder-name' autocomplete='off' placeholder='card holder name')\r\n    //-         div\r\n    //-           label(for='card-billing-address-street') Billing Address\r\n    //-           input#card-billing-address-street(type='text' name='card-billing-address-street' autocomplete='off' placeholder='street address')\r\n    //-         div\r\n    //-           label(for='card-billing-address-unit') &nbsp;\r\n    //-           input#card-billing-address-unit(type='text' name='card-billing-address-unit' autocomplete='off' placeholder='unit')\r\n    //-         div\r\n    //-           input#card-billing-address-city(type='text' name='card-billing-address-city' autocomplete='off' placeholder='city')\r\n    //-         div\r\n    //-           input#card-billing-address-state(type='text' name='card-billing-address-state' autocomplete='off' placeholder='state')\r\n    //-         div\r\n    //-           input#card-billing-address-zip(type='text' name='card-billing-address-zip' autocomplete='off' placeholder='zip / postal code')\r\n    //-         div\r\n    //-           input#card-billing-address-country(type='text' name='card-billing-address-country' autocomplete='off' placeholder='country code')\r\n    //-         br\r\n    //-         br\r\n    //-         button#submit.btn(value='submit') Pay\r\n\r\n</template>\r\n\r\n<script>\r\nimport PaymentService from '@/services/PaymentService'\r\n// import Vue from 'vue'\r\n\r\nexport default {\r\n  name: 'AdvancedPayment',\r\n  data () {\r\n    return {\r\n      loaded: false,\r\n      paidFor: false,\r\n      course: {\r\n        price: 2.0,\r\n        description: \"leg lamp from that one movie\"\r\n      },\r\n      isEligible: true,\r\n      orderId: '',\r\n      result: null\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    setLoaded () {\r\n      this.loaded = true;\r\n      window.paypal.Buttons({\r\n        createOrder: async () => {\r\n          const orderId = (await PaymentService.createOrder({\r\n            amount: this.course.price\r\n          })).data.order.id\r\n          this.orderId = orderId\r\n          return orderId\r\n        },\r\n        onApprove: async () => {\r\n          const result = (await PaymentService.captureOrder({\r\n            orderId: this.orderId\r\n          })).data.result\r\n          this.result = result\r\n        },\r\n        onError: err => {\r\n          console.log(err)\r\n        }\r\n      })\r\n      .render('#paypal-button-container');\r\n\r\n      // if (window.paypal.HostedFields.isEligible()) {\r\n      //   window.paypal.HostedFields.render({\r\n      //     createOrder: async () => {\r\n      //       const orderId = (await PaymentService.createOrder(this.course.price)).data.order.id\r\n      //       this.orderId = orderId\r\n      //     }, // replace order-ID with the order ID\r\n      //     styles: {\r\n      //       'input': {\r\n      //         'font-size': '17px',\r\n      //         'font-family': 'helvetica, tahoma, calibri, sans-serif',\r\n      //         'color': '#3a3a3a'\r\n      //       },\r\n      //       ':focus': {\r\n      //         'color': 'black'\r\n      //       }\r\n      //     },\r\n      //     fields: {\r\n      //       number: {\r\n      //         selector: '#card-number',\r\n      //         placeholder: 'card number'\r\n      //       },\r\n      //       cvv: {\r\n      //         selector: '#cvv',\r\n      //         placeholder: 'card security number'\r\n      //       },\r\n      //       expirationDate: {\r\n      //         selector: '#expiration-date',\r\n      //         placeholder: 'mm/yy'\r\n      //       }\r\n      //     }\r\n      //   }).then(function (hf) {\r\n      //     console.log(hf)\r\n      //     document.getElementById('my-sample-form').addEventListener('submit', function (event) {\r\n      //       event.preventDefault();\r\n      //       hf.submit({\r\n      //         // Cardholder Name\r\n      //         cardholderName: document.getElementById('card-holder-name').value,\r\n      //         // Billing Address\r\n      //         billingAddress: {\r\n      //           streetAddress: document.getElementById('card-billing-address-street').value,      // address_line_1 - street\r\n      //           extendedAddress: document.getElementById('card-billing-address-unit').value,       // address_line_2 - unit\r\n      //           region: document.getElementById('card-billing-address-state').value,           // admin_area_1 - state\r\n      //           locality: document.getElementById('card-billing-address-city').value,          // admin_area_2 - town / city\r\n      //           postalCode: document.getElementById('card-billing-address-zip').value,           // postal_code - postal_code\r\n      //           countryCodeAlpha2: document.getElementById('card-billing-address-country').value   // country_code - country\r\n      //         }\r\n      //       })\r\n      //     })\r\n      //   })\r\n      // }\r\n      // else {\r\n      //   this.isEligible = false // hides the advanced credit and debit card payments fields if merchant isn't eligible\r\n      // }\r\n    }\r\n  },\r\n\r\n  mounted: async function () {\r\n    // const clientToken = (await PaymentService.getPaypalClientToken()).data.token\r\n\r\n    // const script = document.createElement(\"script\");\r\n    // console.log(clientToken)\r\n    // script.setAttribute(\"data-client-token\", clientToken)\r\n    // script.src = `https://www.paypal.com/sdk/js?client-id=AepgsiQK_rhw-m-bTjjuZ5lRxPWadsmSzn9dH_Lsn8o5uzSsTHsIRuxfaCfyg0odhrZFxq6_qpsmu-P7&currency=SGD`;\r\n    // script.addEventListener(\"load\", this.setLoaded);\r\n    // document.body.appendChild(script);\r\n    // await Vue.loadScript('https://www.paypal.com/sdk/js?client-id=ATu_HUpmHi7gl16B8tUX18ClH5cg1KDkq1BLNkjAN2brQJjDjBNic3Uf43VWWPGLqP9bfg4BiT9I1PbT&currency=SGD')\r\n    // await Vue.loadScript('https://www.paypalobjects.com/js/external/connect/api.js')\r\n    let paypalScript = document.createElement('script')\r\n    // sandbox\r\n    // paypalScript.src = 'https://www.paypal.com/sdk/js?client-id=AepgsiQK_rhw-m-bTjjuZ5lRxPWadsmSzn9dH_Lsn8o5uzSsTHsIRuxfaCfyg0odhrZFxq6_qpsmu-P7&currency=SGD'\r\n    \r\n    // live\r\n    paypalScript.src = 'https://www.paypal.com/sdk/js?client-id=AbwBSbdR82bJexDTQGyi-ZJ7jKRSAOsfmh651obC8P5TcAEr70Wan7xICW3eOoWFGwHtj-xOnZQbfyib&currency=SGD'\r\n    paypalScript.addEventListener('load', () => {\r\n      \r\n      window.paypal.Buttons({\r\n        locale: 'en_US',\r\n\r\n        createOrder: async () => {\r\n          const orderId = (await PaymentService.createOrder({\r\n            amount: this.course.price\r\n          })).data.order.id\r\n          this.orderId = orderId\r\n          return orderId\r\n        },\r\n        onApprove: async () => {\r\n          const result = (await PaymentService.captureOrder({\r\n            orderId: this.orderId\r\n          })).data.result\r\n          this.result = result\r\n          if (this.result.status == \"COMPLETED\") {\r\n            alert('Success!')\r\n          }\r\n        },\r\n        onError: err => {\r\n          console.log(err)\r\n        }\r\n      }).render('#paypal-button-container');\r\n\r\n      let connectScript = document.createElement('script')  \r\n      connectScript.src = 'https://www.paypalobjects.com/js/external/connect/api.js'\r\n      connectScript.addEventListener(\"load\", () => {\r\n        window.paypal.use(['login'], function (login) {\r\n          login.render ({\r\n            \"appid\":\"AepgsiQK_rhw-m-bTjjuZ5lRxPWadsmSzn9dH_Lsn8o5uzSsTHsIRuxfaCfyg0odhrZFxq6_qpsmu-P7\",\r\n            \"authend\":\"sandbox\",\r\n            \"scopes\":\"openid\",\r\n            \"containerid\":\"connect-button\",\r\n            \"responseType\":\"code\",\r\n            \"locale\":\"en-us\",\r\n            \"buttonShape\":\"rectangle\",\r\n            \"buttonSize\":\"lg\",\r\n            \"returnurl\":\"https://example.com\"\r\n          })\r\n        })\r\n      })\r\n      document.body.appendChild(connectScript)\r\n    })\r\n    document.body.appendChild(paypalScript)\r\n  }\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n#or {\r\n    position: relative;\r\n    z-index: 1;\r\n    overflow: hidden;\r\n    text-align: center;\r\n}\r\n\r\n#or:before, #or:after {\r\n    position: absolute;\r\n    top: 51%;\r\n    overflow: hidden;\r\n    height: 1px;\r\n    content: '\\a0';\r\n    background-color: gray;\r\n    width: 47%;\r\n}\r\n\r\n#or:before {\r\n  width: 47%;\r\n  left: 0;\r\n}\r\n\r\n#or:after {\r\n  width: 47%;\r\n  right: 0;\r\n}\r\n\r\n.paypal-button-container {\r\n    border-radius: 5px;\r\n    background-color: #FFFFFF;\r\n    padding: 20px;\r\n    max-width: 760px;\r\n    width: 100%;\r\n    margin: 0 auto;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdvancedPayment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdvancedPayment.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdvancedPayment.vue?vue&type=template&id=689b7819&scoped=true&lang=pug&\"\nimport script from \"./AdvancedPayment.vue?vue&type=script&lang=js&\"\nexport * from \"./AdvancedPayment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AdvancedPayment.vue?vue&type=style&index=0&id=689b7819&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"689b7819\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VCol,VContainer,VRow})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"score\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.scoreLoading),expression:\"!scoreLoading\"}],ref:\"scorediv\",staticClass:\"ma-0\",staticStyle:{\"height\":\"220px\",\"width\":\"1000px\"},attrs:{\"id\":\"score\"}}),_c('v-btn',{on:{\"click\":_vm.changeBars}},[_vm._v(\"Change Bars\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* eslint-disable */\r\n<template lang=\"pug\">\r\n  #score\r\n    //- div.ma-0#score(ref=\"scorediv\" v-show=\"!scoreLoading\" style=\"height:130px; overflow:hidden;\")\r\n    div.ma-0#score(ref=\"scorediv\" v-show=\"!scoreLoading\" style=\"height:220px; width:1000px;\")\r\n\r\n    v-btn(@click=\"changeBars\") Change Bars\r\n</template>\r\n\r\n<script>\r\n/* eslint-disable */\r\nimport axios from \"axios\"\r\nimport { OpenSheetMusicDisplay } from \"opensheetmusicdisplay\"\r\n\r\nexport default {\r\n  name: 'OSMD',\r\n  data () {\r\n    return {\r\n      scoreLoading: false,\r\n      osmd: null,\r\n      from: 1,\r\n      to: 2\r\n    }\r\n  },\r\n \r\n  methods: {\r\n    async changeBars () {\r\n      this.from += 2\r\n      this.to += 2\r\n      this.osmd.setOptions({\r\n        drawFromMeasureNumber: this.from,\r\n        drawUpToMeasureNumber: this.to\r\n      })\r\n      console.log(this.osmd.graphic)\r\n      await this.osmd.render()\r\n      console.log(this.osmd.graphic)\r\n      // console.log(this.osmd.graphic.musicPages[0].boundingBox)\r\n\r\n      // console.log(this.osmd.GraphicSheet.measureList.map(measure => measure[0].boundingBox))\r\n\r\n    }\r\n  },\r\n\r\n  mounted: async function () {\r\n    OpenSheetMusicDisplay.prototype.preCalculate = function () {\r\n        if (!this.graphic) {\r\n            throw new Error(\"OpenSheetMusicDisplay: Before rendering a music sheet, please load a MusicXML file\");\r\n        }\r\n        if (this.drawer) {\r\n            this.drawer.clear(); // clear canvas before setting width\r\n        }\r\n        // musicSheetCalculator.clearSystemsAndMeasures() // maybe? don't have reference though\r\n        // musicSheetCalculator.clearRecreatedObjects();\r\n\r\n        // Set page width\r\n        let width = this.container.offsetWidth;\r\n        if (this.rules.RenderSingleHorizontalStaffline) {\r\n            width = 32767; // set safe maximum (browser limit), will be reduced later\r\n            // reduced later in MusicSheetCalculator.calculatePageLabels (sets sheet.pageWidth to page.PositionAndShape.Size.width before labels)\r\n            // rough calculation:\r\n            // width = 600 * this.sheet.SourceMeasures.length;\r\n        }\r\n        console.log(\"[OSMD] render width: \" + width);\r\n\r\n        this.sheet.pageWidth = width / this.zoom / 10.0;\r\n        if (this.rules.PageFormat && !this.rules.PageFormat.IsUndefined) {\r\n            this.rules.PageHeight = this.sheet.pageWidth / this.rules.PageFormat.aspectRatio;\r\n            console.log(\"[OSMD] PageHeight: \" + this.rules.PageHeight);\r\n        } else {\r\n            console.log(\"[OSMD] endless/undefined pageformat, id: \" + this.rules.PageFormat.idString);\r\n            this.rules.PageHeight = 100001; // infinite page height // TODO maybe Number.MAX_VALUE or Math.pow(10, 20)?\r\n        }\r\n\r\n        // Before introducing the following optimization (maybe irrelevant), tests\r\n        // have to be modified to ensure that width is > 0 when executed\r\n        //if (isNaN(width) || width === 0) {\r\n        //    return;\r\n        //}\r\n\r\n        // Calculate again\r\n        this.graphic.reCalculate();\r\n\r\n        if (this.drawingParameters.drawCursors) {\r\n            this.graphic.Cursors.length = 0;\r\n        }\r\n\r\n        // needBackendUpdate is well intentioned, but we need to cover all cases.\r\n        //   backends also need an update when this.zoom was set from outside, which unfortunately doesn't have a setter method to set this in.\r\n        //   so just for compatibility, we need to assume users set osmd.zoom, so we'd need to check whether it was changed compared to last time.\r\n        if (true || this.needBackendUpdate) {\r\n            this.createOrRefreshRenderBackend();\r\n            this.needBackendUpdate = false;\r\n        }\r\n\r\n        this.drawer.setZoom(this.zoom);\r\n        // Finally, draw\r\n        this.drawer.drawSheet(this.graphic);\r\n\r\n        this.enableOrDisableCursor(this.drawingParameters.drawCursors);\r\n\r\n        if (this.drawingParameters.drawCursors && this.cursor) {\r\n            // Update the cursor position\r\n            this.cursor.update();\r\n        }\r\n        this.zoomUpdated = false;\r\n    }\r\n    this.osmd = new OpenSheetMusicDisplay(\r\n      this.$refs.scorediv, \r\n      {\r\n        drawFromMeasureNumber: 1,\r\n        drawUpToMeasureNumber: 2,\r\n        fillEmptyMeasuresWithWholeRest: true,\r\n        drawComposer: false,\r\n        drawTitle: false,\r\n        renderSingleHorizontalStaffline: true,\r\n        drawPartNames: false,\r\n        autoResize: false,\r\n        drawMetronomeMarks: false,\r\n        // backend: 'Canvas',\r\n        drawingParameters: 'compacttight'\r\n      }\r\n    )\r\n    // this.osmd.setCustomPageFormat({\r\n    //   width: 1000,\r\n    //   height: 300\r\n    // })\r\n    // this.osmd.setCustomPageFormat(1000)\r\n    this.scoreLoading = true;\r\n    let scoreXml = await axios.get(\"https://rhythm-academy.s3-ap-southeast-1.amazonaws.com/twinkle-twinkle-little-star.musicxml\");    \r\n    // let scoreXml = await axios.get(\"https://opensheetmusicdisplay.github.io/demo/sheets/MuzioClementi_SonatinaOpus36No3_Part1.xml\");\r\n\r\n    await this.osmd.load(scoreXml.data);\r\n    this.scoreLoading = false;\r\n    await this.$nextTick();\r\n    // this.osmd.zoom = 1.3\r\n    // this.osmd.setCustomPageFormat(1, .3)\r\n    console.log(this.osmd.graphic)\r\n    await this.osmd.render();\r\n    // await this.osmd.preCalculate()\r\n    console.log(this.osmd.graphic)\r\n    // console.log(this.osmd.drawer) \r\n\r\n    // console.log(this.osmd.graphic.musicPages[0].boundingBox)\r\n    // console.log(this.osmd.GraphicSheet.measureList.map(measure => measure[0].boundingBox))\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OSMD.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OSMD.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OSMD.vue?vue&type=template&id=f3ccdbb6&lang=pug&\"\nimport script from \"./OSMD.vue?vue&type=script&lang=js&\"\nexport * from \"./OSMD.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\ninstallComponents(component, {VBtn})\n","import Vue from \"vue\"\r\nimport VueRouter from \"vue-router\"\r\nimport Home from \"../components/Home\"\r\nimport Register from \"../components/Register\"\r\nimport Student from \"../components/StudentView/Student\"\r\nimport LogIn from \"../components/LogIn\"\r\nimport ShowCourse from \"../views/course/ShowCourse\"\r\nimport CourseIndex from \"../views/course/CourseIndex\"\r\nimport NewCourse from \"../views/course/NewCourse\"\r\nimport TutorIndex from \"../components/TutorIndex\"\r\nimport Video from \"../components/Video\"\r\nimport CoursesThreadsIndex from \"../views/thread/CoursesThreadsIndex\"\r\nimport CourseThreadsIndex from \"../views/thread/CourseThreadsIndex\"\r\nimport ShowCourseThread from \"../views/thread/ShowCourseThread\"\r\nimport Payment from \"../views/Payment\"\r\nimport store from \"../store/store\"\r\nimport AdvancedPayment from \"../views/AdvancedPayment\"\r\nimport OSMD from \"../components/OSMD\"\r\nimport ShowLesson from \"../components/Course/ShowLesson\"\r\n\r\nVue.use(VueRouter);\r\n\r\nconst routes = [\r\n  {\r\n    path: '/',\r\n    name: 'home',\r\n    component: Home\r\n  },\r\n  {\r\n    path: '/register',\r\n    name: 'register',\r\n    component: Register\r\n  },\r\n  {\r\n    path: '/login',\r\n    name: 'login',\r\n    component: LogIn\r\n  },\r\n  {\r\n    path: '/student',\r\n    name: 'student',\r\n    component: Student\r\n  },\r\n  {\r\n    path: '/course/show/:course_id',\r\n    name: 'showcourse',\r\n    component: ShowCourse\r\n  },\r\n  {\r\n    path: '/course/show/:course_id/lesson/:lesson_id',\r\n    name: 'showlesson',\r\n    component: ShowLesson,\r\n    props: true\r\n  },\r\n  {\r\n    path: '/course/index',\r\n    name: 'courseindex',\r\n    component: CourseIndex\r\n  },\r\n  {\r\n    path: '/course/new/',\r\n    name: 'newcourse',\r\n    component: NewCourse\r\n  },\r\n  {\r\n    path: '/tutor/index',\r\n    name: 'tutorindex',\r\n    component: TutorIndex\r\n  },\r\n  {\r\n    path: '/video',\r\n    name: 'video',\r\n    component: Video\r\n  },\r\n  {\r\n    path: '/courses/threads/index',\r\n    component: CoursesThreadsIndex\r\n  },\r\n  {\r\n    path: '/course/threads/index/:course_id',\r\n    component: CourseThreadsIndex\r\n  },\r\n  {\r\n    path: '/course/threads/show/:course_id/:student_id',\r\n    name: 'showthread',\r\n    component: ShowCourseThread,\r\n    props: true\r\n  },\r\n  {\r\n    path: '/payment/:course_id',\r\n    name: 'payment',\r\n    component: Payment\r\n  },\r\n  {\r\n    path: '/advanced-payment',\r\n    component: AdvancedPayment\r\n  },\r\n  {\r\n    path: '/osmd',\r\n    component: OSMD\r\n  }\r\n];\r\n\r\nconst router = new VueRouter({\r\n  mode: 'history',\r\n  routes: routes\r\n});\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n  if (to.name != 'login' && !store.state.isUserLoggedIn && to.name != 'home' && to.name != 'register') next({ name: 'login' });\r\n  else next();\r\n})\r\n\r\n\r\nexport default router;\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('svg',{attrs:{\"id\":\"svg2\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 57.2 99.95\"}},[_c('title',[_vm._v(\"bg\")]),_c('g',{attrs:{\"id\":\"path3821\"}},[_c('rect',{attrs:{\"x\":\"34.97\",\"y\":\"79.23\",\"width\":\"22.23\",\"height\":\"4\"}}),_c('rect',{attrs:{\"x\":\"34.97\",\"y\":\"88.71\",\"width\":\"22.23\",\"height\":\"4\"}}),_c('path',{attrs:{\"d\":\"M25.4,0h4v83.1h-.07c.41,5.12-3.7,11.2-10.33,14.6-7.7,3.9-16,2.6-18.4-2.9s1.9-13.2,9.7-17.2c5.44-2.8,11.31-3,15.1-.73Z\",\"transform\":\"translate(0.06 -0.04)\"}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <svg id=\"svg2\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 57.2 99.95\"><title>bg</title><g id=\"path3821\"><rect x=\"34.97\" y=\"79.23\" width=\"22.23\" height=\"4\"/><rect x=\"34.97\" y=\"88.71\" width=\"22.23\" height=\"4\"/><path d=\"M25.4,0h4v83.1h-.07c.41,5.12-3.7,11.2-10.33,14.6-7.7,3.9-16,2.6-18.4-2.9s1.9-13.2,9.7-17.2c5.44-2.8,11.31-3,15.1-.73Z\" transform=\"translate(0.06 -0.04)\"/></g></svg>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"bpmIcon\"\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.my-svg {\r\n  fill: currentColor\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./bpm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./bpm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./bpm.vue?vue&type=template&id=e41933a2&scoped=true&\"\nimport script from \"./bpm.vue?vue&type=script&lang=js&\"\nexport * from \"./bpm.vue?vue&type=script&lang=js&\"\nimport style0 from \"./bpm.vue?vue&type=style&index=0&id=e41933a2&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e41933a2\",\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\r\nimport Vuetify from \"vuetify/lib\";\r\nimport bpm from \"@/components/CustomIcons/bpm\"\r\n\r\nVue.use(Vuetify);\r\n\r\nexport default new Vuetify({\r\n  icons: {\r\n    values: {\r\n      custom_bpm: {\r\n        component: bpm\r\n      }\r\n    },\r\n  }\r\n});\r\n","import Vue from \"vue\";\r\nimport App from \"./App.vue\";\r\nimport router from \"./router\";\r\nimport store from \"./store/store\";\r\nimport vuetify from \"./plugins/vuetify\";\r\n\r\nVue.config.productionTip = false;\r\n\r\nnew Vue({\r\n  router,\r\n  store,\r\n  vuetify,\r\n  render: h => h(App)\r\n}).$mount(\"#app\");\r\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShowLesson.vue?vue&type=style&index=0&id=71e804a6&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShowLesson.vue?vue&type=style&index=0&id=71e804a6&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdvancedPayment.vue?vue&type=style&index=0&id=689b7819&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdvancedPayment.vue?vue&type=style&index=0&id=689b7819&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShowCourse.vue?vue&type=style&index=0&id=58d3c073&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShowCourse.vue?vue&type=style&index=0&id=58d3c073&scoped=true&lang=css&\"","module.exports = __webpack_public_path__ + \"img/play_button.3f8fd321.png\";","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CoursesThreadsIndex.vue?vue&type=style&index=0&id=6558bc50&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CoursesThreadsIndex.vue?vue&type=style&index=0&id=6558bc50&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./bpm.vue?vue&type=style&index=0&id=e41933a2&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./bpm.vue?vue&type=style&index=0&id=e41933a2&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Video.vue?vue&type=style&index=0&id=0d1a27ee&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Video.vue?vue&type=style&index=0&id=0d1a27ee&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Header.vue?vue&type=style&index=0&id=6000137a&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Header.vue?vue&type=style&index=0&id=6000137a&scoped=true&lang=css&\""],"sourceRoot":""}